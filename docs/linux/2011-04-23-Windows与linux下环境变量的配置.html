<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <title>知不知</title> <meta name="viewport" content="width=device-width, initial-scale=1"> <meta name="theme-color" content="#157878"> <link rel="stylesheet" href="/list/assets/css/normalize.css"> <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'> <link rel="stylesheet" href="/list/assets/css/cayman.css"> </head> <body> <section class="page-header"> <h1 class="project-name">知不知</h1> <h2 class="project-tagline"><a style="color:#ffffff;" href="http://luowei.github.io/list">知不知</a> 是一个代码爱好者的技术知识分享部落格。</h2> <a href="http://wodedata.com" target="_blank" class="btn">wodedata</a> <a href="/list" class="btn">home</a> <a href="http://app.wodedata.com" target="_blank" class="btn">APP作品</a> </section> <section class="main-content"> <!-- 标题 --> <h2>Windows与linux下环境变量的配置</h2> <!-- Google Ads --> <script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <p><ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-8760692904992206" data-ad-slot="2948937366"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script></p> <h3 id="windows">windows</h3> <p>在Windows系统中，环境变量可分为用户变量和系统变量。用户变量可以被当前用户修改，而系统变量则只能由具有管理员权限的用户进行添加或修改。</p> <p><strong>配置环境变量</strong><br /> 除了直接在”系统属性”窗口中修改，还可以在命令提示符或注册表编辑器中修改，甚至可以使用专门的程序函数进行修改。改变环境变量和环境变量中的值时，注意不要含有空格，也不要用中文。</p> <p>方法一：</p> <blockquote> <p>通过命令提示符修改。这种设置环境变量的方式只对当前运行窗口有效，关闭运行窗口后设置就无效了。<br /> 按下”Win+R”组合键，打开运行组合键，输入”cmd”命令打开命令提示符窗口。在该窗口，我们可以通过set命令来查看、创建、删除或修改环境变量。<br /> 比如，要查看Path环境变量的设置，可以输入”set Path”； 如果要设置一个安装JAVA程序的环境变量”JAVA_HOME”，并将其值设置为”D:\Java\jdk1.6.0”，可以输入：”set JAVA_HOME=D:\Java\jdk1.6.0”；<br /> 如果要删除这个环境变量，可以输入：”set JAVA_HOME=”（注意”=”号后面没有空格）。修改环境变量时，主要是追加的方法，即在不改变环境变量现有设置的情况下，增加变量的值。<br /> 比如要给环境变量”Path”增加一个值为”%JAVA_HOME%\BIN;”的值，可以输入：”set Path=Path;%JAVA_HOME%\BIN;”。</p> </blockquote> <p>方法二：</p> <blockquote> <p>通过注册表修改。在”运行”对话框中输入”regedit”命令，打开注册表编辑器。 然后，定位到[HKEY_LOCAL_MACHINE\ SYSTEM\CurrentControlSet\Control\Session Manager\Environment]子键，当前系统的环境变量就会出现在右侧窗格。 双击需要修改的变量，打开”编辑字符串”对话框，然后在”数值数据”文本框中修改即可。 使用同样的方法，定位到用户变量的子键[HKEY_CURRENT_ USER\Environment]，在这里可以对用户变量进行修改。</p> </blockquote> <p><strong>环境变量的备份与恢复</strong></p> <p>方法一：</p> <blockquote> <p>环境变量是一些个性化的参数组合，在日常使用中，用户可对其进行备份。<br /> 在注册表编辑器中查找环境变量时，单击”编辑→查找”，输入环境变量值即可。<br /> 找到保存位置后，选择”文件→导出注册表文件”，在弹出窗口中勾选导出范围为”选定的分支”，把它们导出为REG文件。在重装系统或想将自己设置的环境变量与别人共享时，可以双击导出的REG文件，导入相关参数。导入后，重启系统即可。<br /> 例如：<br /> 系统的环境变量放在HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Session Manager\Environment 用户的环境变量放在HKEY_CURRENT_USER\Environment 可以在开始中运行regedit导出和导入相应的键值。</p> </blockquote> <p>方法二：</p> <blockquote> <p>在开始菜单中运行cmd，进入命令窗口，用set命令得到所有的变量设置，用set » c:\environment.txt将这些值写入文件中。<br /> 可以将这些变量设置逐条拷贝到环境变量的设置中（我的电脑–属性–高级–环境变量）如果不想把这么多的变量写道这个环境变量中，或者是为了更好的移植，也可以用下面的方法：</p> </blockquote> <p>编写一个bat文件，内容是设置一些变量，例如：</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>call %NA_ROOT%\ini\expEnv PATH %projectsDir%\bin
set ORBIX_ROOT=%MIDDLEWARE%\orbix_2.3c
set PATH=%PATH%;%ORBIX_ROOT%\bin
</code></pre></div></div> <p>等等跟具自己的需要添加，然后建立一个快捷方式，目标这样写%windir%\System32\cmd.exe /k c:\myenv.cmd ok!运行这个快捷方式，bat中的设置会在这个窗口中了，关闭这个窗口当然就没有了变量设置。或者是用下面的方法： 在注册表的HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Command Processor中有一个autorun的键值， 将这个值指向一个.bat文件则在你运行cmd命令时会先运行这个批处理文件。另外，如果运行cmd /d命令就会跳过这个文件不执行。</p> <p><strong>巧用环境变量</strong><br /> 比如，在浏览器地址栏中，输入网站中文名（如”新浪”），即可快速到达该网站。在”环境变量”对话框中，单击”系统变量”列表下的”新建”按钮，打开相应的对话框，在”变量名”文本框中，输入”新浪”，在”变量值”文本框中，输入：”“C:\Program Files\Internet Explorer\IEXPLORE.exe” www.sina.com.cn”。注意：IEXPLORE.exe”和www之间有一个半角的空格。单击”确定”按钮，相关设置即可生效。在”运行”对话框中，输入”%新浪%”，即可快速启动IE浏览器并进入新浪网站。</p> <p>windows的系统变量</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>%homedrive% = 当前启动的系统的所在分区 (一般为C:\ )
%systemdrive% = 当前启动的系统的所在分区(一般为C:\ )
%SystemRoot% = 当前启动的系统的所在目录(一般为C:\WINDOWS )
%windir% = %SystemRoot% = 当前启动的系统的所在目录(一般为C:\WINDOWS )
%USERPROFILE% = 当前用户数据变量(一般为C:\Documents and Settings\用户名)
%HOMEPATH% = 当前用户环境变量(一般为C:\Documents and Settings\用户名)
%temp% = 当前用户TEMP缓存变量(一般为C:\Documents and Settings\用户名\Local Settings\Temp)
%programfiles% = 程序安装目录(一般为C:\Program Files)
%commonprogramfiles% = 通用文件目录(一般为C:\Program Files\Common Files )
%system% = 系统安装盘下的system32目录(一般为C:\WINDOWS\SYSTEM32 )
注：
%System%在98下指windows\system，2000下指winnt\system32\，XP下指windows\system32文件夹，在Windows7下指系统盘（一般为C:\）；%Appdata%在Windows7系统下指：用户\AppData\Roaming
%%之间的字符串大小写都可以，不会对使用产生影响。
</code></pre></div></div> <h3 id="linux环境变量">linux环境变量</h3> <p>对于bash来说，可以通过变量名来访问相应的环境变量</p> <p><strong>一、环境变量的设置与显示</strong><br /> 1.显示环境变量HOME</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ echo $HOME
/home/admin
</code></pre></div></div> <p>2.设置一个新的环境变量NAME</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ export NAME="RaidCheng"
$ echo $NAME
RaidCheng
</code></pre></div></div> <p>3.使用env命令显示所有的环境变量</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ env
HOSTNAME=test
TERM=vt100
SHELL=/bin/bash
HISTSIZE=1000
SSH_CLIENT=202.xxx.xxx.xxx 53694 22
CATALINA_BASE=/usr/local/jakarta-tomcat
SSH_TTY=/dev/pts/0
ANT_HOME=/usr/local/ant
JAVA_OPTS=-server
USER=admin
...
</code></pre></div></div> <p>4.使用set命令显示所有本地定义的Shell变量</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ set
BASH=/bin/bash
BASH_VERSINFO=([0]="2" [1]="05b" [2]="0" [3]="1" [4]="release" [5]="i386-redhat-linux-gnu")
BASH_VERSION='2.05b.0(1)-release'
CATALINA_BASE=/usr/local/jakarta-tomcat
CATALINA_HOME=/usr/local/jakarta-tomcat
...
</code></pre></div></div> <p>5.使用unset命令来清除环境变量</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ export NAME="RaidCheng"
$ echo $NAME
RaidCheng
$ unset NAME
$ echo $NAME
</code></pre></div></div> <p>6.使用readonly命令设置只读变量</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ export NAME="RaidCheng"
$ readonly NAME
$ unset NAME
-bash: unset: NAME: cannot unset: readonly variable
$ NAME="New" #会发现此也变量不能被修改
-bash: TEST: readonly variable
</code></pre></div></div> <p><strong>三、常见的环境变量</strong></p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PATH　　　　　　决定了shell将到哪些目录中寻找命令或程序
HOME　　　　　　当前用户主目录
HISTSIZE　　　　历史记录数
LOGNAME 　　　　当前用户的登录名
HOSTNAME　　　　指主机的名称
SHELL 　　　　　前用户Shell类型
LANGUGE 　　　　语言相关的环境变量，多语言可以修改此环境变量
MAIL　　　　　　当前用户的邮件存放目录
PS1　　　　　　 基本提示符，对于root用户是#，对于普通用户是$
PS2　　　　　　 附属提示符，默认是"&gt;"
</code></pre></div></div> <p><strong>四、通过C程序来访问和设置环境变量</strong><br /> 对于C程序的用户来说，可以使用下列三个函数来设置或访问一个环境变量。<br /> getenv()访问一个环境变量。输入参数是需要访问的变量名字，返回值是一个字符串。如果所访问的环境变量不存在，则会返回NULL.<br /> setenv()在程序里面设置某个环境变量的函数.<br /> unsetenv()清除某个特定的环境变量的函数.</p> <p>另外，还有一个指针变量environ，它指向的是包含所有的环境变量的一个列表。下面的程序可以打印出当前运行环境里面的所有环境变量：</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#include
extern char**environ;
int main ()
{
    char**var;
    for (var =environ;*var !=NULL;++var)
    printf ("%s /n ",*var);
    return 0;
}
</code></pre></div></div> <p><strong>五、环境变量文件</strong><br /> 通过修改一些相关的环境定义文件来修改环境变量，比如对于RedHat，与环境相关的文件有/etc/profile和~/.bash_profile等。修改完毕后重新登录一次或运行命令source xxx就生效了。</p> <p>1.修改/etc/profile文件<br /> 如果你的计算机仅仅作为开发使用时推荐使用这种方法，因为所有用户的shell都有权使用这些环境变量，可能会给系统带来安全性问题。<br /> (1)用文本编辑器打开/etc/profile<br /> (2)在profile文件末尾加入：</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>JAVA_HOME=/usr/share/jdk1.5.0_05
PATH=$JAVA_HOME/bin:$PATH
CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar
export JAVA_HOME
export PATH
export CLASSPATH
</code></pre></div></div> <p>(3)重新登录<br /> 注解：</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>a. 你要将 /usr/share/jdk1.5.0_05jdk 改为你的jdk安装目录
b. linux下用冒号":"来分隔路径
c. $PATH / $CLASSPATH / $JAVA_HOME 是用来引用原来的环境变量的值,在设置环境变量时特别要注意不能把原来的值给覆盖掉了，这是一种常见的错误。
d. CLASSPATH中当前目录"."不能丢,把当前目录丢掉也是常见的错误。
e. export是把这三个变量导出为全局变量。
f. 大小写必须严格区分。
</code></pre></div></div> <p>2.修改.bashrc文件　 　 这种方法更为安全，它可以把使用这些环境变量的权限控制到用户级别，如果你需要给某个用户权限使用这些环境变量，你只需要修改其个人用户主目录下的.bashrc文件就可以了。<br /> (1)用文本编辑器打开用户目录下的.bashrc文件<br /> (2)在.bashrc文件末尾加入：　　</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>set JAVA_HOME=/usr/share/jdk1.5.0_05
export JAVA_HOME
set PATH=$JAVA_HOME/bin:$PATH
export PATH
set CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar
export CLASSPATH
</code></pre></div></div> <p>(3)重新登录</p> <ol> <li>直接在shell下设置变量<br /> 不赞成使用这种方法，因为换个shell，你的设置就无效了，因此这种方法仅仅是临时使用，以后要使用的时候又要重新设置，比较麻烦。<br /> 只需在shell终端执行下列命令： <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>export JAVA_HOME=/usr/share/jdk1.5.0_05
export PATH=$JAVA_HOME/bin:$PATH
export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar
</code></pre></div> </div> </li> </ol> <p><span class="site-footer-credits">版权所有，转载请注明出处 <a href="https://luowei.github.io/list">luowei.github.io</a>.</span></p> <link rel="stylesheet" href="/list/assets/css/font-awesome.min.css?ver=20151122" /> <!--[if IE 7 ]><link rel="stylesheet" href="/list/assets/css/font-awesome-ie7.min.css?ver=20151122"><![endif]--> <div style="float: right"> <span id="share"> <a class="wechat" target="_blank" title="分享到微信" href="https://chart.apis.google.com/chart?cht=qr&amp;chs=300x300&amp;chl=https%3A%2F%2Fluowei.github.io%2Flist%2Fdocs%2Flinux%2F2011-04-23-Windows%25E4%25B8%258Elinux%25E4%25B8%258B%25E7%258E%25AF%25E5%25A2%2583%25E5%258F%2598%25E9%2587%258F%25E7%259A%2584%25E9%2585%258D%25E7%25BD%25AE.html"><i class="icon-large icon-wechat"></i></a> <a class="weibo" target="_blank" title="分享到微博" href="http://service.weibo.com/share/share.php?title=Windows与linux下环境变量的配置 - 知不知&amp;url=https%3A%2F%2Fluowei.github.io%2Flist%2Fdocs%2Flinux%2F2011-04-23-Windows%25E4%25B8%258Elinux%25E4%25B8%258B%25E7%258E%25AF%25E5%25A2%2583%25E5%258F%2598%25E9%2587%258F%25E7%259A%2584%25E9%2585%258D%25E7%25BD%25AE.html&amp;type=3&amp;searchPic=1"><i class="icon-large icon-weibo"></i></a> <a class="qzone" target="_blank" title="分享到 QQ 空间" href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https%3A%2F%2Fluowei.github.io%2Flist%2Fdocs%2Flinux%2F2011-04-23-Windows%25E4%25B8%258Elinux%25E4%25B8%258B%25E7%258E%25AF%25E5%25A2%2583%25E5%258F%2598%25E9%2587%258F%25E7%259A%2584%25E9%2585%258D%25E7%25BD%25AE.html&amp;title=Windows与linux下环境变量的配置 - 知不知&amp;summary=Windows与linux下环境变量的配置&amp;site=/list"><i class="icon-large icon-qzone"></i></a> <a class="twitter" target="_blank" title="Share to Twitter" href="https://twitter.com/intent/tweet?url=https%3A%2F%2Fluowei.github.io%2Flist%2Fdocs%2Flinux%2F2011-04-23-Windows%25E4%25B8%258Elinux%25E4%25B8%258B%25E7%258E%25AF%25E5%25A2%2583%25E5%258F%2598%25E9%2587%258F%25E7%259A%2584%25E9%2585%258D%25E7%25BD%25AE.html&amp;text=Windows与linux下环境变量的配置 - 知不知&amp;via=luowei010101"><i class="icon-large icon-twitter"></i></a> <a class="facebook" target="_blank" title="Share to Facebook" href="https://www.facebook.com/sharer.php?u=https%3A%2F%2Fluowei.github.io%2Flist%2Fdocs%2Flinux%2F2011-04-23-Windows%25E4%25B8%258Elinux%25E4%25B8%258B%25E7%258E%25AF%25E5%25A2%2583%25E5%258F%2598%25E9%2587%258F%25E7%259A%2584%25E9%2585%258D%25E7%25BD%25AE.html&amp;t=Windows与linux下环境变量的配置 - 知不知"><i class="icon-large icon-facebook-sign"></i></a> <a class="googleplus" target="_blank" title="Share to Google+" href="https://plus.google.com/share?url=https%3A%2F%2Fluowei.github.io%2Flist%2Fdocs%2Flinux%2F2011-04-23-Windows%25E4%25B8%258Elinux%25E4%25B8%258B%25E7%258E%25AF%25E5%25A2%2583%25E5%258F%2598%25E9%2587%258F%25E7%259A%2584%25E9%2585%258D%25E7%25BD%25AE.html"><i class="icon-large icon-google-plus-sign"></i></a> </span> </div> <hr /> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css" /> <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script> <div id="gitalk-container"></div> <script type="text/javascript"> var gitalk = new Gitalk({ clientID: '9d5ee666269c252cf949', clientSecret: '728cd598f1fca9d8c1df1dfa300057883a3a8676', repo: 'list', owner: 'luowei', admin: ['luowei'], id: decodeURI('Windows与linux下环境变量的配置'), distractionFreeMode: false }); gitalk.render('gitalk-container'); </script> <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? "https://" : "http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1277627361'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s96.cnzz.com/z_stat.php%3Fid%3D1277627361%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));</script> <footer class="site-footer"> <span class="site-footer-owner"><a href="https://luowei.github.io/list">知不知</a> is maintained by <a href="http://luowei.github.io/list">luowei</a>.</span> <span class="site-footer-credits">Developed by <a href="https://luowei.github.io">luowei</a>.</span> </footer> </section> </body> </html>
