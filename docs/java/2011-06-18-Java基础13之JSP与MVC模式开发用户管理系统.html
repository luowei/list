<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <title>知不知</title> <meta name="viewport" content="width=device-width, initial-scale=1"> <meta name="theme-color" content="#157878"> <link rel="stylesheet" href="/list/assets/css/normalize.css"> <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'> <link rel="stylesheet" href="/list/assets/css/cayman.css"> </head> <body> <section class="page-header"> <h1 class="project-name">知不知</h1> <h2 class="project-tagline"><a style="color:#ffffff;" href="http://luowei.github.io/list">知不知</a> 是一个代码爱好者的技术知识分享部落格。</h2> <a href="http://wodedata.com" target="_blank" class="btn">wodedata</a> <a href="/list" class="btn">home</a> <a href="http://app.wodedata.com" target="_blank" class="btn">APP作品</a> </section> <section class="main-content"> <!-- 标题 --> <h2>Java-Java基础13之JSP与MVC模式开发用户管理系统</h2> <!-- Google Ads --> <script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <p><ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-8760692904992206" data-ad-slot="2948937366"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script></p> <p><strong>主要内容有：</strong>使用JSP+JavaBean模式与MVC模式开发用户管理系统。</p> <p><strong>Jsp内置对象</strong><br /> <img src="https://raw.githubusercontent.com/luowei/list/gh-pages/images/java/base/article_44.jpg" alt="文件结构" /></p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1.out //向客户端输出数据，字节流
out.println("");

2.request //接收客户端的http请求 &lt;-----&gt;servlet中的HttpServletRequest
getParameter(String name); //name表表单的参数名
getParameterValues(String name); //得到参数值集，使用String []
setAttribute(String name,Object obj); //设置名字为name的obj,值为obj
getAttribute(String name); //返回由name指定的属性值，如果不存在就返回null;
getCookie();

3.response //封装jsp的产生的回应
addCookie(Cookie cookie);
sendRedirect("./welcome.jsp");

4.session //用于保存用户的信息，跟踪用户的行为
setAttribute(String name,Object obj);
getAttribute(String name);

5.applicattion //多个用户共享该对象，可以做计数器
6.pageContext //代表jsp页面的上下文
7.exception //代表运行的一个异常
getMessage();

8.page //代表jsp这个实例本身(使用比较少)
9.config //代表jsp对应的servlet的配置，可以得到web.xml中的参数

//===========================================================================
//------------session技术--------------
1.得到session
servlet中：HttpSession hs=request.getSession(true);
jsp中：session是一个内置对象，可以直接使用

2.向session添加属性
servlet中：hs.setAttribute(String name,Object val);
jsp中：session.setAttribute(String name,Object o);

3.从session得到某个属性//(getAttribute得到的属性是Object类型，要注意转换类型)
servlet中：hs.getAttribute(String name);
jsp中：session.getAttribute(String name);

4.从session删除掉某个属性
servlet中：hs.removeAttribute(String name);
jsp中：session.removeAttribute(String name);

5.指定session发吊时的存活时间//(这设置成20秒，默认是30分钟)
servlet中：hs.setMaxInactive(20);
jsp中：session.setMaxInactive(20);

6.session的特点：
//1.session是被某个浏览器独占的空间，
//2.当某个浏览器访问网站时，服务器会给浏览器分配一个唯一的session id,以此区分不同客户端
//3.由于session的各个属性要占用服务器内存，因此要迫不得以，才使用，如下情况用：
//1.保存用户信息
//2.保存购物车 等
</code></pre></div></div> <p><strong>Jsp测试案例(MyHello.jsp)</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;%</span><span class="err">@</span> <span class="n">page</span> <span class="n">language</span><span class="o">=</span><span class="s">"java"</span> <span class="kn">import</span><span class="err">="</span><span class="nn">java.util.*</span><span class="s">" pageEncoding="</span><span class="n">gb2312</span><span class="s">"%&gt;
&lt;%
    String path = request.getContextPath();
    String basePath = request.getScheme()+"</span><span class="o">:</span><span class="c1">//"+request.getServerName()+":"+request.getServerPort()+path+"/";</span>
<span class="o">%&gt;</span>
<span class="o">&lt;!</span><span class="no">DOCTYPE</span> <span class="no">HTML</span> <span class="no">PUBLIC</span> <span class="s">"-//W3C//DTD HTML 4.01 Transitional//EN"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">head</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">base</span> <span class="n">href</span><span class="o">=</span><span class="s">"&lt;%=basePath%&gt;"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span><span class="nc">My</span> <span class="no">JSP</span> <span class="err">'</span><span class="nc">MyHello</span><span class="o">.</span><span class="na">jsp</span><span class="err">'</span> <span class="n">starting</span> <span class="n">page</span><span class="o">&lt;/</span><span class="n">title</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"pragma"</span> <span class="n">content</span><span class="o">=</span><span class="s">"no-cache"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"cache-control"</span> <span class="n">content</span><span class="o">=</span><span class="s">"no-cache"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"expires"</span> <span class="n">content</span><span class="o">=</span><span class="s">"0"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"keywords"</span> <span class="n">content</span><span class="o">=</span><span class="s">"keyword1,keyword2,keyword3"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"description"</span> <span class="n">content</span><span class="o">=</span><span class="s">"This is my page"</span><span class="o">&gt;</span>
    <span class="o">&lt;!--</span>
    <span class="o">&lt;</span><span class="n">link</span> <span class="n">rel</span><span class="o">=</span><span class="s">"stylesheet"</span> <span class="n">type</span><span class="o">=</span><span class="s">"text/css"</span> <span class="n">href</span><span class="o">=</span><span class="s">"styles.css"</span><span class="o">&gt;</span>
            <span class="o">--&gt;</span>
<span class="o">&lt;/</span><span class="n">head</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">body</span><span class="o">&gt;</span>
<span class="nc">Hello</span><span class="o">,</span><span class="err">维唯为为</span> <span class="o">&lt;</span><span class="n">br</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</code></pre></div></div> <h3 id="jspjavabeanjava文件模式开发用户管理系统">Jsp+javaBean(java文件)模式开发用户管理系统</h3> <p><strong>1. jsp+java_class模式下的用户管理系统模型图</strong><br /> <img src="https://raw.githubusercontent.com/luowei/list/gh-pages/images/java/base/article_45.jpg" alt="jsp+java" /></p> <p><strong>2.登录界面_UserManagerSys/src/webRoot/login.jsp</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;%</span><span class="err">@</span> <span class="n">page</span> <span class="n">language</span><span class="o">=</span><span class="s">"java"</span> <span class="kn">import</span><span class="err">="</span><span class="nn">java.util.*</span><span class="s">" pageEncoding="</span><span class="n">gb2312</span><span class="s">"%&gt;
&lt;%
    String path = request.getContextPath();
    String basePath = request.getScheme()+"</span><span class="o">:</span><span class="c1">//"+request.getServerName()+":"+request.getServerPort()+path+"/";</span>
<span class="o">%&gt;</span>
<span class="o">&lt;!</span><span class="no">DOCTYPE</span> <span class="no">HTML</span> <span class="no">PUBLIC</span> <span class="s">"-//W3C//DTD HTML 4.01 Transitional//EN"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">head</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">base</span> <span class="n">href</span><span class="o">=</span><span class="s">"&lt;%=basePath%&gt;"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span><span class="nc">My</span> <span class="no">JSP</span> <span class="err">'</span><span class="n">login</span><span class="o">.</span><span class="na">jsp</span><span class="err">'</span> <span class="n">starting</span> <span class="n">page</span><span class="o">&lt;/</span><span class="n">title</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"pragma"</span> <span class="n">content</span><span class="o">=</span><span class="s">"no-cache"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"cache-control"</span> <span class="n">content</span><span class="o">=</span><span class="s">"no-cache"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"expires"</span> <span class="n">content</span><span class="o">=</span><span class="s">"0"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"keywords"</span> <span class="n">content</span><span class="o">=</span><span class="s">"keyword1,keyword2,keyword3"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"description"</span> <span class="n">content</span><span class="o">=</span><span class="s">"This is my page"</span><span class="o">&gt;</span>
    <span class="o">&lt;!--</span>
    <span class="o">&lt;</span><span class="n">link</span> <span class="n">rel</span><span class="o">=</span><span class="s">"stylesheet"</span> <span class="n">type</span><span class="o">=</span><span class="s">"text/css"</span> <span class="n">href</span><span class="o">=</span><span class="s">"styles.css"</span><span class="o">&gt;</span>
            <span class="o">--&gt;</span>
<span class="o">&lt;/</span><span class="n">head</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">body</span> <span class="n">bgcolor</span><span class="o">=</span><span class="s">"pink"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">center</span><span class="o">&gt;</span>
    <span class="err">用户登录</span> <span class="o">&lt;</span><span class="n">br</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">hr</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">form</span> <span class="n">action</span><span class="o">=</span><span class="s">"loginCl.jsp"</span> <span class="n">method</span><span class="o">=</span><span class="s">"post"</span><span class="o">&gt;</span>
        <span class="err">用户名：</span><span class="o">&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s">"text"</span> <span class="n">name</span><span class="o">=</span><span class="s">"username"</span><span class="o">/&gt;&lt;</span><span class="n">br</span><span class="o">&gt;</span>
        <span class="err">密</span><span class="o">&amp;</span><span class="n">nbsp</span><span class="o">;&amp;</span><span class="n">nbsp</span><span class="o">;</span><span class="err">码：</span><span class="o">&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s">"password"</span> <span class="n">name</span><span class="o">=</span><span class="s">"passwd"</span><span class="o">/&gt;&lt;</span><span class="n">br</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s">"submit"</span> <span class="n">value</span><span class="o">=</span><span class="s">"登录"</span><span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s">"reset"</span> <span class="n">value</span><span class="o">=</span><span class="s">"重置"</span><span class="o">/&gt;</span>
    <span class="o">&lt;/</span><span class="n">form</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">center</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</code></pre></div></div> <p><strong>3.登录处理界面_UserManagerSys/src/webRoot/loginCl.jsp</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;%</span><span class="err">@</span> <span class="n">page</span> <span class="n">language</span><span class="o">=</span><span class="s">"java"</span> <span class="kn">import</span><span class="err">="</span><span class="nn">java.util.*</span><span class="o">,</span><span class="n">java</span><span class="o">.</span><span class="na">sql</span><span class="o">.*,</span><span class="n">user</span><span class="o">.</span><span class="na">model</span><span class="o">.*</span><span class="s">" pageEncoding="</span><span class="n">gb2312</span><span class="s">"%&gt;
&lt;%
        String path = request.getContextPath();
        String basePath = request.getScheme()+"</span><span class="o">:</span><span class="c1">//"+request.getServerName()+":"+request.getServerPort()+path+"/";</span>
        <span class="o">%&gt;</span>
<span class="o">&lt;!</span><span class="no">DOCTYPE</span> <span class="no">HTML</span> <span class="no">PUBLIC</span> <span class="s">"-//W3C//DTD HTML 4.01 Transitional//EN"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">head</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">base</span> <span class="n">href</span><span class="o">=</span><span class="s">"&lt;%=basePath%&gt;"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span><span class="nc">My</span> <span class="no">JSP</span> <span class="err">'</span><span class="n">loginCl</span><span class="o">.</span><span class="na">jsp</span><span class="err">'</span> <span class="n">starting</span> <span class="n">page</span><span class="o">&lt;/</span><span class="n">title</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"pragma"</span> <span class="n">content</span><span class="o">=</span><span class="s">"no-cache"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"cache-control"</span> <span class="n">content</span><span class="o">=</span><span class="s">"no-cache"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"expires"</span> <span class="n">content</span><span class="o">=</span><span class="s">"0"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"keywords"</span> <span class="n">content</span><span class="o">=</span><span class="s">"keyword1,keyword2,keyword3"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"description"</span> <span class="n">content</span><span class="o">=</span><span class="s">"This is my page"</span><span class="o">&gt;</span>
<span class="o">&lt;!--</span>
<span class="o">&lt;</span><span class="n">link</span> <span class="n">rel</span><span class="o">=</span><span class="s">"stylesheet"</span> <span class="n">type</span><span class="o">=</span><span class="s">"text/css"</span> <span class="n">href</span><span class="o">=</span><span class="s">"styles.css"</span><span class="o">&gt;</span>
        <span class="o">--&gt;</span>
<span class="o">&lt;/</span><span class="n">head</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">body</span><span class="o">&gt;</span>
<span class="o">&lt;%</span>
        <span class="c1">//接收用户名和密码，完成对用户的验证</span>
        <span class="nc">String</span> <span class="n">u</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"username"</span><span class="o">);</span>
        <span class="nc">String</span> <span class="n">p</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"passwd"</span><span class="o">);</span>
<span class="c1">//到数据库中去验证用户</span>
        <span class="c1">//调用UserBeanCl的方法，完成对用户的验证</span>
        <span class="nc">UserBeanCl</span> <span class="n">ubc</span><span class="o">=</span><span class="k">new</span> <span class="nc">UserBeanCl</span><span class="o">();</span>
        <span class="k">if</span><span class="o">(</span><span class="n">ubc</span><span class="o">.</span><span class="na">checkUser</span><span class="o">(</span><span class="n">u</span><span class="o">,</span><span class="n">p</span><span class="o">))</span>
        <span class="o">{</span>
        <span class="n">response</span><span class="o">.</span><span class="na">sendRedirect</span><span class="o">(</span><span class="s">"wel.jsp?username="</span><span class="o">+</span><span class="n">u</span><span class="o">);</span>
        <span class="o">}</span><span class="k">else</span>
        <span class="o">{</span>
        <span class="n">response</span><span class="o">.</span><span class="na">sendRedirect</span><span class="o">(</span><span class="s">"login.jsp?errNo=1"</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="o">%&gt;</span>
<span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</code></pre></div></div> <p><strong>4.欢迎界面_UserManagerSys/src/webRoot/wel.jsp</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;%</span><span class="err">@</span> <span class="n">page</span> <span class="n">language</span><span class="o">=</span><span class="s">"java"</span> <span class="kn">import</span><span class="err">="</span><span class="nn">java.util.*</span><span class="o">,</span><span class="n">java</span><span class="o">.</span><span class="na">sql</span><span class="o">.*,</span><span class="n">user</span><span class="o">.</span><span class="na">model</span><span class="o">.*</span><span class="s">" pageEncoding="</span><span class="n">gb2312</span><span class="s">"%&gt;
&lt;%
    String path = request.getContextPath();
    String basePath = request.getScheme()+"</span><span class="o">:</span><span class="c1">//"+request.getServerName()+":"+request.getServerPort()+path+"/";</span>
<span class="o">%&gt;</span>
<span class="o">&lt;!</span><span class="no">DOCTYPE</span> <span class="no">HTML</span> <span class="no">PUBLIC</span> <span class="s">"-//W3C//DTD HTML 4.01 Transitional//EN"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">head</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">base</span> <span class="n">href</span><span class="o">=</span><span class="s">"&lt;%=basePath%&gt;"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span><span class="nc">My</span> <span class="no">JSP</span> <span class="err">'</span><span class="n">wel</span><span class="o">.</span><span class="na">jsp</span><span class="err">'</span> <span class="n">starting</span> <span class="n">page</span><span class="o">&lt;/</span><span class="n">title</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"pragma"</span> <span class="n">content</span><span class="o">=</span><span class="s">"no-cache"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"cache-control"</span> <span class="n">content</span><span class="o">=</span><span class="s">"no-cache"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"expires"</span> <span class="n">content</span><span class="o">=</span><span class="s">"0"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"keywords"</span> <span class="n">content</span><span class="o">=</span><span class="s">"keyword1,keyword2,keyword3"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"description"</span> <span class="n">content</span><span class="o">=</span><span class="s">"This is my page"</span><span class="o">&gt;</span>
    <span class="o">&lt;!--</span>
    <span class="o">&lt;</span><span class="n">link</span> <span class="n">rel</span><span class="o">=</span><span class="s">"stylesheet"</span> <span class="n">type</span><span class="o">=</span><span class="s">"text/css"</span> <span class="n">href</span><span class="o">=</span><span class="s">"styles.css"</span><span class="o">&gt;</span>
            <span class="o">--&gt;</span>
<span class="o">&lt;/</span><span class="n">head</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">body</span> <span class="n">bgcolor</span><span class="o">=</span><span class="s">"pink"</span><span class="o">&gt;</span>
<span class="o">&lt;%</span>
    <span class="nc">String</span> <span class="n">u</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"username"</span><span class="o">);</span>
<span class="o">%&gt;</span>
<span class="err">登录成功！维唯为为恭喜你！</span><span class="o">&lt;%=</span><span class="n">u</span> <span class="o">%&gt;&lt;</span><span class="n">br</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s">"login.jsp"</span><span class="o">&gt;</span><span class="err">返回重新登录</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">hr</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">center</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="err">用户信息列表</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
    <span class="o">&lt;%</span>
        <span class="c1">//定义分页用到的变量</span>
        <span class="kt">int</span> <span class="n">pageNow</span><span class="o">=</span><span class="mi">1</span><span class="o">;</span>
        <span class="c1">//接收用户希望显示的页数(pageNow)</span>
        <span class="nc">String</span> <span class="n">s_pageNow</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"pageNow"</span><span class="o">);</span>
        <span class="k">if</span><span class="o">(</span><span class="n">s_pageNow</span><span class="o">!=</span><span class="kc">null</span><span class="o">)</span>
        <span class="o">{</span>
            <span class="c1">//接收到pageNow</span>
            <span class="n">pageNow</span><span class="o">=</span><span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">s_pageNow</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="c1">//调用UserBeanCl的方法(创建一个UserBeanCl的实例，然后调用它的某个方法)，完成分布显示</span>
        <span class="nc">UserBeanCl</span> <span class="n">ubc</span><span class="o">=</span><span class="k">new</span> <span class="nc">UserBeanCl</span><span class="o">();</span>
        <span class="nc">ArrayList</span> <span class="n">al</span><span class="o">=</span><span class="n">ubc</span><span class="o">.</span><span class="na">getUserByPage</span><span class="o">(</span><span class="n">pageNow</span><span class="o">);</span>
        <span class="c1">//显示</span>
    <span class="o">%&gt;</span>
    <span class="o">&lt;</span><span class="n">table</span> <span class="n">border</span><span class="o">=</span><span class="s">"1"</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="err">用户</span><span class="n">id</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="err">用户名</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="err">密码</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="err">邮箱</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="err">级别</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
        <span class="o">&lt;%</span>
            <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">al</span><span class="o">.</span><span class="na">size</span><span class="o">();</span><span class="n">i</span><span class="o">++)</span>
            <span class="o">{</span>    <span class="c1">//从al中取出UserBean</span>
                <span class="nc">UserBean</span> <span class="n">ub</span><span class="o">=(</span><span class="nc">UserBean</span><span class="o">)</span><span class="n">al</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
        <span class="o">%&gt;</span>
        <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;&lt;</span><span class="n">td</span><span class="o">&gt;&lt;%=</span><span class="n">ub</span><span class="o">.</span><span class="na">getUserId</span><span class="o">()</span> <span class="o">%&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;&lt;</span><span class="n">td</span><span class="o">&gt;&lt;%=</span><span class="n">ub</span><span class="o">.</span><span class="na">getUsername</span><span class="o">()</span> <span class="o">%&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;&lt;%=</span><span class="n">ub</span><span class="o">.</span><span class="na">getPasswd</span><span class="o">()</span> <span class="o">%&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;&lt;</span><span class="n">td</span><span class="o">&gt;&lt;%=</span><span class="n">ub</span><span class="o">.</span><span class="na">getEmail</span><span class="o">()</span> <span class="o">%&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;&lt;%=</span><span class="n">ub</span><span class="o">.</span><span class="na">getGrade</span><span class="o">()</span> <span class="o">%&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
        <span class="o">&lt;%</span>
            <span class="o">}</span>
        <span class="o">%&gt;</span>
    <span class="o">&lt;/</span><span class="n">table</span><span class="o">&gt;</span>
    <span class="o">&lt;%</span>
        <span class="kt">int</span> <span class="n">pageCount</span><span class="o">=</span><span class="n">ubc</span><span class="o">.</span><span class="na">getPageCount</span><span class="o">();</span>
        <span class="kt">int</span> <span class="n">pageSize</span><span class="o">=</span><span class="n">ubc</span><span class="o">.</span><span class="na">getPageSize</span><span class="o">();</span>
        <span class="c1">//首页</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;a href=wel.jsp?pageNow=1&amp;username="</span><span class="o">+</span><span class="n">u</span><span class="o">+</span><span class="s">"&gt;首页&lt;/a&gt;"</span><span class="o">);</span>
        <span class="c1">//上一页</span>
        <span class="k">if</span><span class="o">(</span><span class="n">pageNow</span><span class="o">!=</span><span class="mi">1</span><span class="o">)</span>
        <span class="o">{</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;a href=wel.jsp?pageNow="</span><span class="o">+(</span><span class="n">pageNow</span><span class="o">-</span><span class="mi">1</span><span class="o">)+</span><span class="s">"&amp;username="</span><span class="o">+</span><span class="n">u</span><span class="o">+</span><span class="s">"&gt;上一页&lt;/a&gt;"</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="c1">//显示页面链接</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="n">pageNow</span><span class="o">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">pageNow</span><span class="o">+</span><span class="n">pageSize</span><span class="o">&amp;&amp;</span><span class="n">i</span><span class="o">&lt;=</span><span class="n">pageCount</span><span class="o">;</span><span class="n">i</span><span class="o">++)</span>
        <span class="o">{</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;a href=wel.jsp?pageNow="</span><span class="o">+</span><span class="n">i</span><span class="o">+</span><span class="s">"&amp;username="</span><span class="o">+</span><span class="n">u</span><span class="o">+</span><span class="s">"&gt;["</span><span class="o">+</span><span class="n">i</span><span class="o">+</span><span class="s">"]&lt;/a&gt;"</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="c1">//下一页</span>
        <span class="k">if</span><span class="o">(</span><span class="n">pageNow</span><span class="o">!=</span><span class="n">pageCount</span><span class="o">)</span>
        <span class="o">{</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;a href=wel.jsp?pageNow="</span><span class="o">+(</span><span class="n">pageNow</span><span class="o">+</span><span class="mi">1</span><span class="o">)+</span><span class="s">"&amp;username="</span><span class="o">+</span><span class="n">u</span><span class="o">+</span><span class="s">"&gt;下一页&lt;/a&gt;"</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="c1">//尾页</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;a href=wel.jsp?pageNow="</span><span class="o">+</span><span class="n">pageCount</span><span class="o">+</span><span class="s">"&amp;username="</span><span class="o">+</span><span class="n">u</span><span class="o">+</span><span class="s">"&gt;尾页&lt;/a&gt;"</span><span class="o">);</span>
    <span class="o">%&gt;</span>
<span class="o">&lt;/</span><span class="n">center</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</code></pre></div></div> <p><strong>5.model层_UserManagerSys/src/user.model/UserBeanCl.java</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * 这是一个处理类，有些人把它叫做BO,主要是封装对user表的各种操作，(主要
 * 是增，删，修，查...)
 */</span>
<span class="kn">package</span> <span class="n">user</span><span class="o">.</span><span class="na">model</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserBeanCl</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">Statement</span> <span class="n">sm</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">ResultSet</span> <span class="n">rs</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">Connection</span> <span class="n">ct</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">pageSize</span><span class="o">=</span><span class="mi">5</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getPageSize</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">pageSize</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">rowCount</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="c1">//行数</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">pageCount</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="c1">//页数</span>
    <span class="c1">//验证用户是否存在</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">checkUser</span><span class="o">(</span><span class="nc">String</span> <span class="n">u</span><span class="o">,</span><span class="nc">String</span> <span class="n">p</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="kt">boolean</span> <span class="n">b</span><span class="o">=</span><span class="kc">false</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">//到数据库去验证</span>
            <span class="n">ct</span><span class="o">=</span><span class="k">new</span> <span class="nc">ConnDB</span><span class="o">().</span><span class="na">getConn</span><span class="o">();</span>
            <span class="c1">//3.创建Statement</span>
            <span class="nc">Statement</span> <span class="n">sm</span><span class="o">=</span><span class="n">ct</span><span class="o">.</span><span class="na">createStatement</span><span class="o">();</span>
            <span class="c1">//4.查询</span>
            <span class="nc">ResultSet</span> <span class="n">rs</span><span class="o">=</span><span class="n">sm</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">(</span><span class="s">"select passwd from users where username='"</span><span class="o">+</span><span class="n">u</span><span class="o">+</span><span class="s">"'"</span><span class="o">);</span>
            <span class="c1">//验证</span>
            <span class="k">if</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span>
            <span class="o">{</span>
                <span class="c1">//到此说明输入的用户名存在</span>
                <span class="k">if</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">1</span><span class="o">).</span><span class="na">equals</span><span class="o">(</span><span class="n">p</span><span class="o">))</span>
                <span class="o">{</span>
                    <span class="n">b</span><span class="o">=</span><span class="kc">true</span><span class="o">;</span>
                    <span class="c1">//合法，跳转wel.jsp</span>
                    <span class="c1">//如何将loginCl.jsp得到的数据传到下一个页面</span>
                    <span class="c1">//1.cookie 2.session 3.response.sendRedirect</span>
                    <span class="c1">//response.sendRedirect("wel.jsp?user="+u);//将用户发送过去</span>
                <span class="o">}</span><span class="k">else</span>
                <span class="o">{</span>
                    <span class="c1">//密码错误</span>
                <span class="o">}</span>
            <span class="o">}</span><span class="k">else</span>
            <span class="o">{</span>
                <span class="c1">//用户名错误</span>
                <span class="c1">//不合法，跳转到login.jsp</span>
                <span class="c1">//response.sendRedirect("login.jsp?errNo=1");</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span><span class="k">finally</span><span class="o">{</span>
            <span class="c1">//关闭打开的各种资源</span>
            <span class="k">this</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">b</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="cm">/**
     * @author luowei
     * @return 返回分页的总页数
     */</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getPageCount</span><span class="o">()</span>
    <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">//得到连接</span>
            <span class="n">ct</span><span class="o">=</span><span class="k">new</span> <span class="nc">ConnDB</span><span class="o">().</span><span class="na">getConn</span><span class="o">();</span>
            <span class="c1">//3.创建Statement</span>
            <span class="nc">Statement</span> <span class="n">sm</span><span class="o">=</span><span class="n">ct</span><span class="o">.</span><span class="na">createStatement</span><span class="o">();</span>
            <span class="c1">//4.查询</span>
            <span class="nc">ResultSet</span> <span class="n">rs</span><span class="o">=</span><span class="n">sm</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">(</span><span class="s">"select count(*) from users"</span><span class="o">);</span>
            <span class="k">if</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span><span class="c1">//将游标从第0条记录移到第1条记录，并判断是否为空</span>
            <span class="o">{</span>
                <span class="n">rowCount</span><span class="o">=</span><span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="c1">//计算</span>
            <span class="k">if</span><span class="o">(</span><span class="n">rowCount</span><span class="o">%</span><span class="n">pageSize</span><span class="o">==</span><span class="mi">0</span><span class="o">)</span>
            <span class="o">{</span>
                <span class="n">pageCount</span><span class="o">=</span><span class="n">rowCount</span><span class="o">/</span><span class="n">pageSize</span><span class="o">;</span>
            <span class="o">}</span><span class="k">else</span>
            <span class="o">{</span>
                <span class="n">pageCount</span><span class="o">=</span><span class="n">rowCount</span><span class="o">/</span><span class="n">pageSize</span><span class="o">+</span><span class="mi">1</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span><span class="k">finally</span>
        <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">pageCount</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="cm">/**@得到用户需要显示的用户信息(分页)
     * @author luowei
     * @param pageNow:当前页
     * @return
     */</span>
    <span class="kd">public</span> <span class="nc">ArrayList</span> <span class="nf">getUserByPage</span><span class="o">(</span><span class="kt">int</span> <span class="n">pageNow</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="nc">ArrayList</span> <span class="n">al</span><span class="o">=</span><span class="k">new</span> <span class="nc">ArrayList</span><span class="o">();</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">//得到连接</span>
            <span class="n">ct</span><span class="o">=</span><span class="k">new</span> <span class="nc">ConnDB</span><span class="o">().</span><span class="na">getConn</span><span class="o">();</span>
            <span class="c1">//3.创建Statement</span>
            <span class="nc">Statement</span> <span class="n">sm</span><span class="o">=</span><span class="n">ct</span><span class="o">.</span><span class="na">createStatement</span><span class="o">();</span>
            <span class="c1">//查询出需要显示的记录</span>
            <span class="n">rs</span><span class="o">=</span><span class="n">sm</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">(</span><span class="s">"select * from users limit "</span><span class="o">+(</span><span class="n">pageSize</span><span class="o">*(</span><span class="n">pageNow</span><span class="o">-</span><span class="mi">1</span><span class="o">))+</span><span class="s">","</span><span class="o">+</span><span class="n">pageSize</span><span class="o">);</span>
            <span class="c1">//开始将rs封装到ArrayList</span>
            <span class="k">while</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span>
            <span class="o">{</span>
                <span class="nc">UserBean</span> <span class="n">ub</span><span class="o">=</span><span class="k">new</span> <span class="nc">UserBean</span><span class="o">();</span>
                <span class="n">ub</span><span class="o">.</span><span class="na">setUserId</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="mi">1</span><span class="o">));</span>
                <span class="n">ub</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">2</span><span class="o">));</span>
                <span class="n">ub</span><span class="o">.</span><span class="na">setPasswd</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">3</span><span class="o">));</span>
                <span class="n">ub</span><span class="o">.</span><span class="na">setEmail</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">4</span><span class="o">));</span>
                <span class="n">ub</span><span class="o">.</span><span class="na">setGrade</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="mi">5</span><span class="o">));</span>
                <span class="n">al</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">ub</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span><span class="k">finally</span><span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">al</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="cm">/**@author luowei
     * @see关闭资源
     * @return null
     *
     */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">close</span><span class="o">()</span>
    <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="k">if</span><span class="o">(</span><span class="n">rs</span><span class="o">!=</span><span class="kc">null</span><span class="o">)</span>
            <span class="o">{</span>
                <span class="n">rs</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
                <span class="n">rs</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="k">if</span><span class="o">(</span><span class="n">sm</span><span class="o">!=</span><span class="kc">null</span><span class="o">)</span>
            <span class="o">{</span>
                <span class="n">sm</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
                <span class="n">sm</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="k">if</span><span class="o">(</span><span class="n">ct</span><span class="o">!=</span><span class="kc">null</span><span class="o">)</span>
            <span class="o">{</span>
                <span class="n">ct</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
                <span class="n">ct</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p><strong>6.model层_UserManagerSys/src/user.model/UserBean.java</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * 这是一个javabean,对应user表，代表数据
 * 他的一个实例(对象),对应users的一条
 */</span>
<span class="kn">package</span> <span class="n">user</span><span class="o">.</span><span class="na">model</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserBean</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getUserId</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">userId</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setUserId</span><span class="o">(</span><span class="kt">int</span> <span class="n">userId</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">userId</span> <span class="o">=</span> <span class="n">userId</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getUsername</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">username</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setUsername</span><span class="o">(</span><span class="nc">String</span> <span class="n">username</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">username</span> <span class="o">=</span> <span class="n">username</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getPasswd</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">passwd</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setPasswd</span><span class="o">(</span><span class="nc">String</span> <span class="n">passwd</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">passwd</span> <span class="o">=</span> <span class="n">passwd</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getEmail</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">email</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setEmail</span><span class="o">(</span><span class="nc">String</span> <span class="n">email</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">email</span> <span class="o">=</span> <span class="n">email</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getGrade</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">grade</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setGrade</span><span class="o">(</span><span class="kt">int</span> <span class="n">grade</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">grade</span> <span class="o">=</span> <span class="n">grade</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">userId</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">username</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">passwd</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">email</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">grade</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div> <p><strong>5.model层_UserManagerSys/src/user.model/ConnDB.java</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * 得到数据库的连接
 */</span>
<span class="kn">package</span> <span class="n">user</span><span class="o">.</span><span class="na">model</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.*</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ConnDB</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">Connection</span> <span class="n">ct</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
    <span class="kd">public</span> <span class="nc">Connection</span> <span class="nf">getConn</span><span class="o">()</span>
    <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">//1.加载驱动</span>
            <span class="nc">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">"org.gjt.mm.mysql.Driver"</span><span class="o">).</span><span class="na">newInstance</span><span class="o">();</span>
            <span class="c1">//Class.forName("com.microsoft.jdbc.sqlserver.SQLServerDriver").newInstance();</span>
            <span class="c1">//2.得到连接</span>
            <span class="n">ct</span><span class="o">=</span><span class="nc">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="s">"jdbc:mysql://localhost:3306/test_user"</span><span class="o">,</span><span class="s">"root"</span><span class="o">,</span><span class="s">"root"</span><span class="o">);</span>
            <span class="c1">//ct=DriverManager.getConnection("jdbc:microsoft:sqlserver://localhost:1433;databaseName=testusr","sa","luowei");</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">ct</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h3 id="mvc模式开发用户管理系统">MVC模式开发用户管理系统</h3> <p><strong>1. MVC模介绍</strong><br /> MVC模型图<br /> <img src="https://raw.githubusercontent.com/luowei/list/gh-pages/images/java/base/article_46.jpg" alt="MVC模型图" /></p> <p>mvc用户管理系统模型图<br /> <img src="https://raw.githubusercontent.com/luowei/list/gh-pages/images/java/base/article_47.jpg" alt="mvc用户管理系统模型图" /></p> <p><strong>2.向数据库添加用户表</strong></p> <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">create</span> <span class="k">database</span> <span class="n">test_user</span><span class="p">;</span>
<span class="n">use</span> <span class="n">test_user</span><span class="p">;</span>
<span class="k">create</span> <span class="k">table</span> <span class="n">users</span><span class="p">(</span>
  <span class="n">useId</span> <span class="nb">int</span> <span class="k">primary</span> <span class="k">key</span> <span class="n">AUTO_INCREMENT</span><span class="p">,</span><span class="o">#</span><span class="err">用户</span><span class="n">id</span><span class="err">号</span>
        <span class="n">username</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>
  <span class="n">passwd</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>
  <span class="n">email</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">30</span><span class="p">),</span>
  <span class="n">grade</span> <span class="nb">int</span> <span class="o">#</span><span class="err">用户的级别</span>
<span class="p">);</span>
<span class="k">insert</span> <span class="k">into</span> <span class="n">users</span> <span class="k">values</span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="nv">"admin"</span><span class="p">,</span><span class="nv">"admin"</span><span class="p">,</span><span class="nv">"admin@sohu.com"</span><span class="p">,</span><span class="nv">"1"</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">into</span> <span class="n">users</span> <span class="k">values</span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="nv">"luowei"</span><span class="p">,</span><span class="nv">"luowei505050"</span><span class="p">,</span><span class="nv">"luowei@163.com"</span><span class="p">,</span><span class="nv">"1"</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">into</span> <span class="n">users</span> <span class="k">values</span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="nv">"test1"</span><span class="p">,</span><span class="nv">"test1"</span><span class="p">,</span><span class="nv">"test1@sina.com"</span><span class="p">,</span><span class="nv">"5"</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">into</span> <span class="n">users</span> <span class="k">values</span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="nv">"test2"</span><span class="p">,</span><span class="nv">"test2"</span><span class="p">,</span><span class="nv">"test2@sina.com"</span><span class="p">,</span><span class="nv">"2"</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">into</span> <span class="n">users</span> <span class="k">values</span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="nv">"test3"</span><span class="p">,</span><span class="nv">"test3"</span><span class="p">,</span><span class="nv">"test3@sina.com"</span><span class="p">,</span><span class="nv">"5"</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">into</span> <span class="n">users</span> <span class="k">values</span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="nv">"test4"</span><span class="p">,</span><span class="nv">"test4"</span><span class="p">,</span><span class="nv">"test4@sina.com"</span><span class="p">,</span><span class="nv">"6"</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">into</span> <span class="n">users</span> <span class="k">values</span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="nv">"test5"</span><span class="p">,</span><span class="nv">"test5"</span><span class="p">,</span><span class="nv">"test5@sina.com"</span><span class="p">,</span><span class="nv">"6"</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">into</span> <span class="n">users</span> <span class="k">values</span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="nv">"test6"</span><span class="p">,</span><span class="nv">"test6"</span><span class="p">,</span><span class="nv">"test6@sina.com"</span><span class="p">,</span><span class="nv">"7"</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">into</span> <span class="n">users</span> <span class="k">values</span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="nv">"test7"</span><span class="p">,</span><span class="nv">"test7"</span><span class="p">,</span><span class="nv">"test7@sina.com"</span><span class="p">,</span><span class="nv">"7"</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">into</span> <span class="n">users</span> <span class="k">values</span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="nv">"test8"</span><span class="p">,</span><span class="nv">"test8"</span><span class="p">,</span><span class="nv">"test8@sina.com"</span><span class="p">,</span><span class="nv">"8"</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">into</span> <span class="n">users</span> <span class="k">values</span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="nv">"test9"</span><span class="p">,</span><span class="nv">"test9"</span><span class="p">,</span><span class="nv">"test9@sina.com"</span><span class="p">,</span><span class="nv">"8"</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">into</span> <span class="n">users</span> <span class="k">values</span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="nv">"test10"</span><span class="p">,</span><span class="nv">"test10"</span><span class="p">,</span><span class="nv">"test10@sina.com"</span><span class="p">,</span><span class="nv">"9"</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">into</span> <span class="n">users</span> <span class="k">values</span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="nv">"test11"</span><span class="p">,</span><span class="nv">"test11"</span><span class="p">,</span><span class="nv">"test11@sina.com"</span><span class="p">,</span><span class="nv">"3"</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">into</span> <span class="n">users</span> <span class="k">values</span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="nv">"test12"</span><span class="p">,</span><span class="nv">"test12"</span><span class="p">,</span><span class="nv">"test12@sina.com"</span><span class="p">,</span><span class="nv">"4"</span><span class="p">);</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">users</span><span class="p">;</span>
<span class="k">insert</span> <span class="k">into</span> <span class="n">users</span><span class="p">(</span><span class="n">username</span><span class="p">,</span><span class="n">passwd</span><span class="p">,</span><span class="n">email</span><span class="p">,</span><span class="n">grade</span><span class="p">)</span> <span class="k">select</span> <span class="n">username</span><span class="p">,</span><span class="n">passwd</span><span class="p">,</span><span class="n">email</span><span class="p">,</span><span class="n">grade</span> <span class="k">from</span> <span class="n">users</span><span class="p">;</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">users</span> <span class="k">where</span> <span class="n">username</span><span class="o">=</span><span class="k">admin</span> <span class="k">and</span> <span class="n">passwd</span><span class="o">=</span><span class="k">admin</span><span class="p">;</span>
<span class="o">#</span><span class="err">添加新列</span>
<span class="k">alter</span> <span class="k">table</span> <span class="n">users</span> <span class="k">add</span> <span class="n">myPic</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">30</span><span class="p">);</span>
<span class="o">#</span><span class="err">修改数据</span>
<span class="k">update</span> <span class="n">users</span> <span class="k">set</span> <span class="n">myPic</span><span class="o">=</span><span class="s1">'luowei.gif'</span> <span class="k">where</span> <span class="n">userName</span><span class="o">=</span><span class="s1">'luowei'</span><span class="p">;</span>
<span class="k">update</span> <span class="n">users</span> <span class="k">set</span> <span class="n">myPic</span><span class="o">=</span><span class="s1">'admin.gif'</span> <span class="k">where</span> <span class="n">userName</span><span class="o">=</span><span class="s1">'admin'</span><span class="p">;</span>
<span class="k">update</span> <span class="n">users</span> <span class="k">set</span> <span class="n">myPic</span><span class="o">=</span><span class="s1">'test1.gif'</span> <span class="k">where</span> <span class="n">userName</span><span class="o">=</span><span class="s1">'test1'</span><span class="p">;</span>
<span class="o">#</span><span class="k">drop</span> <span class="k">table</span> <span class="n">users</span><span class="p">;</span>
<span class="o">#</span><span class="c1">--------------------------------------------------------------------</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">person</span> <span class="p">(</span>
  <span class="n">id</span> <span class="nb">SMALLINT</span> <span class="nb">UNSIGNED</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="n">AUTO_INCREMENT</span><span class="p">,</span>
  <span class="n">name</span> <span class="nb">CHAR</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">id</span><span class="p">)</span>
<span class="p">);</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">shirt</span> <span class="p">(</span>
  <span class="n">id</span> <span class="nb">SMALLINT</span> <span class="nb">UNSIGNED</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="n">AUTO_INCREMENT</span><span class="p">,</span>
  <span class="n">style</span> <span class="nb">ENUM</span><span class="p">(</span><span class="s1">'t-shirt'</span><span class="p">,</span> <span class="s1">'polo'</span><span class="p">,</span> <span class="s1">'dress'</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
  <span class="n">color</span> <span class="nb">ENUM</span><span class="p">(</span><span class="s1">'red'</span><span class="p">,</span> <span class="s1">'blue'</span><span class="p">,</span> <span class="s1">'orange'</span><span class="p">,</span> <span class="s1">'white'</span><span class="p">,</span> <span class="s1">'black'</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
<span class="k">owner</span> <span class="nb">SMALLINT</span> <span class="nb">UNSIGNED</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="k">REFERENCES</span> <span class="n">person</span><span class="p">(</span><span class="n">id</span><span class="p">),</span>
<span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">id</span><span class="p">)</span>
<span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">person</span> <span class="k">VALUES</span> <span class="p">(</span><span class="k">NULL</span><span class="p">,</span> <span class="s1">'Antonio Paz'</span><span class="p">);</span>
<span class="k">SELECT</span> <span class="o">@</span><span class="k">last</span> <span class="p">:</span><span class="o">=</span> <span class="n">LAST_INSERT_ID</span><span class="p">();</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">shirt</span> <span class="k">VALUES</span>
  <span class="p">(</span><span class="k">NULL</span><span class="p">,</span> <span class="s1">'polo'</span><span class="p">,</span> <span class="s1">'blue'</span><span class="p">,</span> <span class="o">@</span><span class="k">last</span><span class="p">),</span>
  <span class="p">(</span><span class="k">NULL</span><span class="p">,</span> <span class="s1">'dress'</span><span class="p">,</span> <span class="s1">'white'</span><span class="p">,</span> <span class="o">@</span><span class="k">last</span><span class="p">),</span>
  <span class="p">(</span><span class="k">NULL</span><span class="p">,</span> <span class="s1">'t-shirt'</span><span class="p">,</span> <span class="s1">'blue'</span><span class="p">,</span> <span class="o">@</span><span class="k">last</span><span class="p">);</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">person</span> <span class="k">VALUES</span> <span class="p">(</span><span class="k">NULL</span><span class="p">,</span> <span class="s1">'Lilliana Angelovska'</span><span class="p">);</span>
<span class="k">SELECT</span> <span class="o">@</span><span class="k">last</span> <span class="p">:</span><span class="o">=</span> <span class="n">LAST_INSERT_ID</span><span class="p">();</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">shirt</span> <span class="k">VALUES</span>
  <span class="p">(</span><span class="k">NULL</span><span class="p">,</span> <span class="s1">'dress'</span><span class="p">,</span> <span class="s1">'orange'</span><span class="p">,</span> <span class="o">@</span><span class="k">last</span><span class="p">),</span>
  <span class="p">(</span><span class="k">NULL</span><span class="p">,</span> <span class="s1">'polo'</span><span class="p">,</span> <span class="s1">'red'</span><span class="p">,</span> <span class="o">@</span><span class="k">last</span><span class="p">),</span>
  <span class="p">(</span><span class="k">NULL</span><span class="p">,</span> <span class="s1">'dress'</span><span class="p">,</span> <span class="s1">'blue'</span><span class="p">,</span> <span class="o">@</span><span class="k">last</span><span class="p">),</span>
  <span class="p">(</span><span class="k">NULL</span><span class="p">,</span> <span class="s1">'t-shirt'</span><span class="p">,</span> <span class="s1">'white'</span><span class="p">,</span> <span class="o">@</span><span class="k">last</span><span class="p">);</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">person</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">shirt</span><span class="p">;</span>
<span class="k">SELECT</span> <span class="n">s</span><span class="p">.</span><span class="o">*</span> <span class="k">FROM</span> <span class="n">person</span> <span class="n">p</span><span class="p">,</span> <span class="n">shirt</span> <span class="n">s</span>
<span class="k">WHERE</span> <span class="n">p</span><span class="p">.</span><span class="n">name</span> <span class="k">LIKE</span> <span class="s1">'Lilliana%'</span>
      <span class="k">AND</span> <span class="n">s</span><span class="p">.</span><span class="k">owner</span> <span class="o">=</span> <span class="n">p</span><span class="p">.</span><span class="n">id</span>
      <span class="k">AND</span> <span class="n">s</span><span class="p">.</span><span class="n">color</span> <span class="o">&lt;&gt;</span> <span class="s1">'white'</span><span class="p">;</span>
<span class="o">#</span><span class="c1">----------------------------------------------------------</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">users</span> <span class="k">order</span> <span class="k">by</span> <span class="n">useId</span> <span class="k">limit</span> <span class="mi">5</span><span class="p">;</span>
</code></pre></div></div> <h3 id="界面层view层">界面层(View层)</h3> <p><strong>登录界面_UserManageSys2/WebRoot/WEB-INF/login.jsp</strong><br /> <img src="https://raw.githubusercontent.com/luowei/list/gh-pages/images/java/base/article_48.jpg" alt="登录界面" /></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;!--</span> <span class="err">登录界面</span> <span class="o">--&gt;</span>
<span class="o">&lt;%</span><span class="err">@</span> <span class="n">page</span> <span class="n">language</span><span class="o">=</span><span class="s">"java"</span> <span class="kn">import</span><span class="err">="</span><span class="nn">java.util.*</span><span class="s">" pageEncoding="</span><span class="n">gb2312</span><span class="s">"%&gt;
&lt;%
    String path = request.getContextPath();
    String basePath = request.getScheme()+"</span><span class="o">:</span><span class="c1">//"+request.getServerName()+":"+request.getServerPort()+path+"/";</span>
<span class="o">%&gt;</span>
<span class="o">&lt;!</span><span class="no">DOCTYPE</span> <span class="no">HTML</span> <span class="no">PUBLIC</span> <span class="s">"-//W3C//DTD HTML 4.01 Transitional//EN"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">head</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">base</span> <span class="n">href</span><span class="o">=</span><span class="s">"&lt;%=basePath%&gt;"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span><span class="nc">My</span> <span class="no">JSP</span> <span class="err">'</span><span class="n">login</span><span class="o">.</span><span class="na">jsp</span><span class="err">'</span> <span class="n">starting</span> <span class="n">page</span><span class="o">&lt;/</span><span class="n">title</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"pragma"</span> <span class="n">content</span><span class="o">=</span><span class="s">"no-cache"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"cache-control"</span> <span class="n">content</span><span class="o">=</span><span class="s">"no-cache"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"expires"</span> <span class="n">content</span><span class="o">=</span><span class="s">"0"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"keywords"</span> <span class="n">content</span><span class="o">=</span><span class="s">"keyword1,keyword2,keyword3"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"description"</span> <span class="n">content</span><span class="o">=</span><span class="s">"This is my page"</span><span class="o">&gt;</span>
    <span class="o">&lt;!--</span>
    <span class="o">&lt;</span><span class="n">link</span> <span class="n">rel</span><span class="o">=</span><span class="s">"stylesheet"</span> <span class="n">type</span><span class="o">=</span><span class="s">"text/css"</span> <span class="n">href</span><span class="o">=</span><span class="s">"styles.css"</span><span class="o">&gt;</span>
            <span class="o">--&gt;</span>
<span class="o">&lt;/</span><span class="n">head</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">body</span> <span class="n">bgcolor</span><span class="o">=</span><span class="s">"ff9900"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">center</span><span class="o">&gt;</span>
    <span class="o">&lt;%</span>
        <span class="nc">String</span> <span class="n">errNo</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"errNo"</span><span class="o">);</span>
        <span class="k">if</span><span class="o">(</span><span class="n">errNo</span><span class="o">!=</span><span class="kc">null</span><span class="o">)</span>
        <span class="o">{</span>
            <span class="k">if</span><span class="o">(</span><span class="n">errNo</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"1"</span><span class="o">))</span>
            <span class="o">{</span>
                <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;font color=red size=7&gt;登录错误，请输入正确的用户名和密码！&lt;/font&gt;&lt;br&gt;"</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">%&gt;</span>
    <span class="o">&lt;!--</span> <span class="err">引入一张图片</span> <span class="o">--&gt;</span>
    <span class="o">&lt;</span><span class="n">img</span> <span class="n">src</span><span class="o">=</span><span class="s">"imgs/1.gif"</span><span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="n">hr</span><span class="o">&gt;</span>
    <span class="err">用户登录</span> <span class="o">&lt;</span><span class="n">br</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">form</span> <span class="n">action</span><span class="o">=</span><span class="s">"LoginClServlet"</span> <span class="n">method</span><span class="o">=</span><span class="s">"post"</span><span class="o">&gt;</span>
        <span class="err">用户名：</span><span class="o">&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s">"text"</span> <span class="n">name</span><span class="o">=</span><span class="s">"username"</span><span class="o">/&gt;&lt;</span><span class="n">br</span><span class="o">&gt;</span>
        <span class="err">密</span><span class="o">&amp;</span><span class="n">nbsp</span><span class="o">;&amp;</span><span class="n">nbsp</span><span class="o">;</span><span class="err">码：</span><span class="o">&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s">"password"</span> <span class="n">name</span><span class="o">=</span><span class="s">"passwd"</span><span class="o">/&gt;&lt;</span><span class="n">br</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s">"submit"</span> <span class="n">value</span><span class="o">=</span><span class="s">"登录"</span><span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s">"reset"</span> <span class="n">value</span><span class="o">=</span><span class="s">"重置"</span><span class="o">/&gt;</span>
    <span class="o">&lt;/</span><span class="n">form</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">hr</span><span class="o">&gt;</span>
    <span class="o">&lt;!--</span> <span class="err">引入一张图片</span> <span class="o">--&gt;</span>
    <span class="o">&lt;</span><span class="n">img</span> <span class="n">src</span><span class="o">=</span><span class="s">"imgs/logo.gif"</span><span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="n">center</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</code></pre></div></div> <p><strong>登录处理界面_UserManageSys2/WebRoot/WEB-INF/loginCl.jsp</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;%</span><span class="err">@</span> <span class="n">page</span> <span class="n">language</span><span class="o">=</span><span class="s">"java"</span> <span class="kn">import</span><span class="err">="</span><span class="nn">java.util.*</span><span class="o">,</span><span class="n">java</span><span class="o">.</span><span class="na">sql</span><span class="o">.*,</span><span class="n">user</span><span class="o">.</span><span class="na">model</span><span class="o">.*</span><span class="s">" pageEncoding="</span><span class="n">gb2312</span><span class="s">"%&gt;
&lt;%
    String path = request.getContextPath();
    String basePath = request.getScheme()+"</span><span class="o">:</span><span class="c1">//"+request.getServerName()+":"+request.getServerPort()+path+"/";</span>
<span class="o">%&gt;</span>
<span class="o">&lt;!</span><span class="no">DOCTYPE</span> <span class="no">HTML</span> <span class="no">PUBLIC</span> <span class="s">"-//W3C//DTD HTML 4.01 Transitional//EN"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">head</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">base</span> <span class="n">href</span><span class="o">=</span><span class="s">"&lt;%=basePath%&gt;"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span><span class="nc">My</span> <span class="no">JSP</span> <span class="err">'</span><span class="n">loginCl</span><span class="o">.</span><span class="na">jsp</span><span class="err">'</span> <span class="n">starting</span> <span class="n">page</span><span class="o">&lt;/</span><span class="n">title</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"pragma"</span> <span class="n">content</span><span class="o">=</span><span class="s">"no-cache"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"cache-control"</span> <span class="n">content</span><span class="o">=</span><span class="s">"no-cache"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"expires"</span> <span class="n">content</span><span class="o">=</span><span class="s">"0"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"keywords"</span> <span class="n">content</span><span class="o">=</span><span class="s">"keyword1,keyword2,keyword3"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"description"</span> <span class="n">content</span><span class="o">=</span><span class="s">"This is my page"</span><span class="o">&gt;</span>
    <span class="o">&lt;!--</span>
    <span class="o">&lt;</span><span class="n">link</span> <span class="n">rel</span><span class="o">=</span><span class="s">"stylesheet"</span> <span class="n">type</span><span class="o">=</span><span class="s">"text/css"</span> <span class="n">href</span><span class="o">=</span><span class="s">"styles.css"</span><span class="o">&gt;</span>
            <span class="o">--&gt;</span>
<span class="o">&lt;/</span><span class="n">head</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">body</span><span class="o">&gt;</span>
<span class="o">&lt;%</span>
    <span class="c1">//接收用户名和密码，完成对用户的验证</span>
    <span class="nc">String</span> <span class="n">u</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"username"</span><span class="o">);</span>
    <span class="nc">String</span> <span class="n">p</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"passwd"</span><span class="o">);</span>
<span class="c1">//到数据库中去验证用户</span>
    <span class="c1">//调用UserBeanCl的方法，完成对用户的验证</span>
    <span class="nc">UserBeanCl</span> <span class="n">ubc</span><span class="o">=</span><span class="k">new</span> <span class="nc">UserBeanCl</span><span class="o">();</span>
    <span class="k">if</span><span class="o">(</span><span class="n">ubc</span><span class="o">.</span><span class="na">checkUser</span><span class="o">(</span><span class="n">u</span><span class="o">,</span><span class="n">p</span><span class="o">))</span>
    <span class="o">{</span>
        <span class="n">response</span><span class="o">.</span><span class="na">sendRedirect</span><span class="o">(</span><span class="s">"wel.jsp?username="</span><span class="o">+</span><span class="n">u</span><span class="o">);</span>
    <span class="o">}</span><span class="k">else</span>
    <span class="o">{</span>
        <span class="n">response</span><span class="o">.</span><span class="na">sendRedirect</span><span class="o">(</span><span class="s">"login.jsp?errNo=1"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">%&gt;</span>
<span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</code></pre></div></div> <p><strong>主界面_UserManageSys2/WebRoot/WEB-INF/Main.jsp</strong><br /> <img src="https://raw.githubusercontent.com/luowei/list/gh-pages/images/java/base/article_49.jpg" alt="主界面" /></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;!--</span><span class="err">主界面</span> <span class="o">--&gt;</span>
<span class="o">&lt;%</span><span class="err">@</span> <span class="n">page</span> <span class="n">language</span><span class="o">=</span><span class="s">"java"</span> <span class="kn">import</span><span class="err">="</span><span class="nn">java.util.*</span><span class="s">" pageEncoding="</span><span class="n">gb2312</span><span class="s">"%&gt;
&lt;%
    String path = request.getContextPath();
    String basePath = request.getScheme()+"</span><span class="o">:</span><span class="c1">//"+request.getServerName()+":"+request.getServerPort()+path+"/";</span>
<span class="o">%&gt;</span>
<span class="o">&lt;!</span><span class="no">DOCTYPE</span> <span class="no">HTML</span> <span class="no">PUBLIC</span> <span class="s">"-//W3C//DTD HTML 4.01 Transitional//EN"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">head</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">base</span> <span class="n">href</span><span class="o">=</span><span class="s">"&lt;%=basePath%&gt;"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span><span class="nc">My</span> <span class="no">JSP</span> <span class="err">'</span><span class="nc">Main</span><span class="o">.</span><span class="na">jsp</span><span class="err">'</span> <span class="n">starting</span> <span class="n">page</span><span class="o">&lt;/</span><span class="n">title</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"pragma"</span> <span class="n">content</span><span class="o">=</span><span class="s">"no-cache"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"cache-control"</span> <span class="n">content</span><span class="o">=</span><span class="s">"no-cache"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"expires"</span> <span class="n">content</span><span class="o">=</span><span class="s">"0"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"keywords"</span> <span class="n">content</span><span class="o">=</span><span class="s">"keyword1,keyword2,keyword3"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"description"</span> <span class="n">content</span><span class="o">=</span><span class="s">"This is my page"</span><span class="o">&gt;</span>
    <span class="o">&lt;!--</span>
    <span class="o">&lt;</span><span class="n">link</span> <span class="n">rel</span><span class="o">=</span><span class="s">"stylesheet"</span> <span class="n">type</span><span class="o">=</span><span class="s">"text/css"</span> <span class="n">href</span><span class="o">=</span><span class="s">"styles.css"</span><span class="o">&gt;</span>
    <span class="o">--&gt;</span>
<span class="o">&lt;/</span><span class="n">head</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">body</span> <span class="n">bgcolor</span><span class="o">=</span><span class="s">"ff9900"</span><span class="o">&gt;</span>
<span class="o">&lt;%</span>
    <span class="nc">String</span> <span class="n">u</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"username"</span><span class="o">);</span>
    <span class="c1">//System.out.println("Main.jsp得到的username="+u);</span>
<span class="o">%&gt;</span>
<span class="o">&lt;</span><span class="n">center</span><span class="o">&gt;</span>
    <span class="o">&lt;!--</span> <span class="err">引入一张图片</span> <span class="o">--&gt;</span>
    <span class="o">&lt;</span><span class="n">img</span> <span class="n">src</span><span class="o">=</span><span class="s">"imgs/1.gif"</span><span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="n">hr</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="err">请选择操作</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s">"UserClServlet?pageNow=1&amp;flag=fenye&amp;username=&lt;%=u %&gt;"</span> <span class="o">&gt;</span><span class="err">管理用户</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;&lt;</span><span class="n">br</span><span class="o">/&gt;</span>
    <span class="o">&lt;!--</span> <span class="n">flag</span><span class="err">标志告诉控制器，进行分页</span> <span class="o">--&gt;</span>
    <span class="o">&lt;!--</span> <span class="err">注意这里变量</span><span class="o">&lt;%=</span><span class="n">u</span> <span class="o">%&gt;</span><span class="err">要放在双引号里边，直接赋给</span><span class="n">username</span> <span class="o">--&gt;</span>
    <span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s">"addUser.jsp?username=&lt;%=u %&gt;"</span><span class="o">&gt;</span><span class="err">添加用户</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;&lt;</span><span class="n">br</span><span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s">"#"</span><span class="o">&gt;</span><span class="err">查找用户</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;&lt;</span><span class="n">br</span><span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s">"#"</span><span class="o">&gt;</span><span class="err">注销用户</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;&lt;</span><span class="n">br</span><span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="n">hr</span><span class="o">&gt;</span>
    <span class="o">&lt;!--</span> <span class="err">引入一张图片</span> <span class="o">--&gt;</span>
    <span class="o">&lt;</span><span class="n">img</span> <span class="n">src</span><span class="o">=</span><span class="s">"imgs/logo.gif"</span><span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="n">center</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</code></pre></div></div> <p><strong>欢迎界面_UserManageSys2/WebRoot/WEB-INF/wel.jsp</strong><br /> <img src="https://raw.githubusercontent.com/luowei/list/gh-pages/images/java/base/article_50.jpg" alt="欢迎界面" /></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;!--</span><span class="err">欢迎界面</span> <span class="o">--&gt;</span>
<span class="o">&lt;%</span><span class="err">@</span> <span class="n">page</span> <span class="n">language</span><span class="o">=</span><span class="s">"java"</span> <span class="kn">import</span><span class="err">="</span><span class="nn">java.util.*</span><span class="o">,</span><span class="n">java</span><span class="o">.</span><span class="na">sql</span><span class="o">.*,</span><span class="n">user</span><span class="o">.</span><span class="na">model</span><span class="o">.*</span><span class="s">" pageEncoding="</span><span class="n">gb2312</span><span class="s">"%&gt;
&lt;%
    String path = request.getContextPath();
    String basePath = request.getScheme()+"</span><span class="o">:</span><span class="c1">//"+request.getServerName()+":"+request.getServerPort()+path+"/";</span>
<span class="o">%&gt;</span>
<span class="o">&lt;!</span><span class="no">DOCTYPE</span> <span class="no">HTML</span> <span class="no">PUBLIC</span> <span class="s">"-//W3C//DTD HTML 4.01 Transitional//EN"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">head</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">base</span> <span class="n">href</span><span class="o">=</span><span class="s">"&lt;%=basePath%&gt;"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span><span class="nc">My</span> <span class="no">JSP</span> <span class="err">'</span><span class="n">wel</span><span class="o">.</span><span class="na">jsp</span><span class="err">'</span> <span class="n">starting</span> <span class="n">page</span><span class="o">&lt;/</span><span class="n">title</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"pragma"</span> <span class="n">content</span><span class="o">=</span><span class="s">"no-cache"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"cache-control"</span> <span class="n">content</span><span class="o">=</span><span class="s">"no-cache"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"expires"</span> <span class="n">content</span><span class="o">=</span><span class="s">"0"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"keywords"</span> <span class="n">content</span><span class="o">=</span><span class="s">"keyword1,keyword2,keyword3"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"description"</span> <span class="n">content</span><span class="o">=</span><span class="s">"This is my page"</span><span class="o">&gt;</span>
    <span class="o">&lt;!--</span>
    <span class="o">&lt;</span><span class="n">link</span> <span class="n">rel</span><span class="o">=</span><span class="s">"stylesheet"</span> <span class="n">type</span><span class="o">=</span><span class="s">"text/css"</span> <span class="n">href</span><span class="o">=</span><span class="s">"styles.css"</span><span class="o">&gt;</span>
    <span class="o">--&gt;</span>
    <span class="o">&lt;</span><span class="n">script</span> <span class="n">type</span><span class="o">=</span><span class="s">"text/javascript"</span><span class="o">&gt;</span>
        <span class="o">&lt;!--</span>
        <span class="n">function</span> <span class="nf">msg</span><span class="o">()</span>
        <span class="o">{</span>
            <span class="k">return</span> <span class="n">window</span><span class="o">.</span><span class="na">confirm</span><span class="o">(</span><span class="s">"你确认要删除吗？"</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="o">--&gt;</span>
    <span class="o">&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">head</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">body</span> <span class="n">bgcolor</span><span class="o">=</span><span class="s">"ff9900"</span><span class="o">&gt;</span>
<span class="o">&lt;%</span>
    <span class="nc">String</span> <span class="n">u</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"username"</span><span class="o">);</span>
    <span class="c1">//System.out.println("UserClServlet得到的username="+u);</span>
    <span class="c1">//u=new String(u.getBytes("gb2312"),"iso-8859-1"); //转码</span>
    <span class="c1">//防止用户非法登录</span>
    <span class="nc">String</span> <span class="n">userName</span><span class="o">=(</span><span class="nc">String</span><span class="o">)</span><span class="n">session</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">"myName"</span><span class="o">);</span>
    <span class="c1">//如果用户没有登录</span>
    <span class="k">if</span><span class="o">(</span><span class="n">userName</span><span class="o">==</span><span class="kc">null</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="c1">//返回登录界面</span>
        <span class="n">response</span><span class="o">.</span><span class="na">sendRedirect</span><span class="o">(</span><span class="s">"login.jsp?errNo=1"</span><span class="o">);</span>
        <span class="k">return</span> <span class="o">;</span>
    <span class="o">}</span>
<span class="o">%&gt;</span>
<span class="err">登录成功！维唯为为恭喜你！</span><span class="o">&lt;%=</span><span class="n">u</span> <span class="o">%&gt;&lt;</span><span class="n">br</span><span class="o">/&gt;</span>
<span class="n">session</span><span class="err">得到的用户名为：</span><span class="o">&lt;%=</span><span class="n">userName</span> <span class="o">%&gt;&lt;</span><span class="n">br</span><span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s">"login.jsp"</span><span class="o">&gt;</span><span class="err">返回重新登录</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;&amp;</span><span class="n">nbsp</span><span class="o">;&amp;</span><span class="n">nbsp</span><span class="o">;</span>
<span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s">"Main.jsp?username=&lt;%=u %&gt;"</span><span class="o">&gt;</span><span class="err">返回主界面</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">hr</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">center</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="err">用户信息列表</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
    <span class="o">&lt;%</span>
        <span class="c1">//调用UserBeanCl的方法(创建一个UserBeanCl的实例，然后调用它的某个方法)，完成分布显示</span>
        <span class="c1">//UserBeanCl ubc=new UserBeanCl();</span>
        <span class="c1">//ArrayList al=ubc.getUserByPage(pageNow);</span>
        <span class="c1">//要显示的用户信息从request中取</span>
        <span class="nc">ArrayList</span> <span class="n">al</span><span class="o">=(</span><span class="nc">ArrayList</span><span class="o">)</span><span class="n">request</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">"result"</span><span class="o">);</span>
        <span class="c1">//显示</span>
    <span class="o">%&gt;</span>
    <span class="o">&lt;%</span>
        <span class="c1">//得到pageCount</span>
        <span class="nc">String</span> <span class="n">s_pageCount</span><span class="o">=(</span><span class="nc">String</span><span class="o">)</span><span class="n">request</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">"pageCount"</span><span class="o">);</span>
        <span class="kt">int</span> <span class="n">pageCount</span><span class="o">=</span><span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">s_pageCount</span><span class="o">);</span>
        <span class="nc">String</span> <span class="n">s_pageSize</span><span class="o">=(</span><span class="nc">String</span><span class="o">)</span><span class="n">request</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">"pageSize"</span><span class="o">);</span>
        <span class="kt">int</span> <span class="n">pageSize</span><span class="o">=</span><span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">s_pageSize</span><span class="o">);</span>
        <span class="nc">String</span> <span class="n">s_pageNow</span><span class="o">=(</span><span class="nc">String</span><span class="o">)</span><span class="n">request</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">"pageNow"</span><span class="o">);</span>
        <span class="kt">int</span> <span class="n">pageNow</span><span class="o">=</span><span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">s_pageNow</span><span class="o">);</span>
    <span class="o">%&gt;</span>
    <span class="o">&lt;</span><span class="n">table</span> <span class="n">border</span><span class="o">=</span><span class="s">"1"</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">tr</span> <span class="n">bgcolor</span><span class="o">=</span><span class="s">"pink"</span><span class="o">&gt;&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="err">用户</span><span class="n">id</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="err">用户名</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="err">密码</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="err">邮箱</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="err">级别</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="err">修改用户</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="err">删除用户</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
        <span class="o">&lt;%</span>
            <span class="c1">//定义一个颜色数组</span>
            <span class="nc">String</span> <span class="o">[]</span><span class="n">color</span><span class="o">={</span><span class="s">"silver"</span><span class="o">,</span><span class="s">"pink"</span><span class="o">};</span>
            <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">al</span><span class="o">.</span><span class="na">size</span><span class="o">();</span><span class="n">i</span><span class="o">++)</span>
            <span class="o">{</span>    <span class="c1">//从al中取出UserBean</span>
                <span class="nc">UserBean</span> <span class="n">ub</span><span class="o">=(</span><span class="nc">UserBean</span><span class="o">)</span><span class="n">al</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
        <span class="o">%&gt;</span>
        <span class="o">&lt;</span><span class="n">tr</span> <span class="n">bgcolor</span><span class="o">=</span><span class="s">"&lt;%=color[i%2] %&gt;"</span><span class="o">&gt;&lt;</span><span class="n">td</span><span class="o">&gt;&lt;%=</span><span class="n">ub</span><span class="o">.</span><span class="na">getUserId</span><span class="o">()</span> <span class="o">%&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;&lt;</span><span class="n">td</span><span class="o">&gt;&lt;%=</span><span class="n">ub</span><span class="o">.</span><span class="na">getUsername</span><span class="o">()</span> <span class="o">%&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;&lt;%=</span><span class="n">ub</span><span class="o">.</span><span class="na">getPasswd</span><span class="o">()</span> <span class="o">%&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;&lt;</span><span class="n">td</span><span class="o">&gt;&lt;%=</span><span class="n">ub</span><span class="o">.</span><span class="na">getEmail</span><span class="o">()</span> <span class="o">%&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;&lt;%=</span><span class="n">ub</span><span class="o">.</span><span class="na">getGrade</span><span class="o">()</span> <span class="o">%&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s">"updateUser.jsp?username=&lt;%=u%&gt;&amp;pageNow=&lt;%=pageNow %&gt;&amp;userId=&lt;%=ub.getUserId()
                     %&gt;&amp;userName=&lt;%=ub.getUsername() %&gt;&amp;passWd=&lt;%=ub.getPasswd() %&gt;&amp;email=&lt;%=ub.getEmail()
                     %&gt;&amp;grade=&lt;%=ub.getGrade() %&gt;"</span><span class="o">&gt;</span><span class="err">修改用户</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;&lt;</span><span class="n">a</span> <span class="n">onclick</span><span class="o">=</span><span class="s">"return msg()"</span> <span class="n">href</span><span class="o">=</span><span class="s">"UserClServlet?username=&lt;%=u%&gt;&amp;pageNow=&lt;%=pageNow
                     %&gt;&amp;flag=delUser&amp;userid=&lt;%=ub.getUserId() %&gt;"</span><span class="o">&gt;</span><span class="err">删除用户</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
        <span class="o">&lt;%</span>
            <span class="o">}</span>
        <span class="o">%&gt;</span>
    <span class="o">&lt;/</span><span class="n">table</span><span class="o">&gt;</span>
    <span class="o">&lt;%</span>
        <span class="c1">//首页</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;a href=UserClServlet?flag=fenye&amp;pageNow=1&amp;username="</span><span class="o">+</span><span class="n">u</span><span class="o">+</span><span class="s">"&gt;首页&lt;/a&gt;"</span><span class="o">);</span> <span class="c1">//转到分页控制器处理</span>
        <span class="c1">//上一页</span>
        <span class="k">if</span><span class="o">(</span><span class="n">pageNow</span><span class="o">!=</span><span class="mi">1</span><span class="o">)</span>
        <span class="o">{</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;a href=UserClServlet?flag=fenye&amp;pageNow="</span><span class="o">+(</span><span class="n">pageNow</span><span class="o">-</span><span class="mi">1</span><span class="o">)+</span><span class="s">"&amp;username="</span><span class="o">+</span><span class="n">u</span><span class="o">+</span><span class="s">"&gt;上一页&lt;/a&gt;"</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="c1">//显示页面链接</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="n">pageNow</span><span class="o">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">pageNow</span><span class="o">+</span><span class="n">pageSize</span><span class="o">&amp;&amp;</span><span class="n">i</span><span class="o">&lt;=</span><span class="n">pageCount</span><span class="o">;</span><span class="n">i</span><span class="o">++)</span>
        <span class="o">{</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;a href=UserClServlet?flag=fenye&amp;pageNow="</span><span class="o">+</span><span class="n">i</span><span class="o">+</span><span class="s">"&amp;username="</span><span class="o">+</span><span class="n">u</span><span class="o">+</span><span class="s">"&gt;["</span><span class="o">+</span><span class="n">i</span><span class="o">+</span><span class="s">"]&lt;/a&gt;"</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="c1">//下一页</span>
        <span class="k">if</span><span class="o">(</span><span class="n">pageNow</span><span class="o">!=</span><span class="n">pageCount</span><span class="o">)</span>
        <span class="o">{</span>
            <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;a href=UserClServlet?flag=fenye&amp;pageNow="</span><span class="o">+(</span><span class="n">pageNow</span><span class="o">+</span><span class="mi">1</span><span class="o">)+</span><span class="s">"&amp;username="</span><span class="o">+</span><span class="n">u</span><span class="o">+</span><span class="s">"&gt;下一页&lt;/a&gt;"</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="c1">//尾页</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;a href=UserClServlet?flag=fenye&amp;pageNow="</span><span class="o">+</span><span class="n">pageCount</span><span class="o">+</span><span class="s">"&amp;username="</span><span class="o">+</span><span class="n">u</span><span class="o">+</span><span class="s">"&gt;尾页&lt;/a&gt;"</span><span class="o">);</span>
    <span class="o">%&gt;</span>
    <span class="o">&lt;</span><span class="n">hr</span><span class="o">&gt;</span>
    <span class="o">&lt;!--</span> <span class="err">引入一张图片</span> <span class="o">--&gt;</span>
    <span class="o">&lt;</span><span class="n">img</span> <span class="n">src</span><span class="o">=</span><span class="s">"imgs/logo.gif"</span><span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="n">center</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</code></pre></div></div> <p><strong>修改界面_UserManageSys2/WebRoot/WEB-INF/updateUser.jsp</strong><br /> <img src="https://raw.githubusercontent.com/luowei/list/gh-pages/images/java/base/article_51.jpg" alt="修改界面" /></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;%</span><span class="err">@</span> <span class="n">page</span> <span class="n">language</span><span class="o">=</span><span class="s">"java"</span> <span class="kn">import</span><span class="err">="</span><span class="nn">java.util.*</span><span class="s">" pageEncoding="</span><span class="n">gb2312</span><span class="s">"%&gt;
&lt;%
    String path = request.getContextPath();
    String basePath = request.getScheme()+"</span><span class="o">:</span><span class="c1">//"+request.getServerName()+":"+request.getServerPort()+path+"/";</span>
<span class="o">%&gt;</span>
<span class="o">&lt;!</span><span class="no">DOCTYPE</span> <span class="no">HTML</span> <span class="no">PUBLIC</span> <span class="s">"-//W3C//DTD HTML 4.01 Transitional//EN"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">head</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">base</span> <span class="n">href</span><span class="o">=</span><span class="s">"&lt;%=basePath%&gt;"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span><span class="nc">My</span> <span class="no">JSP</span> <span class="err">'</span><span class="n">updateUser</span><span class="o">.</span><span class="na">jsp</span><span class="err">'</span> <span class="n">starting</span> <span class="n">page</span><span class="o">&lt;/</span><span class="n">title</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"pragma"</span> <span class="n">content</span><span class="o">=</span><span class="s">"no-cache"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"cache-control"</span> <span class="n">content</span><span class="o">=</span><span class="s">"no-cache"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"expires"</span> <span class="n">content</span><span class="o">=</span><span class="s">"0"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"keywords"</span> <span class="n">content</span><span class="o">=</span><span class="s">"keyword1,keyword2,keyword3"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"description"</span> <span class="n">content</span><span class="o">=</span><span class="s">"This is my page"</span><span class="o">&gt;</span>
    <span class="o">&lt;!--</span>
    <span class="o">&lt;</span><span class="n">link</span> <span class="n">rel</span><span class="o">=</span><span class="s">"stylesheet"</span> <span class="n">type</span><span class="o">=</span><span class="s">"text/css"</span> <span class="n">href</span><span class="o">=</span><span class="s">"styles.css"</span><span class="o">&gt;</span>
    <span class="o">--&gt;</span>
<span class="o">&lt;/</span><span class="n">head</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">body</span> <span class="n">bgcolor</span><span class="o">=</span><span class="s">"ff9900"</span><span class="o">&gt;</span>
<span class="o">&lt;%</span>
    <span class="nc">String</span> <span class="n">u</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"username"</span><span class="o">);</span>
    <span class="nc">String</span> <span class="n">pageNow</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"pageNow"</span><span class="o">);</span>
    <span class="c1">//String flag=request.getParameter("flag");</span>
    <span class="c1">//System.out.println("Main.jsp得到的username="+u);</span>
<span class="o">%&gt;</span>
<span class="err">欢迎您：</span><span class="o">&lt;%=</span><span class="n">u</span> <span class="o">%&gt;&lt;</span><span class="n">br</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s">"Main.jsp?username=&lt;%=u %&gt;"</span><span class="o">&gt;</span><span class="err">返回主界面</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s">"UserClServlet?username=&lt;%=u %&gt;&amp;UserClServlet=&lt;%=u %&gt;&amp;pageNow=&lt;%=pageNow %&gt;&amp;flag=fenye"</span><span class="o">&gt;</span><span class="err">返回上一页</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">center</span><span class="o">&gt;</span>
    <span class="o">&lt;!--</span> <span class="err">引入一张图片</span> <span class="o">--&gt;</span>
    <span class="o">&lt;</span><span class="n">img</span> <span class="n">src</span><span class="o">=</span><span class="s">"imgs/1.gif"</span><span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="n">hr</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="err">修改用户信息</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">form</span> <span class="n">action</span><span class="o">=</span><span class="s">"UserClServlet?pageNow=1&amp;flag=updateUser&amp;username=&lt;%=u %&gt;"</span> <span class="n">method</span><span class="o">=</span><span class="s">"post"</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">table</span> <span class="n">border</span><span class="o">=</span><span class="s">"1"</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span> <span class="n">bgcolor</span><span class="o">=</span><span class="s">"pink"</span><span class="o">&gt;&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="err">用户</span><span class="nc">Id</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;&lt;</span><span class="n">td</span><span class="o">&gt;&lt;</span><span class="n">input</span> <span class="n">readonly</span> <span class="n">type</span><span class="o">=</span><span class="s">"text"</span> <span class="n">name</span><span class="o">=</span><span class="s">"userId"</span> <span class="n">value</span><span class="o">=</span><span class="s">"&lt;%=request.getParameter("</span><span class="n">userId</span><span class="s">") %&gt;"</span><span class="o">/&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span> <span class="n">bgcolor</span><span class="o">=</span><span class="s">"pink"</span><span class="o">&gt;&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="err">用户名</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;&lt;</span><span class="n">td</span><span class="o">&gt;&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s">"text"</span> <span class="n">name</span><span class="o">=</span><span class="s">"userName"</span> <span class="n">value</span><span class="o">=</span><span class="s">"&lt;%=request.getParameter("</span><span class="n">userName</span><span class="s">") %&gt;"</span><span class="o">/&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span> <span class="n">bgcolor</span><span class="o">=</span><span class="s">"silver"</span><span class="o">&gt;&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="err">密码</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;&lt;</span><span class="n">td</span><span class="o">&gt;&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s">"text"</span> <span class="n">name</span><span class="o">=</span><span class="s">"passWd"</span> <span class="n">value</span><span class="o">=</span><span class="s">"&lt;%=request.getParameter("</span><span class="n">passWd</span><span class="s">") %&gt;"</span><span class="o">/&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span> <span class="n">bgcolor</span><span class="o">=</span><span class="s">"pink"</span><span class="o">&gt;&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="err">电子邮件</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;&lt;</span><span class="n">td</span><span class="o">&gt;&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s">"text"</span> <span class="n">name</span><span class="o">=</span><span class="s">"email"</span> <span class="n">value</span><span class="o">=</span><span class="s">"&lt;%=request.getParameter("</span><span class="n">email</span><span class="s">") %&gt;"</span><span class="o">/&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span> <span class="n">bgcolor</span><span class="o">=</span><span class="s">"silver"</span><span class="o">&gt;&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="err">级别</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;&lt;</span><span class="n">td</span><span class="o">&gt;&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s">"text"</span> <span class="n">name</span><span class="o">=</span><span class="s">"grade"</span> <span class="n">value</span><span class="o">=</span><span class="s">"&lt;%=request.getParameter("</span><span class="n">grade</span><span class="s">") %&gt;"</span><span class="o">/&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">table</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s">"submit"</span> <span class="n">value</span><span class="o">=</span><span class="s">"修改信息"</span><span class="o">/&gt;&amp;</span><span class="n">nbsp</span><span class="o">;&amp;</span><span class="n">nbsp</span><span class="o">;</span>
    <span class="o">&lt;/</span><span class="n">form</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">hr</span><span class="o">&gt;</span>
    <span class="o">&lt;!--</span> <span class="err">引入一张图片</span> <span class="o">--&gt;</span>
    <span class="o">&lt;</span><span class="n">img</span> <span class="n">src</span><span class="o">=</span><span class="s">"imgs/logo.gif"</span><span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="n">center</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</code></pre></div></div> <p><strong>添加用户界面_UserManageSys2/WebRoot/WEB-INF/addUser.jsp</strong><br /> <img src="https://raw.githubusercontent.com/luowei/list/gh-pages/images/java/base/article_52.jpg" alt="添加用户界面" /></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;%</span><span class="err">@</span> <span class="n">page</span> <span class="n">language</span><span class="o">=</span><span class="s">"java"</span> <span class="kn">import</span><span class="err">="</span><span class="nn">java.util.*</span><span class="s">" pageEncoding="</span><span class="n">gb2312</span><span class="s">"%&gt;
&lt;%
    String path = request.getContextPath();
    String basePath = request.getScheme()+"</span><span class="o">:</span><span class="c1">//"+request.getServerName()+":"+request.getServerPort()+path+"/";</span>
<span class="o">%&gt;</span>
<span class="o">&lt;!</span><span class="no">DOCTYPE</span> <span class="no">HTML</span> <span class="no">PUBLIC</span> <span class="s">"-//W3C//DTD HTML 4.01 Transitional//EN"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">head</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">base</span> <span class="n">href</span><span class="o">=</span><span class="s">"&lt;%=basePath%&gt;"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span><span class="nc">My</span> <span class="no">JSP</span> <span class="err">'</span><span class="n">addUser</span><span class="o">.</span><span class="na">jsp</span><span class="err">'</span> <span class="n">starting</span> <span class="n">page</span><span class="o">&lt;/</span><span class="n">title</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"pragma"</span> <span class="n">content</span><span class="o">=</span><span class="s">"no-cache"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"cache-control"</span> <span class="n">content</span><span class="o">=</span><span class="s">"no-cache"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"expires"</span> <span class="n">content</span><span class="o">=</span><span class="s">"0"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"keywords"</span> <span class="n">content</span><span class="o">=</span><span class="s">"keyword1,keyword2,keyword3"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"description"</span> <span class="n">content</span><span class="o">=</span><span class="s">"This is my page"</span><span class="o">&gt;</span>
    <span class="o">&lt;!--</span>
    <span class="o">&lt;</span><span class="n">link</span> <span class="n">rel</span><span class="o">=</span><span class="s">"stylesheet"</span> <span class="n">type</span><span class="o">=</span><span class="s">"text/css"</span> <span class="n">href</span><span class="o">=</span><span class="s">"styles.css"</span><span class="o">&gt;</span>
    <span class="o">--&gt;</span>
<span class="o">&lt;/</span><span class="n">head</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">body</span> <span class="n">bgcolor</span><span class="o">=</span><span class="s">"ff9900"</span><span class="o">&gt;</span>
<span class="o">&lt;%</span>
    <span class="nc">String</span> <span class="n">u</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"username"</span><span class="o">);</span>
    <span class="c1">//System.out.println("Main.jsp得到的username="+u);</span>
<span class="o">%&gt;</span>
<span class="err">欢迎您：</span><span class="o">&lt;%=</span><span class="n">u</span> <span class="o">%&gt;&lt;</span><span class="n">br</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s">"Main.jsp?username=&lt;%=u %&gt;"</span><span class="o">&gt;</span><span class="err">返回主界面</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">center</span><span class="o">&gt;</span>
    <span class="o">&lt;!--</span> <span class="err">引入一张图片</span> <span class="o">--&gt;</span>
    <span class="o">&lt;</span><span class="n">img</span> <span class="n">src</span><span class="o">=</span><span class="s">"imgs/1.gif"</span><span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="n">hr</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="err">请输入用户信息</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">form</span> <span class="n">action</span><span class="o">=</span><span class="s">"UserClServlet?pageNow=1&amp;flag=addUser&amp;username=&lt;%=u %&gt;"</span> <span class="n">method</span><span class="o">=</span><span class="s">"post"</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">table</span> <span class="n">border</span><span class="o">=</span><span class="s">"1"</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span> <span class="n">bgcolor</span><span class="o">=</span><span class="s">"pink"</span><span class="o">&gt;&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="err">用户名</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;&lt;</span><span class="n">td</span><span class="o">&gt;&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s">"text"</span> <span class="n">name</span><span class="o">=</span><span class="s">"userName"</span><span class="o">/&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span> <span class="n">bgcolor</span><span class="o">=</span><span class="s">"silver"</span><span class="o">&gt;&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="err">密码</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;&lt;</span><span class="n">td</span><span class="o">&gt;&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s">"text"</span> <span class="n">name</span><span class="o">=</span><span class="s">"password"</span><span class="o">/&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span> <span class="n">bgcolor</span><span class="o">=</span><span class="s">"pink"</span><span class="o">&gt;&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="err">电子邮件</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;&lt;</span><span class="n">td</span><span class="o">&gt;&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s">"text"</span> <span class="n">name</span><span class="o">=</span><span class="s">"email"</span><span class="o">/&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span> <span class="n">bgcolor</span><span class="o">=</span><span class="s">"silver"</span><span class="o">&gt;&lt;</span><span class="n">td</span><span class="o">&gt;</span><span class="err">级别</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;&lt;</span><span class="n">td</span><span class="o">&gt;&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s">"text"</span> <span class="n">name</span><span class="o">=</span><span class="s">"grade"</span><span class="o">/&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">table</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s">"submit"</span> <span class="n">value</span><span class="o">=</span><span class="s">"添加用户"</span><span class="o">/&gt;&amp;</span><span class="n">nbsp</span><span class="o">;&amp;</span><span class="n">nbsp</span><span class="o">;</span>
        <span class="o">&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s">"reset"</span> <span class="n">value</span><span class="o">=</span><span class="s">" 重 置 "</span><span class="o">/&gt;</span>
    <span class="o">&lt;/</span><span class="n">form</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">hr</span><span class="o">&gt;</span>
    <span class="o">&lt;!--</span> <span class="err">引入一张图片</span> <span class="o">--&gt;</span>
    <span class="o">&lt;</span><span class="n">img</span> <span class="n">src</span><span class="o">=</span><span class="s">"imgs/logo.gif"</span><span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="n">center</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</code></pre></div></div> <p><strong>操作成功界面_UserManageSys2/WebRoot/WEB-INF/suc.jsp</strong><br /> <img src="https://raw.githubusercontent.com/luowei/list/gh-pages/images/java/base/article_53.jpg" alt="操作成功界面" /></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;!--</span> <span class="err">登录界面</span> <span class="o">--&gt;</span>
<span class="o">&lt;%</span><span class="err">@</span> <span class="n">page</span> <span class="n">language</span><span class="o">=</span><span class="s">"java"</span> <span class="kn">import</span><span class="err">="</span><span class="nn">java.util.*</span><span class="s">" pageEncoding="</span><span class="n">gb2312</span><span class="s">"%&gt;
&lt;%
    String path = request.getContextPath();
    String basePath = request.getScheme()+"</span><span class="o">:</span><span class="c1">//"+request.getServerName()+":"+request.getServerPort()+path+"/";</span>
<span class="o">%&gt;</span>
<span class="o">&lt;!</span><span class="no">DOCTYPE</span> <span class="no">HTML</span> <span class="no">PUBLIC</span> <span class="s">"-//W3C//DTD HTML 4.01 Transitional//EN"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">head</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">base</span> <span class="n">href</span><span class="o">=</span><span class="s">"&lt;%=basePath%&gt;"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span><span class="nc">My</span> <span class="no">JSP</span> <span class="err">'</span><span class="n">login</span><span class="o">.</span><span class="na">jsp</span><span class="err">'</span> <span class="n">starting</span> <span class="n">page</span><span class="o">&lt;/</span><span class="n">title</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"pragma"</span> <span class="n">content</span><span class="o">=</span><span class="s">"no-cache"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"cache-control"</span> <span class="n">content</span><span class="o">=</span><span class="s">"no-cache"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"expires"</span> <span class="n">content</span><span class="o">=</span><span class="s">"0"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"keywords"</span> <span class="n">content</span><span class="o">=</span><span class="s">"keyword1,keyword2,keyword3"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"description"</span> <span class="n">content</span><span class="o">=</span><span class="s">"This is my page"</span><span class="o">&gt;</span>
    <span class="o">&lt;!--</span>
    <span class="o">&lt;</span><span class="n">link</span> <span class="n">rel</span><span class="o">=</span><span class="s">"stylesheet"</span> <span class="n">type</span><span class="o">=</span><span class="s">"text/css"</span> <span class="n">href</span><span class="o">=</span><span class="s">"styles.css"</span><span class="o">&gt;</span>
    <span class="o">--&gt;</span>
<span class="o">&lt;/</span><span class="n">head</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">body</span> <span class="n">bgcolor</span><span class="o">=</span><span class="s">"ff9900"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">center</span><span class="o">&gt;</span>
    <span class="o">&lt;!--</span> <span class="err">引入一张图片</span> <span class="o">--&gt;</span>
    <span class="o">&lt;</span><span class="n">img</span> <span class="n">src</span><span class="o">=</span><span class="s">"imgs/1.gif"</span><span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="n">hr</span><span class="o">&gt;</span>
    <span class="o">&lt;%</span>
        <span class="nc">String</span> <span class="n">u</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"username"</span><span class="o">);</span>
        <span class="c1">//String pageNow=request.getParameter("pageNow");</span>
        <span class="c1">//String flag=request.getParameter("flag");</span>
    <span class="o">%&gt;</span>
    <span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="err">恭喜你</span> <span class="o">&lt;%=</span><span class="n">u</span> <span class="o">%&gt;</span><span class="err">，操作成功！</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;&lt;</span><span class="n">br</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s">"Main.jsp?username=&lt;%=u %&gt;"</span><span class="o">&gt;</span><span class="err">返回主界面</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span>
    <span class="o">&lt;!--</span>
        <span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s">"addUser.jsp?username=&lt;%=u %&gt;"</span><span class="o">&gt;</span><span class="err">返回上一页</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span>
        <span class="o">--&gt;</span>
    <span class="o">&lt;</span><span class="n">hr</span><span class="o">&gt;</span>
    <span class="o">&lt;!--</span> <span class="err">引入一张图片</span> <span class="o">--&gt;</span>
    <span class="o">&lt;</span><span class="n">img</span> <span class="n">src</span><span class="o">=</span><span class="s">"imgs/logo.gif"</span><span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="n">center</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</code></pre></div></div> <p><strong>操作失败界面_UserManageSys2/WebRoot/WEB-INF/err.jsp</strong><br /> <img src="https://raw.githubusercontent.com/luowei/list/gh-pages/images/java/base/article_54.jpg" alt="操作失败界面" /></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;!--</span> <span class="err">登录界面</span> <span class="o">--&gt;</span>
<span class="o">&lt;%</span><span class="err">@</span> <span class="n">page</span> <span class="n">language</span><span class="o">=</span><span class="s">"java"</span> <span class="kn">import</span><span class="err">="</span><span class="nn">java.util.*</span><span class="s">" pageEncoding="</span><span class="n">gb2312</span><span class="s">"%&gt;
&lt;%
    String path = request.getContextPath();
    String basePath = request.getScheme()+"</span><span class="o">:</span><span class="c1">//"+request.getServerName()+":"+request.getServerPort()+path+"/";</span>
<span class="o">%&gt;</span>
<span class="o">&lt;!</span><span class="no">DOCTYPE</span> <span class="no">HTML</span> <span class="no">PUBLIC</span> <span class="s">"-//W3C//DTD HTML 4.01 Transitional//EN"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">head</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">base</span> <span class="n">href</span><span class="o">=</span><span class="s">"&lt;%=basePath%&gt;"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span><span class="nc">My</span> <span class="no">JSP</span> <span class="err">'</span><span class="n">login</span><span class="o">.</span><span class="na">jsp</span><span class="err">'</span> <span class="n">starting</span> <span class="n">page</span><span class="o">&lt;/</span><span class="n">title</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"pragma"</span> <span class="n">content</span><span class="o">=</span><span class="s">"no-cache"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"cache-control"</span> <span class="n">content</span><span class="o">=</span><span class="s">"no-cache"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"expires"</span> <span class="n">content</span><span class="o">=</span><span class="s">"0"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"keywords"</span> <span class="n">content</span><span class="o">=</span><span class="s">"keyword1,keyword2,keyword3"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"description"</span> <span class="n">content</span><span class="o">=</span><span class="s">"This is my page"</span><span class="o">&gt;</span>
    <span class="o">&lt;!--</span>
    <span class="o">&lt;</span><span class="n">link</span> <span class="n">rel</span><span class="o">=</span><span class="s">"stylesheet"</span> <span class="n">type</span><span class="o">=</span><span class="s">"text/css"</span> <span class="n">href</span><span class="o">=</span><span class="s">"styles.css"</span><span class="o">&gt;</span>
    <span class="o">--&gt;</span>
<span class="o">&lt;/</span><span class="n">head</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">body</span> <span class="n">bgcolor</span><span class="o">=</span><span class="s">"ff9900"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">center</span><span class="o">&gt;</span>
    <span class="o">&lt;!--</span> <span class="err">引入一张图片</span> <span class="o">--&gt;</span>
    <span class="o">&lt;</span><span class="n">img</span> <span class="n">src</span><span class="o">=</span><span class="s">"imgs/1.gif"</span><span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="n">hr</span><span class="o">&gt;</span>
    <span class="o">&lt;%</span>
        <span class="nc">String</span> <span class="n">u</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"username"</span><span class="o">);</span>
        <span class="c1">//String pageNow=request.getParameter("pageNow");</span>
        <span class="c1">//String flag=request.getParameter("flag");</span>
    <span class="o">%&gt;</span>
    <span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="err">操作不成功！</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;&lt;</span><span class="n">br</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s">"Main.jsp?username=&lt;%=u %&gt;"</span><span class="o">&gt;</span><span class="err">返回主界面</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span>
    <span class="o">&lt;!--</span>
        <span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s">"addUser.jsp?username=&lt;%=u %&gt;"</span><span class="o">&gt;</span><span class="err">返回上一页</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span>
        <span class="o">--&gt;</span>
    <span class="o">&lt;</span><span class="n">hr</span><span class="o">&gt;</span>
    <span class="o">&lt;!--</span> <span class="err">引入一张图片</span> <span class="o">--&gt;</span>
    <span class="o">&lt;</span><span class="n">img</span> <span class="n">src</span><span class="o">=</span><span class="s">"imgs/logo.gif"</span><span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="n">center</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</code></pre></div></div> <h3 id="控制器层controller层">控制器层(controller层)</h3> <p><strong>登录处理_UserManageSys2/ src/user.controller/LoginClServer.java</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * 这是一个控制器，主要完成对用户身份的验证
 * 控制器本身是不会去完成业务逻辑，它主要是去调用模型完成对数据的处理
 */</span>
<span class="kn">package</span> <span class="n">user</span><span class="o">.</span><span class="na">controller</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">user.model.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.PrintWriter</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.ServletException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServlet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServletRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServletResponse</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LoginClServlet</span> <span class="kd">extends</span> <span class="nc">HttpServlet</span> <span class="o">{</span>
    <span class="cm">/**
     * The doGet method of the servlet. &lt;br&gt;
     *
     * This method is called when a form has its tag value method equals to get.
     *
     * @param request the request send by the client to the server
     * @param response the response send by the server to the client
     * @throws ServletException if an error occurred
     * @throws IOException if an error occurred
     */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">doGet</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span>
            <span class="kd">throws</span> <span class="nc">ServletException</span><span class="o">,</span> <span class="nc">IOException</span> <span class="o">{</span>
        <span class="c1">//得到用户名和密码</span>
        <span class="nc">String</span> <span class="n">u</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"username"</span><span class="o">);</span>
        <span class="c1">//u=new String(u.getBytes("iso-8859-1"),"gb2312");//将用户名转码，解决中文乱码而导致的验证错误</span>
        <span class="nc">String</span> <span class="n">p</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"passwd"</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"username="</span><span class="o">+</span><span class="n">u</span><span class="o">+</span><span class="s">" password="</span><span class="o">+</span><span class="n">p</span><span class="o">);</span>
        <span class="c1">//使用模型(UserBeanCl)，完成对用户的验证</span>
        <span class="c1">//1.创建一个UserBeanCl对象</span>
        <span class="nc">UserBeanCl</span> <span class="n">ubc</span><span class="o">=</span><span class="k">new</span> <span class="nc">UserBeanCl</span><span class="o">();</span>
        <span class="c1">//调用方法</span>
        <span class="k">if</span><span class="o">(</span><span class="n">ubc</span><span class="o">.</span><span class="na">checkUser</span><span class="o">(</span><span class="n">u</span><span class="o">,</span> <span class="n">p</span><span class="o">))</span>
        <span class="o">{</span>
            <span class="c1">//System.out.println("使用了servlet控制器完成验证！");</span>
            <span class="c1">//在跳转到wel.jsp页面时，就把要显示的数据给wel.jsp准备好</span>
            <span class="nc">ArrayList</span> <span class="n">al</span><span class="o">=</span><span class="n">ubc</span><span class="o">.</span><span class="na">getUserByPage</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
            <span class="kt">int</span> <span class="n">pageCount</span><span class="o">=</span><span class="n">ubc</span><span class="o">.</span><span class="na">getPageCount</span><span class="o">();</span>
            <span class="kt">int</span> <span class="n">pageSize</span><span class="o">=</span><span class="n">ubc</span><span class="o">.</span><span class="na">getPageSize</span><span class="o">();</span>
            <span class="c1">//将al,pageCount,pageNow,pageSize放入request当中</span>
            <span class="n">request</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"result"</span><span class="o">,</span> <span class="n">al</span><span class="o">);</span>
            <span class="n">request</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"pageCount"</span><span class="o">,</span> <span class="n">pageCount</span><span class="o">+</span><span class="s">""</span><span class="o">);</span>
            <span class="c1">//因为第二个参数是对象，用int直接传递，后边使用时不好处理，所以把它转成String</span>
            <span class="n">request</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"pageSize"</span><span class="o">,</span> <span class="n">pageSize</span><span class="o">+</span><span class="s">""</span><span class="o">);</span>
            <span class="n">request</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"pageNow"</span><span class="o">,</span> <span class="s">"1"</span><span class="o">);</span>
            <span class="c1">//合法</span>
            <span class="c1">//response.sendRedirect("wel.jsp?username="+u);</span>
            <span class="c1">//因为sendRedirect方法效率不高，所以一般多是用转发的方法</span>
            <span class="c1">//将用户名放入session,以备后用</span>
            <span class="n">request</span><span class="o">.</span><span class="na">getSession</span><span class="o">().</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"myName"</span><span class="o">,</span> <span class="n">u</span><span class="o">);</span>
            <span class="c1">//这种方法的效率高，同时保证了request中的原有对象还可以在下一面页使用</span>
            <span class="c1">//所以就不需要加(?username="+u)了</span>
            <span class="n">request</span><span class="o">.</span><span class="na">getRequestDispatcher</span><span class="o">(</span><span class="s">"Main.jsp"</span><span class="o">).</span><span class="na">forward</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
        <span class="o">}</span><span class="k">else</span>
        <span class="o">{</span>
            <span class="c1">//不合法</span>
            <span class="n">request</span><span class="o">.</span><span class="na">getRequestDispatcher</span><span class="o">(</span><span class="s">"login.jsp"</span><span class="o">).</span><span class="na">forward</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"LoginClServlet验证不合法"</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="cm">/**
     * The doPost method of the servlet. &lt;br&gt;
     *
     * This method is called when a form has its tag value method equals to post.
     *
     * @param request the request send by the client to the server
     * @param response the response send by the server to the client
     * @throws ServletException if an error occurred
     * @throws IOException if an error occurred
     */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">doPost</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span>
            <span class="kd">throws</span> <span class="nc">ServletException</span><span class="o">,</span> <span class="nc">IOException</span> <span class="o">{</span>
        <span class="c1">//合二为一</span>
        <span class="k">this</span><span class="o">.</span><span class="na">doGet</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p><strong>处理用户的服务_UserManageSys2/ src/user.controller/UserClServer.java</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * 这个控制器，将处理用户的分页显示，用户的删除，修改，添加
 */</span>
<span class="kn">package</span> <span class="n">user</span><span class="o">.</span><span class="na">controller</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.PrintWriter</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.ServletException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServlet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServletRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServletResponse</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">user.model.*</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserClServlet</span> <span class="kd">extends</span> <span class="nc">HttpServlet</span> <span class="o">{</span>
    <span class="cm">/**
     * The doGet method of the servlet. &lt;br&gt;
     *
     * This method is called when a form has its tag value method equals to get.
     *
     * @param request the request send by the client to the server
     * @param response the response send by the server to the client
     * @throws ServletException if an error occurred
     * @throws IOException if an error occurred
     */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">doGet</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span>
            <span class="kd">throws</span> <span class="nc">ServletException</span><span class="o">,</span> <span class="nc">IOException</span> <span class="o">{</span>
        <span class="c1">//获得标志</span>
        <span class="nc">String</span> <span class="n">flag</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"flag"</span><span class="o">);</span>
        <span class="k">if</span><span class="o">(</span><span class="n">flag</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"fenye"</span><span class="o">))</span> <span class="c1">//如果是分页</span>
        <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="c1">//得到用户希望显示的信息</span>
                <span class="kt">int</span> <span class="n">pageNow</span><span class="o">=</span><span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"pageNow"</span><span class="o">));</span>
                <span class="nc">String</span> <span class="n">u</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"username"</span><span class="o">);</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"UserClServlet得到的username="</span><span class="o">+</span><span class="n">u</span><span class="o">);</span>
                <span class="c1">//调用UserBeanCl</span>
                <span class="nc">UserBeanCl</span> <span class="n">ubc</span><span class="o">=</span><span class="k">new</span> <span class="nc">UserBeanCl</span><span class="o">();</span>
                <span class="c1">//在跳转到wel.jsp页面时，就把要显示的数据给wel.jsp准备好</span>
                <span class="nc">ArrayList</span> <span class="n">al</span><span class="o">=</span><span class="n">ubc</span><span class="o">.</span><span class="na">getUserByPage</span><span class="o">(</span><span class="n">pageNow</span><span class="o">);</span> <span class="c1">//经UserBeanCl处理后，获得当前页的数据</span>
                <span class="kt">int</span> <span class="n">pageCount</span><span class="o">=</span><span class="n">ubc</span><span class="o">.</span><span class="na">getPageCount</span><span class="o">();</span>
                <span class="kt">int</span> <span class="n">pageSize</span><span class="o">=</span><span class="n">ubc</span><span class="o">.</span><span class="na">getPageSize</span><span class="o">();</span>
                <span class="c1">//将al,pageCount,pageNow,pageSize放入request当中</span>
                <span class="n">request</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"result"</span><span class="o">,</span> <span class="n">al</span><span class="o">);</span>
                <span class="n">request</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"pageCount"</span><span class="o">,</span> <span class="n">pageCount</span><span class="o">+</span><span class="s">""</span><span class="o">);</span>
                <span class="c1">//因为第二个参数是对象，用int直接传递，后边使用时不好处理，所以把它转成String</span>
                <span class="n">request</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"pageSize"</span><span class="o">,</span> <span class="n">pageSize</span><span class="o">+</span><span class="s">""</span><span class="o">);</span>
                <span class="n">request</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"username"</span><span class="o">,</span> <span class="n">u</span><span class="o">);</span>
                <span class="n">request</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"pageNow"</span><span class="o">,</span> <span class="n">pageNow</span><span class="o">+</span><span class="s">""</span><span class="o">);</span>
                <span class="c1">//重新跳转回wel.jsp</span>
                <span class="n">request</span><span class="o">.</span><span class="na">getRequestDispatcher</span><span class="o">(</span><span class="s">"wel.jsp"</span><span class="o">).</span><span class="na">forward</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span><span class="k">else</span> <span class="k">if</span><span class="o">(</span><span class="n">flag</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"delUser"</span><span class="o">))</span> <span class="c1">//如果是删除</span>
        <span class="o">{</span>
            <span class="c1">//完成删除</span>
            <span class="c1">//1.得到要删除的用户的id</span>
            <span class="nc">String</span> <span class="n">userId</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"userid"</span><span class="o">);</span>
            <span class="c1">//创建UserBeanCl</span>
            <span class="nc">UserBeanCl</span> <span class="n">ubc</span><span class="o">=</span><span class="k">new</span> <span class="nc">UserBeanCl</span><span class="o">();</span>
            <span class="k">if</span><span class="o">(</span><span class="n">ubc</span><span class="o">.</span><span class="na">delUserById</span><span class="o">(</span><span class="n">userId</span><span class="o">))</span>
            <span class="o">{</span>
                <span class="c1">//删除成功</span>
                <span class="n">request</span><span class="o">.</span><span class="na">getRequestDispatcher</span><span class="o">(</span><span class="s">"suc.jsp"</span><span class="o">).</span><span class="na">forward</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
            <span class="o">}</span><span class="k">else</span>
            <span class="o">{</span>
                <span class="c1">//删除失败</span>
                <span class="n">request</span><span class="o">.</span><span class="na">getRequestDispatcher</span><span class="o">(</span><span class="s">"err.jsp"</span><span class="o">).</span><span class="na">forward</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span><span class="k">else</span> <span class="k">if</span><span class="o">(</span><span class="n">flag</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"addUser"</span><span class="o">))</span> <span class="c1">//如果是添加</span>
        <span class="o">{</span>
            <span class="c1">//完成添加用户</span>
            <span class="c1">//1.得到用户输入的信息</span>
            <span class="nc">String</span> <span class="n">name</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"userName"</span><span class="o">);</span>
            <span class="nc">String</span> <span class="n">passwd</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"password"</span><span class="o">);</span>
            <span class="nc">String</span> <span class="n">email</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"email"</span><span class="o">);</span>
            <span class="nc">String</span> <span class="n">grade</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"grade"</span><span class="o">);</span>
            <span class="c1">//创建UserBeanCl</span>
            <span class="nc">UserBeanCl</span> <span class="n">ubc</span><span class="o">=</span><span class="k">new</span> <span class="nc">UserBeanCl</span><span class="o">();</span>
            <span class="k">if</span><span class="o">(</span><span class="n">ubc</span><span class="o">.</span><span class="na">addUser</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="n">passwd</span><span class="o">,</span> <span class="n">email</span><span class="o">,</span> <span class="n">grade</span><span class="o">))</span>
            <span class="o">{</span>
                <span class="c1">//添加成功</span>
                <span class="n">request</span><span class="o">.</span><span class="na">getRequestDispatcher</span><span class="o">(</span><span class="s">"suc.jsp"</span><span class="o">).</span><span class="na">forward</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
            <span class="o">}</span><span class="k">else</span>
            <span class="o">{</span>
                <span class="c1">//添加失败</span>
                <span class="n">request</span><span class="o">.</span><span class="na">getRequestDispatcher</span><span class="o">(</span><span class="s">"err.jsp"</span><span class="o">).</span><span class="na">forward</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span><span class="k">else</span> <span class="k">if</span><span class="o">(</span><span class="n">flag</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"updateUser"</span><span class="o">))</span> <span class="c1">//如果是修改</span>
        <span class="o">{</span>
            <span class="c1">//完成添加用户</span>
            <span class="c1">//1.得到用户输入的信息</span>
            <span class="nc">String</span> <span class="n">id</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"userId"</span><span class="o">);</span>
            <span class="nc">String</span> <span class="n">name</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"userName"</span><span class="o">);</span>
            <span class="nc">String</span> <span class="n">passwd</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"passWd"</span><span class="o">);</span>
            <span class="nc">String</span> <span class="n">email</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"email"</span><span class="o">);</span>
            <span class="nc">String</span> <span class="n">grade</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"grade"</span><span class="o">);</span>
            <span class="c1">//创建UserBeanCl</span>
            <span class="nc">UserBeanCl</span> <span class="n">ubc</span><span class="o">=</span><span class="k">new</span> <span class="nc">UserBeanCl</span><span class="o">();</span>
            <span class="k">if</span><span class="o">(</span><span class="n">ubc</span><span class="o">.</span><span class="na">updateUser</span><span class="o">(</span><span class="n">id</span><span class="o">,</span><span class="n">name</span><span class="o">,</span> <span class="n">passwd</span><span class="o">,</span> <span class="n">email</span><span class="o">,</span> <span class="n">grade</span><span class="o">))</span>
            <span class="o">{</span>
                <span class="c1">//修改成功</span>
                <span class="n">request</span><span class="o">.</span><span class="na">getRequestDispatcher</span><span class="o">(</span><span class="s">"suc.jsp"</span><span class="o">).</span><span class="na">forward</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
            <span class="o">}</span><span class="k">else</span>
            <span class="o">{</span>
                <span class="c1">//修改失败</span>
                <span class="n">request</span><span class="o">.</span><span class="na">getRequestDispatcher</span><span class="o">(</span><span class="s">"err.jsp"</span><span class="o">).</span><span class="na">forward</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="cm">/**
     * The doPost method of the servlet. &lt;br&gt;
     *
     * This method is called when a form has its tag value method equals to post.
     *
     * @param request the request send by the client to the server
     * @param response the response send by the server to the client
     * @throws ServletException if an error occurred
     * @throws IOException if an error occurred
     */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">doPost</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span>
            <span class="kd">throws</span> <span class="nc">ServletException</span><span class="o">,</span> <span class="nc">IOException</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">doGet</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h3 id="业务逻辑层model层">业务逻辑层(model层)</h3> <p><strong>Users表_UserManageSys2/src/user.model/UserBean.java</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * 这是一个javabean,对应user表，代表数据
 * 他的一个实例(对象),对应users的一条
 */</span>
<span class="kn">package</span> <span class="n">user</span><span class="o">.</span><span class="na">model</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserBean</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getUserId</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">userId</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setUserId</span><span class="o">(</span><span class="kt">int</span> <span class="n">userId</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">userId</span> <span class="o">=</span> <span class="n">userId</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getUsername</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">username</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setUsername</span><span class="o">(</span><span class="nc">String</span> <span class="n">username</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">username</span> <span class="o">=</span> <span class="n">username</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getPasswd</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">passwd</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setPasswd</span><span class="o">(</span><span class="nc">String</span> <span class="n">passwd</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">passwd</span> <span class="o">=</span> <span class="n">passwd</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getEmail</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">email</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setEmail</span><span class="o">(</span><span class="nc">String</span> <span class="n">email</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">email</span> <span class="o">=</span> <span class="n">email</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getGrade</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">grade</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setGrade</span><span class="o">(</span><span class="kt">int</span> <span class="n">grade</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">grade</span> <span class="o">=</span> <span class="n">grade</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">userId</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">username</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">passwd</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">email</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">grade</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div> <p><strong>表处理_UserManageSys2/ src/user.model/UserBeanCl.java</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * 这是一个处理类，有些人把它叫做BO,主要是封装对user表的各种操作，(主要
 * 是增，删，修，查...)
 */</span>
<span class="kn">package</span> <span class="n">user</span><span class="o">.</span><span class="na">model</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.UnsupportedEncodingException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserBeanCl</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">Statement</span> <span class="n">sm</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">ResultSet</span> <span class="n">rs</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">Connection</span> <span class="n">ct</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">pageSize</span><span class="o">=</span><span class="mi">5</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getPageSize</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">pageSize</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">rowCount</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span> <span class="c1">//行数</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">pageCount</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="c1">//页数</span>
    <span class="cm">/**
     * 验证用户是否存在
     * @param u
     * @param p
     * @return
     */</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">checkUser</span><span class="o">(</span><span class="nc">String</span> <span class="n">u</span><span class="o">,</span><span class="nc">String</span> <span class="n">p</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="kt">boolean</span> <span class="n">b</span><span class="o">=</span><span class="kc">false</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">//到数据库去验证</span>
            <span class="n">ct</span><span class="o">=</span><span class="k">new</span> <span class="nc">ConnDB</span><span class="o">().</span><span class="na">getConn</span><span class="o">();</span>
            <span class="c1">//3.创建Statement</span>
            <span class="nc">Statement</span> <span class="n">sm</span><span class="o">=</span><span class="n">ct</span><span class="o">.</span><span class="na">createStatement</span><span class="o">();</span>
            <span class="c1">//4.查询</span>
            <span class="nc">ResultSet</span> <span class="n">rs</span><span class="o">=</span><span class="n">sm</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">(</span><span class="s">"select passwd from users where username='"</span><span class="o">+</span><span class="n">u</span><span class="o">+</span><span class="s">"'"</span><span class="o">);</span>
            <span class="c1">//验证</span>
            <span class="k">if</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span>
            <span class="o">{</span>
                <span class="c1">//到此说明输入的用户名存在</span>
                <span class="k">if</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">1</span><span class="o">).</span><span class="na">equals</span><span class="o">(</span><span class="n">p</span><span class="o">))</span>
                <span class="o">{</span>
                    <span class="n">b</span><span class="o">=</span><span class="kc">true</span><span class="o">;</span>
                    <span class="c1">//合法，跳转wel.jsp</span>
                    <span class="c1">//如何将loginCl.jsp得到的数据传到下一个页面</span>
                    <span class="c1">//1.cookie 2.session 3.response.sendRedirect</span>
                    <span class="c1">//response.sendRedirect("wel.jsp?user="+u);//将用户发送过去</span>
                <span class="o">}</span><span class="k">else</span>
                <span class="o">{</span>
                    <span class="c1">//密码错误</span>
                <span class="o">}</span>
            <span class="o">}</span><span class="k">else</span>
            <span class="o">{</span>
                <span class="c1">//用户名错误</span>
                <span class="c1">//不合法，跳转到login.jsp</span>
                <span class="c1">//response.sendRedirect("login.jsp?errNo=1");</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span><span class="k">finally</span><span class="o">{</span>
            <span class="c1">//关闭打开的各种资源</span>
            <span class="k">this</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">b</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="cm">/**添加用户
     * @author luowei
     * @param name:用户名
     * @param passwd:密码
     * @param email:电子邮件
     * @param grade:级别
     * @return boolean
     */</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">addUser</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">,</span><span class="nc">String</span> <span class="n">passwd</span><span class="o">,</span><span class="nc">String</span> <span class="n">email</span><span class="o">,</span><span class="nc">String</span> <span class="n">grade</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="kt">boolean</span> <span class="n">b</span><span class="o">=</span><span class="kc">false</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">//得到连接</span>
            <span class="n">ct</span><span class="o">=</span><span class="k">new</span> <span class="nc">ConnDB</span><span class="o">().</span><span class="na">getConn</span><span class="o">();</span>
            <span class="n">sm</span><span class="o">=</span><span class="n">ct</span><span class="o">.</span><span class="na">createStatement</span><span class="o">();</span>
            <span class="c1">//执行</span>
            <span class="kt">int</span> <span class="n">a</span><span class="o">=</span><span class="n">sm</span><span class="o">.</span><span class="na">executeUpdate</span><span class="o">(</span><span class="s">"insert into users(username,passwd,email,grade) "</span>
                    <span class="o">+</span><span class="s">"values('"</span><span class="o">+</span><span class="n">name</span><span class="o">+</span><span class="s">"','"</span><span class="o">+</span><span class="n">passwd</span><span class="o">+</span><span class="s">"','"</span><span class="o">+</span><span class="n">email</span><span class="o">+</span><span class="s">"','"</span><span class="o">+</span><span class="n">grade</span><span class="o">+</span><span class="s">"') "</span><span class="o">);</span>
            <span class="k">if</span><span class="o">(</span><span class="n">a</span><span class="o">==</span><span class="mi">1</span><span class="o">)</span> <span class="c1">//1表示是否是成功的添加了1条记录</span>
            <span class="o">{</span>
                <span class="c1">//添加成功</span>
                <span class="n">b</span><span class="o">=</span><span class="kc">true</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">b</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="cm">/**
     * 修改用户
     * @author luowei
     *
     */</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">updateUser</span><span class="o">(</span><span class="nc">String</span> <span class="n">id</span><span class="o">,</span><span class="nc">String</span> <span class="n">name</span><span class="o">,</span><span class="nc">String</span> <span class="n">passwd</span><span class="o">,</span><span class="nc">String</span> <span class="n">email</span><span class="o">,</span><span class="nc">String</span> <span class="n">grade</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="kt">boolean</span> <span class="n">b</span><span class="o">=</span><span class="kc">false</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">//得到连接</span>
            <span class="n">ct</span><span class="o">=</span><span class="k">new</span> <span class="nc">ConnDB</span><span class="o">().</span><span class="na">getConn</span><span class="o">();</span>
            <span class="n">sm</span><span class="o">=</span><span class="n">ct</span><span class="o">.</span><span class="na">createStatement</span><span class="o">();</span>
            <span class="c1">//执行</span>
            <span class="kt">int</span> <span class="n">a</span><span class="o">=</span><span class="n">sm</span><span class="o">.</span><span class="na">executeUpdate</span><span class="o">(</span><span class="s">"update users set username='"</span><span class="o">+</span><span class="n">name</span><span class="o">+</span><span class="s">"',passwd='"</span><span class="o">+</span><span class="n">passwd</span><span class="o">+</span><span class="s">"',email='"</span>
                    <span class="o">+</span><span class="n">email</span><span class="o">+</span><span class="s">"',grade='"</span><span class="o">+</span><span class="n">grade</span><span class="o">+</span><span class="s">"' where useId='"</span><span class="o">+</span><span class="n">id</span><span class="o">+</span><span class="s">"'"</span><span class="o">);</span>
            <span class="k">if</span><span class="o">(</span><span class="n">a</span><span class="o">==</span><span class="mi">1</span><span class="o">)</span> <span class="c1">//1表示是否是成功的修改了1条记录</span>
            <span class="o">{</span>
                <span class="c1">//修改成功</span>
                <span class="n">b</span><span class="o">=</span><span class="kc">true</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">b</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="cm">/**删除用户
     * @author luowei
     */</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">delUserById</span><span class="o">(</span><span class="nc">String</span> <span class="n">id</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="kt">boolean</span> <span class="n">b</span><span class="o">=</span><span class="kc">false</span><span class="o">;</span>
        <span class="c1">//int Id=Integer.parseInt(id);</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">//得到连接</span>
            <span class="n">ct</span><span class="o">=</span><span class="k">new</span> <span class="nc">ConnDB</span><span class="o">().</span><span class="na">getConn</span><span class="o">();</span>
            <span class="n">sm</span><span class="o">=</span><span class="n">ct</span><span class="o">.</span><span class="na">createStatement</span><span class="o">();</span>
            <span class="c1">//执行</span>
            <span class="kt">int</span> <span class="n">a</span><span class="o">=</span><span class="n">sm</span><span class="o">.</span><span class="na">executeUpdate</span><span class="o">(</span><span class="s">"delete from users where useId='"</span><span class="o">+</span><span class="n">id</span><span class="o">+</span><span class="s">"'"</span><span class="o">);</span>
            <span class="k">if</span><span class="o">(</span><span class="n">a</span><span class="o">==</span><span class="mi">1</span><span class="o">)</span>
            <span class="o">{</span>
                <span class="c1">//删除成功</span>
                <span class="n">b</span><span class="o">=</span><span class="kc">true</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span><span class="k">finally</span><span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">b</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="cm">/**
     * @author luowei
     * @return 返回分页的总页数
     */</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getPageCount</span><span class="o">()</span>
    <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">//得到连接</span>
            <span class="n">ct</span><span class="o">=</span><span class="k">new</span> <span class="nc">ConnDB</span><span class="o">().</span><span class="na">getConn</span><span class="o">();</span>
            <span class="c1">//3.创建Statement</span>
            <span class="nc">Statement</span> <span class="n">sm</span><span class="o">=</span><span class="n">ct</span><span class="o">.</span><span class="na">createStatement</span><span class="o">();</span>
            <span class="c1">//4.查询</span>
            <span class="nc">ResultSet</span> <span class="n">rs</span><span class="o">=</span><span class="n">sm</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">(</span><span class="s">"select count(*) from users"</span><span class="o">);</span>
            <span class="k">if</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span><span class="c1">//将游标从第0条记录移到第1条记录，并判断是否为空</span>
            <span class="o">{</span>
                <span class="n">rowCount</span><span class="o">=</span><span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="c1">//计算</span>
            <span class="k">if</span><span class="o">(</span><span class="n">rowCount</span><span class="o">%</span><span class="n">pageSize</span><span class="o">==</span><span class="mi">0</span><span class="o">)</span>
            <span class="o">{</span>
                <span class="n">pageCount</span><span class="o">=</span><span class="n">rowCount</span><span class="o">/</span><span class="n">pageSize</span><span class="o">;</span>
            <span class="o">}</span><span class="k">else</span>
            <span class="o">{</span>
                <span class="n">pageCount</span><span class="o">=</span><span class="n">rowCount</span><span class="o">/</span><span class="n">pageSize</span><span class="o">+</span><span class="mi">1</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span><span class="k">finally</span>
        <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">pageCount</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="cm">/**得到用户需要显示的用户信息(分页)
     * @author luowei
     * @param 当前页
     * @return
     */</span>
    <span class="kd">public</span> <span class="nc">ArrayList</span> <span class="nf">getUserByPage</span><span class="o">(</span><span class="kt">int</span> <span class="n">pageNow</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="nc">ArrayList</span> <span class="n">al</span><span class="o">=</span><span class="k">new</span> <span class="nc">ArrayList</span><span class="o">();</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">//得到连接</span>
            <span class="n">ct</span><span class="o">=</span><span class="k">new</span> <span class="nc">ConnDB</span><span class="o">().</span><span class="na">getConn</span><span class="o">();</span>
            <span class="c1">//3.创建Statement</span>
            <span class="nc">Statement</span> <span class="n">sm</span><span class="o">=</span><span class="n">ct</span><span class="o">.</span><span class="na">createStatement</span><span class="o">();</span>
            <span class="c1">//查询出需要显示的记录</span>
            <span class="n">rs</span><span class="o">=</span><span class="n">sm</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">(</span><span class="s">"select * from users order by useId limit "</span><span class="o">+(</span><span class="n">pageSize</span><span class="o">*(</span><span class="n">pageNow</span><span class="o">-</span><span class="mi">1</span><span class="o">))+</span><span class="s">","</span><span class="o">+</span><span class="n">pageSize</span><span class="o">);</span>
            <span class="c1">//开始将rs封装到ArrayList</span>
            <span class="k">while</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span>
            <span class="o">{</span>
                <span class="nc">UserBean</span> <span class="n">ub</span><span class="o">=</span><span class="k">new</span> <span class="nc">UserBean</span><span class="o">();</span>
                <span class="n">ub</span><span class="o">.</span><span class="na">setUserId</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="mi">1</span><span class="o">));</span>
                <span class="n">ub</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">2</span><span class="o">));</span>
                <span class="n">ub</span><span class="o">.</span><span class="na">setPasswd</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">3</span><span class="o">));</span>
                <span class="n">ub</span><span class="o">.</span><span class="na">setEmail</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">4</span><span class="o">));</span>
                <span class="n">ub</span><span class="o">.</span><span class="na">setGrade</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="mi">5</span><span class="o">));</span>
                <span class="n">al</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">ub</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span><span class="k">finally</span><span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">al</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="cm">/**@author luowei
     * @see关闭资源
     * @return null
     *
     */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">close</span><span class="o">()</span>
    <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="k">if</span><span class="o">(</span><span class="n">rs</span><span class="o">!=</span><span class="kc">null</span><span class="o">)</span>
            <span class="o">{</span>
                <span class="n">rs</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
                <span class="n">rs</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="k">if</span><span class="o">(</span><span class="n">sm</span><span class="o">!=</span><span class="kc">null</span><span class="o">)</span>
            <span class="o">{</span>
                <span class="n">sm</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
                <span class="n">sm</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="k">if</span><span class="o">(</span><span class="n">ct</span><span class="o">!=</span><span class="kc">null</span><span class="o">)</span>
            <span class="o">{</span>
                <span class="n">ct</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
                <span class="n">ct</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p><strong>工具类_UserManageSys2/ src/user.model/Tools.java</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * 工具类
 */</span>
<span class="kn">package</span> <span class="n">user</span><span class="o">.</span><span class="na">model</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Tools</span> <span class="o">{</span>
    <span class="cm">/**提供一个方法，将乱码转成gb2312,gbk,utf-8
     *
     * @param input
     * @return
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getNewString</span><span class="o">(</span><span class="nc">String</span> <span class="n">input</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="nc">String</span> <span class="n">result</span><span class="o">=</span><span class="s">""</span><span class="o">;</span>
        <span class="k">try</span><span class="o">{</span>
            <span class="n">result</span><span class="o">=</span><span class="k">new</span> <span class="nc">String</span><span class="o">(</span><span class="n">input</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="s">"gb2312"</span><span class="o">),</span><span class="s">"iso-8859-1"</span><span class="o">);</span>
        <span class="o">}</span><span class="k">catch</span><span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span>
        <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p><strong>连接数据库_UserManageSys2/ src/user.model/ConnDB.java</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * 得到数据库的连接
 */</span>
<span class="kn">package</span> <span class="n">user</span><span class="o">.</span><span class="na">model</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.*</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ConnDB</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">Connection</span> <span class="n">ct</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
    <span class="kd">public</span> <span class="nc">Connection</span> <span class="nf">getConn</span><span class="o">()</span>
    <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">//1.加载驱动</span>
            <span class="nc">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">"org.gjt.mm.mysql.Driver"</span><span class="o">).</span><span class="na">newInstance</span><span class="o">();</span>
            <span class="c1">//Class.forName("com.microsoft.jdbc.sqlserver.SQLServerDriver").newInstance();</span>
            <span class="c1">//2.得到连接</span>
            <span class="n">ct</span><span class="o">=</span><span class="nc">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="s">"jdbc:mysql://localhost:3306/test_user"</span><span class="o">,</span><span class="s">"root"</span><span class="o">,</span><span class="s">"root"</span><span class="o">);</span>
            <span class="c1">//ct=DriverManager.getConnection("jdbc:microsoft:sqlserver://localhost:1433;databaseName=testusr","sa","luowei");</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">ct</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p><span class="site-footer-credits">版权所有，转载请注明出处 <a href="https://luowei.github.io/list">luowei.github.io</a>.</span></p> <link rel="stylesheet" href="/list/assets/css/font-awesome.min.css?ver=20151122" /> <!--[if IE 7 ]><link rel="stylesheet" href="/list/assets/css/font-awesome-ie7.min.css?ver=20151122"><![endif]--> <div style="float: right"> <span id="share"> <a class="wechat" target="_blank" title="分享到微信" href="https://chart.apis.google.com/chart?cht=qr&amp;chs=300x300&amp;chl=/list/docs/java/2011-06-18-Java%E5%9F%BA%E7%A1%8013%E4%B9%8BJSP%E4%B8%8EMVC%E6%A8%A1%E5%BC%8F%E5%BC%80%E5%8F%91%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F.html"><i class="icon-large icon-wechat"></i></a> <a class="weibo" target="_blank" title="分享到微博" href="http://service.weibo.com/share/share.php?title=Java-Java基础13之JSP与MVC模式开发用户管理系统 - 知不知&amp;url=/list/docs/java/2011-06-18-Java%E5%9F%BA%E7%A1%8013%E4%B9%8BJSP%E4%B8%8EMVC%E6%A8%A1%E5%BC%8F%E5%BC%80%E5%8F%91%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F.html&amp;type=3&amp;searchPic=1"><i class="icon-large icon-weibo"></i></a> <a class="qzone" target="_blank" title="分享到 QQ 空间" href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=/list/docs/java/2011-06-18-Java%E5%9F%BA%E7%A1%8013%E4%B9%8BJSP%E4%B8%8EMVC%E6%A8%A1%E5%BC%8F%E5%BC%80%E5%8F%91%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F.html&amp;title=Java-Java基础13之JSP与MVC模式开发用户管理系统 - 知不知&amp;summary=使用JSP+JavaBean模式与MVC模式开发用户管理系统&amp;site=/list"><i class="icon-large icon-qzone"></i></a> <a class="twitter" target="_blank" title="Share to Twitter" href="https://twitter.com/intent/tweet?url=/list/docs/java/2011-06-18-Java%E5%9F%BA%E7%A1%8013%E4%B9%8BJSP%E4%B8%8EMVC%E6%A8%A1%E5%BC%8F%E5%BC%80%E5%8F%91%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F.html&amp;text=Java-Java基础13之JSP与MVC模式开发用户管理系统 - 知不知&amp;via=luowei010101"><i class="icon-large icon-twitter"></i></a> <a class="facebook" target="_blank" title="Share to Facebook" href="https://www.facebook.com/sharer.php?u=/list/docs/java/2011-06-18-Java%E5%9F%BA%E7%A1%8013%E4%B9%8BJSP%E4%B8%8EMVC%E6%A8%A1%E5%BC%8F%E5%BC%80%E5%8F%91%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F.html&amp;t=Java-Java基础13之JSP与MVC模式开发用户管理系统 - 知不知"><i class="icon-large icon-facebook-sign"></i></a> <a class="googleplus" target="_blank" title="Share to Google+" href="https://plus.google.com/share?url=/list/docs/java/2011-06-18-Java%E5%9F%BA%E7%A1%8013%E4%B9%8BJSP%E4%B8%8EMVC%E6%A8%A1%E5%BC%8F%E5%BC%80%E5%8F%91%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F.html"><i class="icon-large icon-google-plus-sign"></i></a> </span> </div> <hr /> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css" /> <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script> <div id="gitalk-container"></div> <script type="text/javascript"> var gitalk = new Gitalk({ clientID: '9d5ee666269c252cf949', clientSecret: '728cd598f1fca9d8c1df1dfa300057883a3a8676', repo: 'list', owner: 'luowei', admin: ['luowei'], id: decodeURI('Java-Java基础13之JSP与MVC模式开发用户管理系统'), distractionFreeMode: false }); gitalk.render('gitalk-container'); </script> <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? "https://" : "http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1277627361'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s96.cnzz.com/z_stat.php%3Fid%3D1277627361%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));</script> <footer class="site-footer"> <span class="site-footer-owner"><a href="">知不知</a> is maintained by <a href="http://luowei.github.io/list">luowei</a>.</span> <span class="site-footer-credits">Developed by <a href="https://luowei.github.io">luowei</a>.</span> </footer> </section> </body> </html>
