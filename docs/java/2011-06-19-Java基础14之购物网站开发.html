<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <title>知不知</title> <meta name="viewport" content="width=device-width, initial-scale=1"> <meta name="theme-color" content="#157878"> <link rel="stylesheet" href="/list/assets/css/normalize.css"> <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'> <link rel="stylesheet" href="/list/assets/css/cayman.css"> </head> <body> <section class="page-header"> <h1 class="project-name">知不知</h1> <h2 class="project-tagline"><a style="color:#ffffff;" href="http://luowei.github.io/list">知不知</a> 是一个代码爱好者的技术知识分享部落格。</h2> <a href="http://wodedata.com" target="_blank" class="btn">wodedata</a> <a href="/list" class="btn">home</a> <a href="http://app.wodedata.com" target="_blank" class="btn">APP作品</a> </section> <section class="main-content"> <!-- 标题 --> <h2>Java-Java基础14之购物网站开发</h2> <!-- Google Ads --> <script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <p><ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-8760692904992206" data-ad-slot="2948937366"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script></p> <p><strong>主要内容有：</strong> 使用基础的Java Web技术开发购物网站。</p> <p><strong>文件结构</strong><br /> <img src="https://raw.githubusercontent.com/luowei/list/gh-pages/images/java/base/article_55.jpg" alt="文件结构" /></p> <p><strong>购物网开发过程</strong></p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>开发步骤：
    1.界面(模仿)
    2.数据库(表的设计)[界面(功能)--&gt;猜出表？？？]
    3.建立web工程，ShoppingSite
    4.写主页面(index.jsp)，死去活来法，先死后活。
        在dw中，建立html --&gt; 在myeclipse中建立 jsp
        开发的界面，这里使用table+css方式布局。
        在table+css布局中，常用的一个技巧是在行的某列中嵌入一个表格，做精确的布局。
        初步介绍css：css是层又叠样式表，控制网页的字体，颜色，大小，背景，边框...
    5.把静态的页面向动态的页面修改。
        在主页面，用户点击了书名的超链接就显示该商品信息页面(showDetail.jsp)——死去活来法
        完成返回购物大厅[js]
        开发model和servlet，把静态界面做活
    6.在index.jsp页面加入分页显示货物的功能
        把显示货物的信息的table循环显示(在jsp页面中 java片段和html标签混用)
        haspmap:
            特点：
                1.hashmap就像一张表
                2.key值是不能重复
                3.key值和value值，可以是java的Object类型
            key值---&gt;书的 id
            values值 ---&gt; 书的数量
    7.对购物车可以增加，删除，清空，修改数量,计算总价
        为了让servlet得到货物的id和数量，这里使用隐藏表单完成
    8.完成以下几项功能：
        1.用户登录
        2.显示用户联系情况用订单情况
        3.订单表的设计及订单的生成
        4.发送电子邮件(javamail)到用记信箱
        5.购物流程设计(MVC(模型，界面，控制器))
        如果一种处理器(控制器)只处理一种业务逻辑，就没有必要给它加标志以示区别不同的业务逻辑
        完成生成订单的功能：
            1.设计订单表
                当表和表之间有多对多的关系时，就应该使用中间表来解决数据冗余问题
                对订单表的分解处理：
                初始表：
                    order（orderId bigint primary key auto_increment, #订单号
                        userId bigint references users(userId), #用户id
                        goodsId bigint references goods(goodsId), #商品id
                        nums int not null,    #数量
                        orderDate datetime not null,    #时间
                        payMode String not null,    #付款方式
                        isPayed boolean,    #付款否
                        totalPrice float not null)    #总价
                分解优化后的订单表：
                    order1(orderId bigint primary key auto_increment, #订单号
                        userId bigint constraint fk_userId references users(userId), #用户id
                        orderDate datetime ,#default curdate(),    #时间
                        payMode varchar(20) ,#check(payMode in('货到付款','支付宝付款')),    #付款方式
                        isPayed bit ,#check(isPayed in(0,1)),    #付款否
                        totalPrice float not null)    #总价
                    order2(orderId bigint references order1(orderId), #订单号
                        goodsId bigint not null references goods(goodsId), #商品id
                        nums int not null,    #数量)
                通过将订单表分解，这样就把订单表和货物表的多对多的关系，简化成一对多的关系：从而
                达到解决数据冗余的问题。
                mysql中对键的约束问题，有待解决。。。。。。                
    9.javamail技术，主要用户发送电子邮件给某个信箱。
        （自己想办法独立完成）
    10.还有待实现的功能：
        1.后台商品的管理
        2.后台用户的管理
        3.用户注册的功能
        4.网站公告的管理
        5.网站最受用户欢迎的书籍（动态）

</code></pre></div></div> <p><strong>此购物网数据库设计</strong></p> <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">--=============================================</span>
<span class="c1">-----------------sql server--------------------</span>
<span class="c1">--run:</span>
<span class="c1">--sqlcmd -U sa -P luowei -d master</span>
<span class="k">drop</span> <span class="k">database</span> <span class="n">shoppingdb</span><span class="p">;</span>
<span class="k">go</span>
<span class="k">create</span> <span class="k">database</span> <span class="n">shoppingdb</span><span class="p">;</span>
<span class="k">go</span>
<span class="n">use</span> <span class="n">shoppingdb</span><span class="p">;</span>
<span class="k">go</span>
<span class="c1">--普通用户表</span>
<span class="k">create</span> <span class="k">table</span> <span class="n">users</span><span class="p">(</span>
  <span class="n">userId</span> <span class="nb">bigint</span> <span class="k">primary</span> <span class="k">key</span> <span class="k">identity</span><span class="p">,</span> <span class="c1">--用户id</span>
  <span class="n">userName</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="k">not</span> <span class="k">null</span> <span class="k">unique</span><span class="p">,</span> <span class="c1">--用户名</span>
  <span class="n">trueName</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="k">not</span> <span class="k">null</span><span class="p">,</span> <span class="c1">--真实名字</span>
  <span class="n">passWd</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="k">not</span> <span class="k">null</span><span class="p">,</span> <span class="c1">--密码</span>
  <span class="n">email</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">40</span><span class="p">)</span> <span class="k">not</span> <span class="k">null</span><span class="p">,</span> <span class="c1">--电子邮件</span>
  <span class="n">phone</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="k">not</span> <span class="k">null</span><span class="p">,</span> <span class="c1">--电话号码</span>
  <span class="n">address</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="k">not</span> <span class="k">null</span><span class="p">,</span> <span class="c1">--用户地址</span>
  <span class="n">postcode</span> <span class="nb">char</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="k">not</span> <span class="k">null</span><span class="p">,</span> <span class="c1">--邮编</span>
  <span class="n">grade</span> <span class="nb">int</span> <span class="k">default</span> <span class="mi">1</span> <span class="c1">--用户级别</span>
<span class="p">)</span>
<span class="c1">--管理员表admin</span>
<span class="c1">--暂时留着</span>
<span class="c1">--货物表</span>
<span class="k">create</span> <span class="k">table</span> <span class="n">goods</span><span class="p">(</span>
  <span class="n">goodsId</span> <span class="nb">bigint</span> <span class="k">primary</span> <span class="k">key</span> <span class="k">identity</span><span class="p">,</span> <span class="c1">--货物id</span>
  <span class="n">goodsName</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">40</span><span class="p">),</span> <span class="c1">--名称</span>
  <span class="n">goodsIntro</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">500</span><span class="p">),</span> <span class="c1">--介绍</span>
  <span class="n">goodsPrice</span> <span class="nb">float</span> <span class="p">,</span> <span class="c1">--价格</span>
  <span class="n">goodsNum</span> <span class="nb">int</span><span class="p">,</span> <span class="c1">--数量</span>
  <span class="n">publisher</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">40</span><span class="p">),</span> <span class="c1">--发行商</span>
  <span class="n">photo</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">40</span><span class="p">),</span> <span class="c1">--照片</span>
  <span class="n">goodsType</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="c1">--类型</span>
<span class="p">)</span>
<span class="c1">--向用户表添加数据</span>
<span class="k">insert</span> <span class="k">into</span> <span class="n">users</span> <span class="k">values</span><span class="p">(</span><span class="s1">'luowei'</span><span class="p">,</span><span class="s1">'维唯为为'</span><span class="p">,</span><span class="s1">'luowei'</span><span class="p">,</span><span class="s1">'luowei010101@sina.com'</span><span class="p">,</span><span class="s1">'010-88888888'</span><span class="p">,</span><span class="s1">'湖南省娄星区'</span><span class="p">,</span><span class="s1">'417000'</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">users</span><span class="p">;</span>
<span class="c1">--向货物添加数据</span>
<span class="k">insert</span> <span class="k">into</span> <span class="n">goods</span> <span class="k">values</span><span class="p">(</span><span class="s1">'黑白森林'</span><span class="p">,</span><span class="s1">'这是一部好片'</span><span class="p">,</span><span class="mi">59</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="s1">'香港嘉禾出品'</span><span class="p">,</span><span class="s1">'1.jpg'</span><span class="p">,</span><span class="s1">'香港电影'</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">into</span> <span class="n">goods</span> <span class="k">values</span><span class="p">(</span><span class="s1">'金鸡IT'</span><span class="p">,</span><span class="s1">'这是一部好片'</span><span class="p">,</span><span class="mi">49</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="s1">'香港嘉禾出品'</span><span class="p">,</span><span class="s1">'2.jpg'</span><span class="p">,</span><span class="s1">'香港电影'</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">into</span> <span class="n">goods</span> <span class="k">values</span><span class="p">(</span><span class="s1">'靓女菜馆'</span><span class="p">,</span><span class="s1">'这是一部好片'</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="s1">'香港嘉禾出品'</span><span class="p">,</span><span class="s1">'3.jpg'</span><span class="p">,</span><span class="s1">'香港电影'</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">into</span> <span class="n">goods</span> <span class="k">values</span><span class="p">(</span><span class="s1">'布衣神相'</span><span class="p">,</span><span class="s1">'这是一部好片'</span><span class="p">,</span><span class="mi">19</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="s1">'香港嘉禾出品'</span><span class="p">,</span><span class="s1">'4.jpg'</span><span class="p">,</span><span class="s1">'香港电影'</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">into</span> <span class="n">goods</span> <span class="k">values</span><span class="p">(</span><span class="s1">'洛神'</span><span class="p">,</span><span class="s1">'这是一部好片'</span><span class="p">,</span><span class="mi">56</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="s1">'香港嘉禾出品'</span><span class="p">,</span><span class="s1">'5.jpg'</span><span class="p">,</span><span class="s1">'香港电影'</span><span class="p">);</span>
<span class="c1">--订单表</span>
<span class="k">create</span> <span class="k">table</span> <span class="n">orders</span><span class="p">(</span>
  <span class="n">ordersId</span> <span class="nb">bigint</span> <span class="k">primary</span> <span class="k">key</span> <span class="k">identity</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span>
  <span class="n">userId</span> <span class="nb">bigint</span> <span class="k">references</span> <span class="n">users</span><span class="p">(</span><span class="n">userId</span><span class="p">),</span>
  <span class="n">orderDate</span> <span class="nb">datetime</span> <span class="k">default</span> <span class="n">getDate</span><span class="p">(),</span>
  <span class="n">payMode</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="k">check</span><span class="p">(</span><span class="n">payMode</span> <span class="k">in</span><span class="p">(</span><span class="s1">'货到付款'</span><span class="p">,</span><span class="s1">'支付宝付款'</span><span class="p">)),</span>
  <span class="n">isPayed</span> <span class="nb">bit</span> <span class="k">check</span><span class="p">(</span><span class="n">isPayed</span> <span class="k">in</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)),</span>
  <span class="n">totalPrice</span> <span class="nb">float</span> <span class="k">not</span> <span class="k">null</span>
<span class="p">)</span>
<span class="k">go</span>
<span class="k">create</span> <span class="k">table</span> <span class="n">orderDetail</span><span class="p">(</span>
  <span class="n">ordersId</span> <span class="nb">bigint</span> <span class="k">references</span> <span class="n">orders</span><span class="p">(</span><span class="n">ordersId</span><span class="p">),</span>
  <span class="n">goodsId</span> <span class="nb">bigint</span> <span class="k">references</span> <span class="n">goods</span><span class="p">(</span><span class="n">goodsId</span><span class="p">),</span>
  <span class="n">nums</span> <span class="nb">int</span> <span class="k">not</span> <span class="k">null</span>
<span class="p">)</span>
<span class="k">go</span>
<span class="c1">--=============================================</span>
<span class="c1">--------------------mysql----------------------</span>
<span class="n">run</span><span class="p">:</span> <span class="n">mysql</span> <span class="o">-</span><span class="n">u</span> <span class="n">root</span> <span class="o">-</span><span class="n">p</span>
<span class="n">Enter</span> <span class="n">password</span><span class="p">:</span><span class="n">root</span>
<span class="k">create</span> <span class="k">database</span> <span class="n">shoppingdb</span><span class="p">;</span>
<span class="n">use</span> <span class="n">shoppingdb</span><span class="p">;</span>
<span class="o">#</span><span class="err">普通用户表</span>
<span class="k">create</span> <span class="k">table</span> <span class="n">users</span><span class="p">(</span>
  <span class="n">userId</span> <span class="nb">bigint</span> <span class="k">primary</span> <span class="k">key</span> <span class="n">auto_increment</span><span class="p">,</span> <span class="o">#</span><span class="err">用户</span><span class="n">id</span>
         <span class="n">userName</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="k">not</span> <span class="k">null</span> <span class="k">unique</span><span class="p">,</span> <span class="o">#</span><span class="err">用户名</span>
         <span class="n">trueName</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="k">not</span> <span class="k">null</span><span class="p">,</span> <span class="o">#</span><span class="err">真实名字</span>
         <span class="n">passWd</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="k">not</span> <span class="k">null</span><span class="p">,</span> <span class="o">#</span><span class="err">密码</span>
         <span class="n">email</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">40</span><span class="p">)</span> <span class="k">not</span> <span class="k">null</span><span class="p">,</span> <span class="o">#</span><span class="err">电子邮件</span>
         <span class="n">phone</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="k">not</span> <span class="k">null</span><span class="p">,</span> <span class="o">#</span><span class="err">电话号码</span>
         <span class="n">address</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="k">not</span> <span class="k">null</span><span class="p">,</span> <span class="o">#</span><span class="err">用户地址</span>
         <span class="n">postcode</span> <span class="nb">char</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="k">not</span> <span class="k">null</span><span class="p">,</span> <span class="o">#</span><span class="err">邮编</span>
         <span class="n">grade</span> <span class="nb">int</span> <span class="k">default</span> <span class="mi">1</span> <span class="o">#</span><span class="err">用户级别</span>
<span class="p">);</span>
<span class="o">#</span><span class="err">货物表</span>
<span class="k">create</span> <span class="k">table</span> <span class="n">goods</span><span class="p">(</span>
  <span class="n">goodsId</span> <span class="nb">bigint</span> <span class="k">primary</span> <span class="k">key</span> <span class="n">auto_increment</span><span class="p">,</span> <span class="o">#</span><span class="err">货物</span><span class="n">id</span>
          <span class="n">goodsName</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">40</span><span class="p">),</span> <span class="o">#</span><span class="err">名称</span>
          <span class="n">goodsIntro</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">500</span><span class="p">),</span> <span class="o">#</span><span class="err">介绍</span>
          <span class="n">goodsPrice</span> <span class="nb">float</span> <span class="p">,</span> <span class="o">#</span><span class="err">价格</span>
          <span class="n">goodsNum</span> <span class="nb">int</span><span class="p">,</span> <span class="o">#</span><span class="err">数量</span>
          <span class="n">publisher</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">40</span><span class="p">),</span> <span class="o">#</span><span class="err">发行商</span>
          <span class="n">photo</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">40</span><span class="p">),</span> <span class="o">#</span><span class="err">照片</span>
          <span class="n">goodsType</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">#</span><span class="err">类型</span>
<span class="p">);</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">users</span> <span class="k">CONVERT</span> <span class="k">TO</span> <span class="nb">CHARACTER</span> <span class="k">SET</span> <span class="n">utf8</span><span class="p">;</span>
<span class="c1">--ALTER TABLE users DEFAULT CHARACTER SET utf8;</span>
<span class="o">#</span><span class="err">向用户表添加数据</span>
<span class="k">insert</span> <span class="k">into</span> <span class="n">users</span> <span class="k">values</span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="s1">'luowei'</span><span class="p">,</span><span class="s1">'维唯为为'</span><span class="p">,</span><span class="s1">'luowei'</span><span class="p">,</span><span class="s1">'luowei@sina.com'</span><span class="p">,</span><span class="s1">'010-88888888'</span><span class="p">,</span><span class="s1">'湖南省娄星区'</span><span class="p">,</span><span class="s1">'417000'</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">users</span><span class="p">;</span>
<span class="o">#</span><span class="err">向货物添加数据</span>
<span class="k">insert</span> <span class="k">into</span> <span class="n">goods</span> <span class="k">values</span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="s1">'黑白森林'</span><span class="p">,</span><span class="s1">'这是一部好片'</span><span class="p">,</span><span class="mi">59</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="s1">'香港嘉禾出品'</span><span class="p">,</span><span class="s1">'1.jpg'</span><span class="p">,</span><span class="s1">'香港电影'</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">into</span> <span class="n">goods</span> <span class="k">values</span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="s1">'金鸡IT'</span><span class="p">,</span><span class="s1">'这是一部好片'</span><span class="p">,</span><span class="mi">49</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="s1">'香港嘉禾出品'</span><span class="p">,</span><span class="s1">'2.jpg'</span><span class="p">,</span><span class="s1">'香港电影'</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">into</span> <span class="n">goods</span> <span class="k">values</span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="s1">'靓女菜馆'</span><span class="p">,</span><span class="s1">'这是一部好片'</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="s1">'香港嘉禾出品'</span><span class="p">,</span><span class="s1">'3.jpg'</span><span class="p">,</span><span class="s1">'香港电影'</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">into</span> <span class="n">goods</span> <span class="k">values</span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="s1">'布衣神相'</span><span class="p">,</span><span class="s1">'这是一部好片'</span><span class="p">,</span><span class="mi">19</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="s1">'香港嘉禾出品'</span><span class="p">,</span><span class="s1">'4.jpg'</span><span class="p">,</span><span class="s1">'香港电影'</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">into</span> <span class="n">goods</span> <span class="k">values</span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="s1">'洛神'</span><span class="p">,</span><span class="s1">'这是一部好片'</span><span class="p">,</span><span class="mi">56</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="s1">'香港嘉禾出品'</span><span class="p">,</span><span class="s1">'5.jpg'</span><span class="p">,</span><span class="s1">'香港电影'</span><span class="p">);</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">goods</span><span class="p">;</span>
<span class="o">#</span><span class="err">订单表</span>
<span class="k">create</span> <span class="k">table</span> <span class="n">orders</span><span class="p">(</span>
               <span class="n">ordersId</span> <span class="nb">bigint</span> <span class="k">primary</span> <span class="k">key</span> <span class="n">auto_increment</span><span class="p">,</span>
               <span class="n">userId</span> <span class="nb">bigint</span> <span class="k">references</span> <span class="n">users</span><span class="p">(</span><span class="n">userId</span><span class="p">),</span>
               <span class="n">orderDate</span> <span class="nb">datetime</span> <span class="p">,</span><span class="o">#</span><span class="k">default</span> <span class="n">curdate</span><span class="p">(),</span>
               <span class="n">payMode</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="p">,</span> <span class="o">#</span><span class="n">mysql</span><span class="err">中约束问题有待解决</span>
  <span class="n">isPayed</span> <span class="nb">bit</span> <span class="p">,</span><span class="o">#</span><span class="k">check</span><span class="p">(</span><span class="n">isPayed</span> <span class="k">in</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)),</span>
  <span class="n">totalPrice</span> <span class="nb">float</span> <span class="k">not</span> <span class="k">null</span>
<span class="p">);</span>
<span class="k">create</span> <span class="k">table</span> <span class="n">orderDetail</span><span class="p">(</span>
  <span class="n">ordersId</span> <span class="nb">bigint</span> <span class="k">references</span> <span class="n">orders</span><span class="p">(</span><span class="n">ordersId</span><span class="p">),</span>
  <span class="n">goodsId</span> <span class="nb">bigint</span> <span class="k">references</span> <span class="n">goods</span><span class="p">(</span><span class="n">goodsId</span><span class="p">),</span>
  <span class="n">nums</span> <span class="nb">int</span> <span class="k">not</span> <span class="k">null</span>
<span class="p">);</span>
<span class="k">insert</span> <span class="k">into</span> <span class="n">orders</span><span class="p">(</span><span class="n">userId</span><span class="p">,</span><span class="n">orderDate</span><span class="p">,</span><span class="n">payMode</span><span class="p">,</span><span class="n">isPayed</span><span class="p">,</span><span class="n">totalPrice</span><span class="p">)</span> <span class="k">values</span><span class="p">(</span><span class="mi">1</span><span class="p">,(</span><span class="k">select</span> <span class="n">curdate</span><span class="p">()),</span><span class="s1">'货到付款'</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">120</span><span class="p">.</span><span class="mi">0</span><span class="p">);</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">orders</span><span class="p">;</span>
</code></pre></div></div> <p><strong>此购物网MVC模型图</strong><br /> <img src="https://raw.githubusercontent.com/luowei/list/gh-pages/images/java/base/article_56.jpg" alt="此购物网MVC模型图" /></p> <p><strong>view_WebRoot/index.jsp</strong><br /> <img src="https://raw.githubusercontent.com/luowei/list/gh-pages/images/java/base/article_57.jpg" alt="首页" /></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;%</span><span class="err">@</span> <span class="n">page</span> <span class="n">language</span><span class="o">=</span><span class="s">"java"</span> <span class="kn">import</span><span class="err">="</span><span class="nn">java.util.*</span><span class="s">" pageEncoding="</span><span class="n">utf</span><span class="o">-</span><span class="mi">8</span><span class="s">"%&gt;
&lt;%
    String path = request.getContextPath();
    String basePath = request.getScheme()+"</span><span class="o">:</span><span class="c1">//"+request.getServerName()+":"+request.getServerPort()+path+"/";</span>
<span class="o">%&gt;</span>
<span class="o">&lt;!</span><span class="no">DOCTYPE</span> <span class="no">HTML</span> <span class="no">PUBLIC</span> <span class="s">"-//W3C//DTD HTML 4.01 Transitional//EN"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">head</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">base</span> <span class="n">href</span><span class="o">=</span><span class="s">"&lt;%=basePath%&gt;"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span><span class="nc">My</span> <span class="no">JSP</span> <span class="err">'</span><span class="n">index</span><span class="o">.</span><span class="na">jsp</span><span class="err">'</span> <span class="n">starting</span> <span class="n">page</span><span class="o">&lt;/</span><span class="n">title</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"pragma"</span> <span class="n">content</span><span class="o">=</span><span class="s">"no-cache"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"cache-control"</span> <span class="n">content</span><span class="o">=</span><span class="s">"no-cache"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"expires"</span> <span class="n">content</span><span class="o">=</span><span class="s">"0"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"keywords"</span> <span class="n">content</span><span class="o">=</span><span class="s">"keyword1,keyword2,keyword3"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"description"</span> <span class="n">content</span><span class="o">=</span><span class="s">"This is my page"</span><span class="o">&gt;</span>
    <span class="o">&lt;!--</span> <span class="err">要引用</span><span class="n">css</span><span class="err">，之前这里的注释符号要去掉</span> <span class="o">--&gt;</span>
    <span class="o">&lt;</span><span class="n">link</span> <span class="n">rel</span><span class="o">=</span><span class="s">"stylesheet"</span> <span class="n">type</span><span class="o">=</span><span class="s">"text/css"</span> <span class="n">href</span><span class="o">=</span><span class="s">"css/my.css"</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">head</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">body</span> <span class="n">topmargin</span><span class="o">=</span><span class="s">"0"</span> <span class="n">background</span><span class="o">=</span><span class="s">"img/bg.jpg"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">table</span> <span class="n">width</span><span class="o">=</span><span class="s">"80%"</span> <span class="n">border</span><span class="o">=</span><span class="s">"1"</span> <span class="n">align</span><span class="o">=</span><span class="s">"center"</span> <span class="n">cellpadding</span><span class="o">=</span><span class="s">"1"</span> <span class="n">cellspacing</span><span class="o">=</span><span class="s">"1"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">td</span> <span class="n">height</span><span class="o">=</span><span class="s">"120"</span> <span class="n">colspan</span><span class="o">=</span><span class="s">"2"</span> <span class="n">align</span><span class="o">=</span><span class="s">"center"</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nl">jsp:</span><span class="n">include</span> <span class="n">page</span><span class="o">=</span><span class="s">"head.jsp"</span> <span class="n">flush</span><span class="o">=</span><span class="s">"true"</span><span class="o">&gt;&lt;/</span><span class="nl">jsp:</span><span class="n">include</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">td</span> <span class="n">width</span><span class="o">=</span><span class="s">"25%"</span> <span class="n">height</span><span class="o">=</span><span class="s">"400"</span> <span class="n">align</span><span class="o">=</span><span class="s">"center"</span> <span class="n">valign</span><span class="o">=</span><span class="s">"top"</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nl">jsp:</span><span class="n">include</span> <span class="n">page</span><span class="o">=</span><span class="s">"left.jsp"</span> <span class="n">flush</span><span class="o">=</span><span class="s">"true"</span><span class="o">&gt;&lt;/</span><span class="nl">jsp:</span><span class="n">include</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">td</span> <span class="n">align</span><span class="o">=</span><span class="s">"center"</span> <span class="n">valign</span><span class="o">=</span><span class="s">"top"</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nl">jsp:</span><span class="n">include</span> <span class="n">page</span><span class="o">=</span><span class="s">"right.jsp"</span> <span class="n">flush</span><span class="o">=</span><span class="s">"true"</span><span class="o">&gt;&lt;/</span><span class="nl">jsp:</span><span class="n">include</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">td</span> <span class="n">height</span><span class="o">=</span><span class="s">"86"</span> <span class="n">colspan</span><span class="o">=</span><span class="s">"2"</span> <span class="n">align</span><span class="o">=</span><span class="s">"center"</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nl">jsp:</span><span class="n">include</span> <span class="n">page</span><span class="o">=</span><span class="s">"tail.jsp"</span> <span class="n">flush</span><span class="o">=</span><span class="s">"true"</span><span class="o">&gt;&lt;/</span><span class="nl">jsp:</span><span class="n">include</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">table</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</code></pre></div></div> <p><strong>view_WebRoot/head.jsp</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;%</span><span class="err">@</span> <span class="n">page</span> <span class="n">language</span><span class="o">=</span><span class="s">"java"</span> <span class="kn">import</span><span class="err">="</span><span class="nn">java.util.*</span><span class="s">" pageEncoding="</span><span class="n">utf</span><span class="o">-</span><span class="mi">8</span><span class="s">"%&gt;
&lt;%
    String path = request.getContextPath();
    String basePath = request.getScheme()+"</span><span class="o">:</span><span class="c1">//"+request.getServerName()+":"+request.getServerPort()+path+"/";</span>
<span class="o">%&gt;</span>
<span class="o">&lt;!--</span> <span class="err">只把</span><span class="n">table</span><span class="err">引入即可</span> <span class="o">--&gt;</span>
<span class="o">&lt;</span><span class="n">table</span> <span class="n">width</span><span class="o">=</span><span class="s">"100%"</span> <span class="n">border</span><span class="o">=</span><span class="s">"0"</span> <span class="n">cellpadding</span><span class="o">=</span><span class="s">"1"</span> <span class="n">cellspacing</span><span class="o">=</span><span class="s">"1"</span> <span class="kd">class</span><span class="err">="</span><span class="nc">abc</span><span class="s">"&gt;
    &lt;tr&gt;
        &lt;td height="</span><span class="mi">10</span><span class="s">" colspan="</span><span class="mi">3</span><span class="s">" bgcolor="</span><span class="err">#</span><span class="no">FF9999</span><span class="s">"&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td width="</span><span class="mi">24</span><span class="o">%</span><span class="s">" align="</span><span class="n">center</span><span class="s">"&gt;&lt;img src="</span><span class="n">img</span><span class="o">/</span><span class="n">head</span><span class="o">/</span><span class="n">logo</span><span class="o">.</span><span class="na">jpg</span><span class="s">" width="</span><span class="mi">213</span><span class="s">" height="</span><span class="mi">76</span><span class="s">"&gt;&lt;/td&gt;
        &lt;td width="</span><span class="mi">58</span><span class="o">%</span><span class="s">" align="</span><span class="n">center</span><span class="s">"&gt;&lt;img src="</span><span class="n">img</span><span class="o">/</span><span class="n">head</span><span class="o">/</span><span class="n">center</span><span class="o">.</span><span class="na">jpg</span><span class="s">" width="</span><span class="mi">399</span><span class="s">" height="</span><span class="mi">78</span><span class="s">"&gt;&lt;/td&gt;
        &lt;td width="</span><span class="mi">18</span><span class="o">%</span><span class="s">"&gt;&lt;p&gt;&lt;img src="</span><span class="n">img</span><span class="o">/</span><span class="n">head</span><span class="o">/</span><span class="n">right1</span><span class="o">.</span><span class="na">jpg</span><span class="s">" width="</span><span class="mi">26</span><span class="s">" height="</span><span class="mi">22</span><span class="s">"&gt;【我的账号】&lt;/p&gt;
            &lt;p&gt;&lt;img src="</span><span class="n">img</span><span class="o">/</span><span class="n">head</span><span class="o">/</span><span class="n">right2</span><span class="o">.</span><span class="na">jpg</span><span class="s">" width="</span><span class="mi">23</span><span class="s">" height="</span><span class="mi">22</span><span class="s">"/&gt;&lt;a href=ShoppingClServlet?type=show&gt;【我的购物车】&lt;/a&gt;&lt;/p&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td height="</span><span class="mi">10</span><span class="s">" colspan="</span><span class="mi">3</span><span class="s">" bgcolor="</span><span class="err">#</span><span class="no">FF9999</span><span class="s">"&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td colspan="</span><span class="mi">3</span><span class="s">"&gt;&lt;table width="</span><span class="mi">100</span><span class="o">%</span><span class="s">" border="</span><span class="mi">0</span><span class="s">" cellpadding="</span><span class="mi">1</span><span class="s">" cellspacing="</span><span class="mi">1</span><span class="s">"&gt;
            &lt;tr align="</span><span class="n">center</span><span class="s">"&gt;
                &lt;td width="</span><span class="mi">11</span><span class="o">%</span><span class="s">"&gt;&amp;nbsp;&lt;/td&gt;
                &lt;td width="</span><span class="mi">11</span><span class="o">%</span><span class="s">" class="</span><span class="n">navi</span><span class="s">"&gt;首页&lt;/td&gt;
                &lt;td width="</span><span class="mi">11</span><span class="o">%</span><span class="s">"&gt;&amp;nbsp;&lt;/td&gt;
                &lt;td width="</span><span class="mi">11</span><span class="o">%</span><span class="s">" class="</span><span class="n">navi</span><span class="s">"&gt;香港电影&lt;/td&gt;
                &lt;td width="</span><span class="mi">11</span><span class="o">%</span><span class="s">"&gt;&amp;nbsp;&lt;/td&gt;
                &lt;td width="</span><span class="mi">11</span><span class="o">%</span><span class="s">" class="</span><span class="n">navi</span><span class="s">"&gt;大陆电影&lt;/td&gt;
                &lt;td width="</span><span class="mi">11</span><span class="o">%</span><span class="s">"&gt;&amp;nbsp;&lt;/td&gt;
                &lt;td width="</span><span class="mi">11</span><span class="o">%</span><span class="s">" class="</span><span class="n">navi</span><span class="s">"&gt;关于我们&lt;/td&gt;
                &lt;td width="</span><span class="mi">11</span><span class="o">%</span><span class="err">"</span><span class="o">&gt;&amp;</span><span class="n">nbsp</span><span class="o">;&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">table</span><span class="o">&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">table</span><span class="o">&gt;</span>
</code></pre></div></div> <p><strong>view_WebRoot/tail.jsp</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;%</span><span class="err">@</span> <span class="n">page</span> <span class="n">language</span><span class="o">=</span><span class="s">"java"</span> <span class="kn">import</span><span class="err">="</span><span class="nn">java.util.*</span><span class="s">" pageEncoding="</span><span class="n">utf</span><span class="o">-</span><span class="mi">8</span><span class="s">"%&gt;
&lt;%
    String path = request.getContextPath();
    String basePath = request.getScheme()+"</span><span class="o">:</span><span class="c1">//"+request.getServerName()+":"+request.getServerPort()+path+"/";</span>
<span class="o">%&gt;</span>
<span class="o">&lt;!</span><span class="no">DOCTYPE</span> <span class="no">HTML</span> <span class="no">PUBLIC</span> <span class="s">"-//W3C//DTD HTML 4.01 Transitional//EN"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">head</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">base</span> <span class="n">href</span><span class="o">=</span><span class="s">"&lt;%=basePath%&gt;"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span><span class="nc">My</span> <span class="no">JSP</span> <span class="err">'</span><span class="n">tail</span><span class="o">.</span><span class="na">jsp</span><span class="err">'</span> <span class="n">starting</span> <span class="n">page</span><span class="o">&lt;/</span><span class="n">title</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"pragma"</span> <span class="n">content</span><span class="o">=</span><span class="s">"no-cache"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"cache-control"</span> <span class="n">content</span><span class="o">=</span><span class="s">"no-cache"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"expires"</span> <span class="n">content</span><span class="o">=</span><span class="s">"0"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"keywords"</span> <span class="n">content</span><span class="o">=</span><span class="s">"keyword1,keyword2,keyword3"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"description"</span> <span class="n">content</span><span class="o">=</span><span class="s">"This is my page"</span><span class="o">&gt;</span>
    <span class="o">&lt;!--</span>
    <span class="o">&lt;</span><span class="n">link</span> <span class="n">rel</span><span class="o">=</span><span class="s">"stylesheet"</span> <span class="n">type</span><span class="o">=</span><span class="s">"text/css"</span> <span class="n">href</span><span class="o">=</span><span class="s">"styles.css"</span><span class="o">&gt;</span>
    <span class="o">--&gt;</span>
<span class="o">&lt;/</span><span class="n">head</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">body</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">table</span> <span class="n">width</span><span class="o">=</span><span class="s">"100%"</span> <span class="n">border</span><span class="o">=</span><span class="s">"0"</span> <span class="n">align</span><span class="o">=</span><span class="s">"center"</span> <span class="n">cellpadding</span><span class="o">=</span><span class="s">"1"</span> <span class="n">cellspacing</span><span class="o">=</span><span class="s">"1"</span> <span class="kd">class</span><span class="err">="</span><span class="nc">abc</span><span class="s">"&gt;
    &lt;tr&gt;
        &lt;td align="</span><span class="n">center</span><span class="s">" bgcolor="</span><span class="err">#</span><span class="no">FF9999</span><span class="s">"&gt;合作伙伴：&lt;a href="</span><span class="nl">http:</span><span class="n">www</span><span class="o">.</span><span class="na">sohu</span><span class="o">.</span><span class="na">com</span><span class="s">"&gt;搜狐&lt;/a&gt; &lt;a href="</span><span class="nl">http:</span><span class="n">www</span><span class="o">.</span><span class="mi">163</span><span class="o">.</span><span class="na">com</span><span class="s">"&gt;网易&lt;/a&gt; &lt;a href="</span><span class="nl">http:</span><span class="n">www</span><span class="o">.</span><span class="na">baidu</span><span class="o">.</span><span class="na">com</span><span class="s">"&gt;百度&lt;/a&gt; &lt;a href="</span><span class="nl">http:</span><span class="n">www</span><span class="o">.</span><span class="na">sina</span><span class="o">.</span><span class="na">com</span><span class="s">"&gt;新浪&lt;/a&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td align="</span><span class="n">center</span><span class="s">"&gt;地址：湖南省娄星区 客服热线：0738-8888888&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td align="</span><span class="n">center</span><span class="s">"&gt;邮编：417000 客服信箱：luowei505050@126.com&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td align="</span><span class="n">center</span><span class="err">"</span><span class="o">&gt;</span><span class="nc">Copyright</span> <span class="err">为为购物网</span> <span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">table</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</code></pre></div></div> <p><strong>view_WebRoot/left.jsp</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;%</span><span class="err">@</span> <span class="n">page</span> <span class="n">language</span><span class="o">=</span><span class="s">"java"</span> <span class="kn">import</span><span class="err">="</span><span class="nn">java.util.*</span><span class="s">" pageEncoding="</span><span class="n">utf</span><span class="o">-</span><span class="mi">8</span><span class="s">"%&gt;
&lt;%
    String path = request.getContextPath();
    String basePath = request.getScheme()+"</span><span class="o">:</span><span class="c1">//"+request.getServerName()+":"+request.getServerPort()+path+"/";</span>
<span class="o">%&gt;</span>
<span class="o">&lt;</span><span class="n">table</span> <span class="n">width</span><span class="o">=</span><span class="s">"100%"</span> <span class="n">border</span><span class="o">=</span><span class="s">"0"</span> <span class="n">cellpadding</span><span class="o">=</span><span class="s">"1"</span> <span class="n">cellspacing</span><span class="o">=</span><span class="s">"1"</span> <span class="kd">class</span><span class="err">="</span><span class="nc">abc</span><span class="s">"&gt;
    &lt;tr&gt;
        &lt;td height="</span><span class="mi">60</span><span class="s">" align="</span><span class="n">center</span><span class="s">" valign="</span><span class="n">top</span><span class="s">"&gt;&lt;img src="</span><span class="n">img</span><span class="o">/</span><span class="n">left</span><span class="o">/</span><span class="n">top</span><span class="o">.</span><span class="na">jpg</span><span class="s">" width="</span><span class="mi">160</span><span class="s">" height="</span><span class="mi">60</span><span class="s">"&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td height="</span><span class="mi">170</span><span class="s">" align="</span><span class="n">center</span><span class="s">" valign="</span><span class="n">top</span><span class="s">"&gt;&amp;nbsp;&lt;img src="</span><span class="n">img</span><span class="o">/</span><span class="n">left</span><span class="o">/</span><span class="n">flash</span><span class="o">.</span><span class="na">jpg</span><span class="s">" width="</span><span class="mi">160</span><span class="s">" height="</span><span class="mi">170</span><span class="s">"&gt;
            &lt;!-- 滚动的页面
            &lt;script language="</span><span class="n">javascript</span><span class="s">" src="</span><span class="n">banner</span><span class="o">.</span><span class="na">js</span><span class="s">"&gt;&lt;/script&gt;
            --&gt;
        &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td height="</span><span class="mi">10</span><span class="s">" align="</span><span class="n">center</span><span class="s">" bgcolor="</span><span class="err">#</span><span class="no">FF9999</span><span class="s">"&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td align="</span><span class="n">center</span><span class="s">"&gt;&lt;table width="</span><span class="mi">100</span><span class="o">%</span><span class="s">" border="</span><span class="mi">0</span><span class="s">" cellpadding="</span><span class="mi">1</span><span class="s">" cellspacing="</span><span class="mi">1</span><span class="s">" class="</span><span class="n">abc</span><span class="s">"&gt;
            &lt;tr align="</span><span class="n">center</span><span class="s">" valign="</span><span class="n">middle</span><span class="s">"&gt;
                &lt;td height="</span><span class="mi">60</span><span class="s">" colspan="</span><span class="mi">3</span><span class="s">"&gt;&lt;img src="</span><span class="n">img</span><span class="o">/</span><span class="n">left</span><span class="o">/</span><span class="n">botton</span><span class="o">.</span><span class="na">jpg</span><span class="s">" width="</span><span class="mi">160</span><span class="s">" height="</span><span class="mi">60</span><span class="s">"&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr align="</span><span class="n">center</span><span class="s">" valign="</span><span class="n">middle</span><span class="s">"&gt;
                &lt;td width="</span><span class="mi">33</span><span class="o">%</span><span class="s">"&gt;排行&lt;/td&gt;
                &lt;td width="</span><span class="mi">33</span><span class="o">%</span><span class="s">" nowrap&gt;商品名称 &lt;/td&gt;
                &lt;td width="</span><span class="mi">33</span><span class="o">%</span><span class="s">"&gt;点击次数&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr align="</span><span class="n">center</span><span class="s">" valign="</span><span class="n">middle</span><span class="s">"&gt;
                &lt;td width="</span><span class="mi">33</span><span class="o">%</span><span class="s">"&gt;1&lt;/td&gt;
                &lt;td width="</span><span class="mi">33</span><span class="o">%</span><span class="s">" nowrap&gt;&lt;a href="</span><span class="err">#</span><span class="s">"&gt;笑傲江湖&lt;/a&gt;&lt;/td&gt;
                &lt;td width="</span><span class="mi">33</span><span class="o">%</span><span class="s">"&gt;10&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr align="</span><span class="n">center</span><span class="s">" valign="</span><span class="n">middle</span><span class="s">"&gt;
                &lt;td width="</span><span class="mi">33</span><span class="o">%</span><span class="s">"&gt;2&lt;/td&gt;
                &lt;td width="</span><span class="mi">33</span><span class="o">%</span><span class="s">" nowrap&gt;&lt;a href="</span><span class="err">#</span><span class="s">"&gt;天龙八部&lt;/a&gt;&lt;/td&gt;
                &lt;td width="</span><span class="mi">33</span><span class="o">%</span><span class="s">"&gt;9&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr align="</span><span class="n">center</span><span class="s">" valign="</span><span class="n">middle</span><span class="s">"&gt;
                &lt;td width="</span><span class="mi">33</span><span class="o">%</span><span class="s">"&gt;3&lt;/td&gt;
                &lt;td width="</span><span class="mi">33</span><span class="o">%</span><span class="s">" nowrap&gt;&lt;a href="</span><span class="err">#</span><span class="s">"&gt;天龙八部&lt;/a&gt;&lt;/td&gt;
                &lt;td width="</span><span class="mi">33</span><span class="o">%</span><span class="s">"&gt;8&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr align="</span><span class="n">center</span><span class="s">" valign="</span><span class="n">middle</span><span class="s">"&gt;
                &lt;td width="</span><span class="mi">33</span><span class="o">%</span><span class="s">"&gt;4&lt;/td&gt;
                &lt;td width="</span><span class="mi">33</span><span class="o">%</span><span class="s">" nowrap&gt;&lt;a href="</span><span class="err">#</span><span class="s">"&gt;笑傲江湖&lt;/a&gt;&lt;/td&gt;
                &lt;td width="</span><span class="mi">33</span><span class="o">%</span><span class="s">"&gt;7&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr align="</span><span class="n">center</span><span class="s">" valign="</span><span class="n">middle</span><span class="s">"&gt;
                &lt;td width="</span><span class="mi">33</span><span class="o">%</span><span class="s">"&gt;5&lt;/td&gt;
                &lt;td width="</span><span class="mi">33</span><span class="o">%</span><span class="s">" nowrap&gt;&lt;a href="</span><span class="err">#</span><span class="s">"&gt;笑傲江湖&lt;/a&gt;&lt;/td&gt;
                &lt;td width="</span><span class="mi">33</span><span class="o">%</span><span class="s">"&gt;5&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr align="</span><span class="n">center</span><span class="s">" valign="</span><span class="n">middle</span><span class="s">"&gt;
                &lt;td width="</span><span class="mi">33</span><span class="o">%</span><span class="s">"&gt;6&lt;/td&gt;
                &lt;td width="</span><span class="mi">33</span><span class="o">%</span><span class="s">" nowrap&gt;&lt;a href="</span><span class="err">#</span><span class="s">"&gt;笑傲江湖&lt;/a&gt;&lt;/td&gt;
                &lt;td width="</span><span class="mi">33</span><span class="o">%</span><span class="s">"&gt;4&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr align="</span><span class="n">center</span><span class="s">" valign="</span><span class="n">middle</span><span class="s">"&gt;
                &lt;td width="</span><span class="mi">33</span><span class="o">%</span><span class="s">"&gt;7&lt;/td&gt;
                &lt;td width="</span><span class="mi">33</span><span class="o">%</span><span class="s">" nowrap&gt;&lt;a href="</span><span class="err">#</span><span class="s">"&gt;天龙八部&lt;/a&gt;&lt;/td&gt;
                &lt;td width="</span><span class="mi">33</span><span class="o">%</span><span class="err">"</span><span class="o">&gt;</span><span class="mi">2</span><span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">table</span><span class="o">&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">table</span><span class="o">&gt;</span>
</code></pre></div></div> <p><strong>view_WebRoot/right.jsp</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;%</span><span class="err">@</span> <span class="n">page</span> <span class="n">language</span><span class="o">=</span><span class="s">"java"</span> <span class="kn">import</span><span class="err">="</span><span class="nn">java.util.*</span><span class="o">,</span><span class="nc">Shop</span><span class="o">.</span><span class="na">model</span><span class="o">.*</span><span class="s">" pageEncoding="</span><span class="n">utf</span><span class="o">-</span><span class="mi">8</span><span class="s">"%&gt;
&lt;%
    String path = request.getContextPath();
    String basePath = request.getScheme()+"</span><span class="o">:</span><span class="c1">//"+request.getServerName()+":"+request.getServerPort()+path+"/";</span>
<span class="c1">//接收pageNow</span>
    <span class="nc">String</span> <span class="n">s_pageNow</span><span class="o">=(</span><span class="nc">String</span><span class="o">)</span><span class="n">request</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">"pagenow"</span><span class="o">);</span>
    <span class="kt">int</span> <span class="n">pageNow</span><span class="o">=</span><span class="mi">1</span><span class="o">;</span>
    <span class="k">if</span><span class="o">(</span><span class="n">s_pageNow</span><span class="o">!=</span><span class="kc">null</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="c1">//String--&gt;int</span>
        <span class="n">pageNow</span><span class="o">=</span><span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">s_pageNow</span><span class="o">);</span>
    <span class="o">}</span>
<span class="c1">//使用GoodsBeanBO,完成分页(:正规的流程应该要经过servlet调用Bo)</span>
    <span class="nc">GoodsBeanBO</span> <span class="n">gbb</span><span class="o">=</span><span class="k">new</span> <span class="nc">GoodsBeanBO</span><span class="o">();</span>
<span class="c1">//默认显示第一页</span>
    <span class="nc">ArrayList</span> <span class="n">al</span><span class="o">=</span><span class="n">gbb</span><span class="o">.</span><span class="na">getGoodByPage</span><span class="o">(</span><span class="mi">6</span><span class="o">,</span><span class="n">pageNow</span><span class="o">);</span>
<span class="c1">//得到共有多少页</span>
    <span class="kt">int</span> <span class="n">pageCount</span><span class="o">=</span><span class="n">gbb</span><span class="o">.</span><span class="na">getPageCount</span><span class="o">(</span><span class="mi">6</span><span class="o">);</span>
<span class="o">%&gt;</span>
<span class="o">&lt;</span><span class="n">table</span> <span class="n">width</span><span class="o">=</span><span class="s">"100%"</span> <span class="n">height</span><span class="o">=</span><span class="s">"445"</span> <span class="n">border</span><span class="o">=</span><span class="s">"0"</span> <span class="n">cellpadding</span><span class="o">=</span><span class="s">"1"</span> <span class="n">cellspacing</span><span class="o">=</span><span class="s">"1"</span> <span class="kd">class</span><span class="err">="</span><span class="nc">abc</span><span class="s">"&gt;
    &lt;tr&gt;
        &lt;td height="</span><span class="mi">30</span><span class="s">" colspan="</span><span class="mi">3</span><span class="s">"&gt;&lt;img src="</span><span class="n">img</span><span class="o">/</span><span class="n">right</span><span class="o">/</span><span class="n">top</span><span class="o">.</span><span class="na">jpg</span><span class="s">" width="</span><span class="mi">419</span><span class="s">" height="</span><span class="mi">64</span><span class="s">"&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;%
        int time=0;
        for(int i=0;i&lt;2;i++)
        {
            //打印两大行（每行有三个【有可能不够显示】）
    %&gt;
    &lt;tr&gt;
        &lt;%
            //取出三个
            for(int j=0;j&lt;3;j++)
            {
                if(time&lt;al.size())
                {
                    //取出货物bean
                    GoodsBean gb=(GoodsBean)al.get(time);
                    time++;
        %&gt;
        &lt;td width="</span><span class="mi">33</span><span class="o">%</span><span class="s">" height="</span><span class="mi">160</span><span class="s">"&gt;
            &lt;table width="</span><span class="mi">100</span><span class="o">%</span><span class="s">" height="</span><span class="mi">100</span><span class="o">%</span><span class="s">" border="</span><span class="mi">0</span><span class="s">" cellpadding="</span><span class="mi">1</span><span class="s">" cellspacing="</span><span class="mi">1</span><span class="s">" class="</span><span class="n">abc</span><span class="s">"&gt;
                &lt;tr align="</span><span class="n">left</span><span class="s">" valign="</span><span class="n">top</span><span class="s">"&gt;
                    &lt;td width="</span><span class="mi">40</span><span class="o">%</span><span class="s">" height="</span><span class="mi">60</span><span class="o">%</span><span class="s">" rowspan="</span><span class="mi">3</span><span class="s">"&gt;&lt;img src="</span><span class="n">img</span><span class="o">/</span><span class="n">right</span><span class="o">/&lt;%=</span><span class="n">gb</span><span class="o">.</span><span class="na">getPhoto</span><span class="o">()</span> <span class="o">%&gt;</span><span class="s">" width="</span><span class="mi">112</span><span class="s">" height="</span><span class="mi">112</span><span class="s">"&gt;&lt;/td&gt;
                    &lt;td width="</span><span class="mi">60</span><span class="o">%</span><span class="s">" height="</span><span class="mi">35</span><span class="s">" align="</span><span class="n">left</span><span class="s">" valign="</span><span class="n">top</span><span class="s">"&gt;&lt;div align="</span><span class="n">left</span><span class="s">"&gt;&lt;/div&gt; &lt;div align="</span><span class="n">left</span><span class="s">"&gt;&lt;/div&gt; &lt;div align="</span><span class="n">left</span><span class="s">"&gt;&lt;/div&gt;&lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr&gt;
                    &lt;td width="</span><span class="mi">60</span><span class="o">%</span><span class="s">" height="</span><span class="mi">31</span><span class="s">" align="</span><span class="n">left</span><span class="s">" valign="</span><span class="n">top</span><span class="s">"&gt;&lt;a href="</span><span class="nc">ShowGoodsClServlet</span><span class="o">?</span><span class="n">type</span><span class="o">=</span><span class="n">showDetail</span><span class="o">&amp;</span><span class="n">id</span><span class="o">=&lt;%=</span><span class="n">gb</span><span class="o">.</span><span class="na">getGoodsId</span><span class="o">()</span> <span class="o">%&gt;</span><span class="s">"&gt;&lt;%=gb.getGoodsName() %&gt;&lt;/a&gt;&lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr&gt;
                    &lt;td width="</span><span class="mi">60</span><span class="o">%</span><span class="s">" height="</span><span class="mi">12</span><span class="o">%</span><span class="s">" align="</span><span class="n">left</span><span class="s">" valign="</span><span class="n">top</span><span class="s">"&gt;价格：$&lt;%=gb.getGoodsPrice() %&gt;&lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr align="</span><span class="n">left</span><span class="s">" valign="</span><span class="n">top</span><span class="s">"&gt;
                    &lt;td height="</span><span class="mi">50</span><span class="s">" colspan="</span><span class="mi">2</span><span class="s">"&gt;&lt;p&gt;简单介绍：&lt;%=gb.getGoodsIntro() %&gt;&lt;/p&gt;
                        &lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;/td&gt;
                &lt;/tr&gt;
            &lt;/table&gt;&lt;/td&gt;
        &lt;%
                }else break;
            }
        %&gt;
    &lt;/tr&gt;
    &lt;%
        //判断第一大行是否结束
        if(i==0)
        {
    %&gt;
    &lt;tr bgcolor="</span><span class="err">#</span><span class="no">FF9999</span><span class="s">"&gt;
        &lt;td height="</span><span class="mi">10</span><span class="s">" colspan="</span><span class="mi">3</span><span class="s">" align="</span><span class="n">center</span><span class="s">"&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;%
            }
        }
    %&gt;
    &lt;tr&gt;
        &lt;td height="</span><span class="mi">25</span><span class="s">" colspan="</span><span class="mi">3</span><span class="s">" align="</span><span class="n">center</span><span class="s">"&gt;
            &lt;%
                for(int i=1;i&lt;=pageCount;i++)
                {
            %&gt;
            &lt;a href="</span><span class="nc">ShowGoodsClServlet</span><span class="o">?</span><span class="n">type</span><span class="o">=</span><span class="n">fenye</span><span class="o">&amp;</span><span class="n">pageNow</span><span class="o">=&lt;%=</span><span class="n">i</span> <span class="o">%&gt;</span><span class="err">"</span><span class="o">&gt;</span><span class="err">【</span><span class="o">&lt;%=</span><span class="n">i</span> <span class="o">%&gt;</span><span class="err">】</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span>
            <span class="o">&lt;%</span>
                <span class="o">}</span>
            <span class="o">%&gt;</span>
        <span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">table</span><span class="o">&gt;</span>
</code></pre></div></div> <p><strong>view_WebRoot/showDetail.jsp</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
</code></pre></div></div> <p><strong>aaaa</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;%</span><span class="err">@</span> <span class="n">page</span> <span class="n">language</span><span class="o">=</span><span class="s">"java"</span> <span class="kn">import</span><span class="err">="</span><span class="nn">java.util.*</span><span class="o">,</span><span class="nc">Shop</span><span class="o">.</span><span class="na">model</span><span class="o">.*</span><span class="s">" pageEncoding="</span><span class="n">utf</span><span class="o">-</span><span class="mi">8</span><span class="s">"%&gt;
&lt;%
    String path = request.getContextPath();
    String basePath = request.getScheme()+"</span><span class="o">:</span><span class="c1">//"+request.getServerName()+":"+request.getServerPort()+path+"/";</span>
<span class="c1">//初始数据一般写在这里</span>
<span class="c1">//取出要显示的信息(goodsBean)</span>
    <span class="nc">GoodsBean</span> <span class="n">gb</span><span class="o">=(</span><span class="nc">GoodsBean</span><span class="o">)</span><span class="n">request</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">"goodsInfo"</span><span class="o">);</span>
<span class="o">%&gt;</span>
<span class="o">&lt;!</span><span class="no">DOCTYPE</span> <span class="no">HTML</span> <span class="no">PUBLIC</span> <span class="s">"-//W3C//DTD HTML 4.01 Transitional//EN"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">head</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">base</span> <span class="n">href</span><span class="o">=</span><span class="s">"&lt;%=basePath%&gt;"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span><span class="nc">My</span> <span class="no">JSP</span> <span class="err">'</span><span class="n">showDetail</span><span class="o">.</span><span class="na">jsp</span><span class="err">'</span> <span class="n">starting</span> <span class="n">page</span><span class="o">&lt;/</span><span class="n">title</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"pragma"</span> <span class="n">content</span><span class="o">=</span><span class="s">"no-cache"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"cache-control"</span> <span class="n">content</span><span class="o">=</span><span class="s">"no-cache"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"expires"</span> <span class="n">content</span><span class="o">=</span><span class="s">"0"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"keywords"</span> <span class="n">content</span><span class="o">=</span><span class="s">"keyword1,keyword2,keyword3"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"description"</span> <span class="n">content</span><span class="o">=</span><span class="s">"This is my page"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">link</span> <span class="n">rel</span><span class="o">=</span><span class="s">"stylesheet"</span> <span class="n">type</span><span class="o">=</span><span class="s">"text/css"</span> <span class="n">href</span><span class="o">=</span><span class="s">"css/my.css"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">script</span> <span class="n">type</span><span class="o">=</span><span class="s">"text/javascript"</span><span class="o">&gt;</span>
        <span class="o">&lt;!--</span>
        <span class="c1">//响应点击返回购物大厅的事件</span>
        <span class="n">function</span> <span class="nf">returnHall</span><span class="o">()</span>
        <span class="o">{</span>
            <span class="c1">//默认open函数是打开一个新页面</span>
            <span class="c1">//如果在后面加入一个_self</span>
            <span class="n">window</span><span class="o">.</span><span class="na">open</span><span class="o">(</span><span class="s">"index.jsp"</span><span class="o">,</span><span class="s">"_self"</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="c1">//响应点击购买货物的事件</span>
        <span class="n">function</span> <span class="nf">addGoods</span><span class="o">(</span><span class="n">goodsId</span><span class="o">)</span>
        <span class="o">{</span>
            <span class="c1">//判断是否得到货物id</span>
            <span class="c1">//window.alert(goodsId);</span>
            <span class="c1">//向ShoppingClServlet请求添加货物</span>
            <span class="n">window</span><span class="o">.</span><span class="na">open</span><span class="o">(</span><span class="s">"ShoppingClServlet?type=addGoods&amp;goodsId="</span><span class="o">+</span><span class="n">goodsId</span><span class="o">,</span><span class="s">"_self"</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="o">--&gt;</span>
    <span class="o">&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">head</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">body</span> <span class="n">background</span><span class="o">=</span><span class="s">"img/bg.jpg"</span> <span class="n">topmargin</span><span class="o">=</span><span class="s">"0"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">table</span> <span class="n">width</span><span class="o">=</span><span class="s">"100%"</span> <span class="n">border</span><span class="o">=</span><span class="s">"1"</span> <span class="n">cellspacing</span><span class="o">=</span><span class="s">"1"</span> <span class="n">cellpadding</span><span class="o">=</span><span class="s">"1"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">td</span> <span class="n">align</span><span class="o">=</span><span class="s">"center"</span> <span class="n">valign</span><span class="o">=</span><span class="s">"middle"</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">table</span> <span class="n">width</span><span class="o">=</span><span class="s">"100%"</span> <span class="n">border</span><span class="o">=</span><span class="s">"0"</span> <span class="n">cellpadding</span><span class="o">=</span><span class="s">"1"</span> <span class="n">cellspacing</span><span class="o">=</span><span class="s">"1"</span> <span class="kd">class</span><span class="err">="</span><span class="nc">abc</span><span class="s">"&gt;
                &lt;tr align="</span><span class="n">center</span><span class="s">"&gt;
                    &lt;td height="</span><span class="mi">25</span><span class="s">" colspan="</span><span class="mi">2</span><span class="s">"&gt;
                        &lt;jsp:include page="</span><span class="n">head</span><span class="o">.</span><span class="na">jsp</span><span class="s">" flush="</span><span class="kc">true</span><span class="s">"&gt;&lt;/jsp:include&gt;
                    &lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr&gt;
                    &lt;td width="</span><span class="mi">22</span><span class="o">%</span><span class="s">" rowspan="</span><span class="mi">7</span><span class="s">"&gt;&lt;img src="</span><span class="n">img</span><span class="o">/</span><span class="n">right</span><span class="o">/&lt;%=</span><span class="n">gb</span><span class="o">.</span><span class="na">getPhoto</span><span class="o">()</span> <span class="o">%&gt;</span><span class="s">" width="</span><span class="mi">136</span><span class="s">" height="</span><span class="mi">169</span><span class="s">"&gt;&lt;/td&gt;
                    &lt;td width="</span><span class="mi">78</span><span class="o">%</span><span class="s">" height="</span><span class="mi">25</span><span class="s">" align="</span><span class="n">center</span><span class="s">"&gt;&lt;strong&gt;&lt;%=gb.getGoodsName() %&gt;&lt;/strong&gt;&lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr&gt;
                    &lt;td height="</span><span class="mi">24</span><span class="s">"&gt;价格：￥&lt;%=gb.getGoodsPrice() %&gt;&lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr&gt;
                    &lt;td height="</span><span class="mi">27</span><span class="s">"&gt;&amp;nbsp;&lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr&gt;
                    &lt;td height="</span><span class="mi">27</span><span class="s">"&gt;ISBN:&lt;%=gb.getGoodsId() %&gt;&lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr&gt;
                    &lt;td height="</span><span class="mi">25</span><span class="s">"&gt;类型：&lt;%=gb.getGoodsType() %&gt;&lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr&gt;
                    &lt;td height="</span><span class="mi">26</span><span class="s">"&gt;出版商：&lt;%=gb.getPublisher() %&gt;&lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr&gt;
                    &lt;td height="</span><span class="mi">72</span><span class="s">" align="</span><span class="n">left</span><span class="s">" valign="</span><span class="n">top</span><span class="s">"&gt;简介：&lt;%=gb.getGoodsIntro() %&gt;&lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr&gt;
                    &lt;td height="</span><span class="mi">33</span><span class="s">" colspan="</span><span class="mi">2</span><span class="s">"&gt;&lt;input type="</span><span class="n">submit</span><span class="s">" name="</span><span class="nc">Submit</span><span class="s">" onclick="</span><span class="n">addGoods</span><span class="o">(&lt;%=</span><span class="n">gb</span><span class="o">.</span><span class="na">getGoodsId</span><span class="o">()</span> <span class="o">%&gt;)</span><span class="s">" value="</span> <span class="err">购买</span> <span class="s">"&gt;
                        &lt;input type="</span><span class="n">submit</span><span class="s">" name="</span><span class="nc">Submit2</span><span class="s">" onclick="</span><span class="n">returnHall</span><span class="o">()</span><span class="s">" value="</span><span class="err">返回购物大厅</span><span class="s">"&gt;&lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr&gt;
                    &lt;td height="</span><span class="mi">32</span><span class="s">" colspan="</span><span class="mi">2</span><span class="s">"&gt;&amp;nbsp;&lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr align="</span><span class="n">center</span><span class="s">"&gt;
                    &lt;td height="</span><span class="mi">20</span><span class="s">" colspan="</span><span class="mi">2</span><span class="s">"&gt;
                        &lt;jsp:include page="</span><span class="n">tail</span><span class="o">.</span><span class="na">jsp</span><span class="s">" flush="</span><span class="kc">true</span><span class="err">"</span><span class="o">&gt;&lt;/</span><span class="nl">jsp:</span><span class="n">include</span><span class="o">&gt;</span>
                    <span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
                <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">table</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">table</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</code></pre></div></div> <p><strong>view_WebRoot/showMycart.jsp</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;%</span><span class="err">@</span> <span class="n">page</span> <span class="n">language</span><span class="o">=</span><span class="s">"java"</span> <span class="kn">import</span><span class="err">="</span><span class="nn">java.util.*</span><span class="o">,</span><span class="nc">Shop</span><span class="o">.</span><span class="na">model</span><span class="o">.*</span><span class="s">" pageEncoding="</span><span class="n">utf</span><span class="o">-</span><span class="mi">8</span><span class="s">"%&gt;
&lt;%
    String path = request.getContextPath();
    String basePath = request.getScheme()+"</span><span class="o">:</span><span class="c1">//"+request.getServerName()+":"+request.getServerPort()+path+"/";</span>
<span class="c1">//取出al [购物车中的商品]</span>
    <span class="nc">ArrayList</span> <span class="n">al</span><span class="o">=(</span><span class="nc">ArrayList</span><span class="o">)</span><span class="n">request</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">"mycartInfo"</span><span class="o">);</span>
<span class="c1">//从session中取出购物车(注意购物车是存在session中)</span>
    <span class="nc">MyCartBO</span> <span class="n">mbo</span><span class="o">=(</span><span class="nc">MyCartBO</span><span class="o">)</span><span class="n">session</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">"mycart"</span><span class="o">);</span>
<span class="o">%&gt;</span>
<span class="o">&lt;!</span><span class="no">DOCTYPE</span> <span class="no">HTML</span> <span class="no">PUBLIC</span> <span class="s">"-//W3C//DTD HTML 4.01 Transitional//EN"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">head</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">base</span> <span class="n">href</span><span class="o">=</span><span class="s">"&lt;%=basePath%&gt;"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span><span class="nc">My</span> <span class="no">JSP</span> <span class="err">'</span><span class="n">showMycar</span><span class="o">.</span><span class="na">jsp</span><span class="err">'</span> <span class="n">starting</span> <span class="n">page</span><span class="o">&lt;/</span><span class="n">title</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"pragma"</span> <span class="n">content</span><span class="o">=</span><span class="s">"no-cache"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"cache-control"</span> <span class="n">content</span><span class="o">=</span><span class="s">"no-cache"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"expires"</span> <span class="n">content</span><span class="o">=</span><span class="s">"0"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"keywords"</span> <span class="n">content</span><span class="o">=</span><span class="s">"keyword1,keyword2,keyword3"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"description"</span> <span class="n">content</span><span class="o">=</span><span class="s">"This is my page"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">link</span> <span class="n">rel</span><span class="o">=</span><span class="s">"stylesheet"</span> <span class="n">type</span><span class="o">=</span><span class="s">"text/css"</span> <span class="n">href</span><span class="o">=</span><span class="s">"css/my.css"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">script</span> <span class="n">type</span><span class="o">=</span><span class="s">"text/javascript"</span><span class="o">&gt;</span>
        <span class="o">&lt;!--</span>
        <span class="c1">//响应删除全部书籍</span>
        <span class="n">function</span> <span class="nf">delAll</span><span class="o">()</span>
        <span class="o">{</span>
            <span class="n">window</span><span class="o">.</span><span class="na">open</span><span class="o">(</span><span class="s">"ShoppingClServlet?type=delAll"</span><span class="o">,</span><span class="s">"_self"</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="o">--&gt;</span>
    <span class="o">&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">head</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">body</span> <span class="n">topmargin</span><span class="o">=</span><span class="s">"0"</span> <span class="n">background</span><span class="o">=</span><span class="s">"img/bg.jpg"</span> <span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">table</span> <span class="n">width</span><span class="o">=</span><span class="s">"80%"</span> <span class="n">align</span><span class="o">=</span><span class="s">"center"</span> <span class="n">border</span><span class="o">=</span><span class="s">"0"</span> <span class="n">cellpadding</span><span class="o">=</span><span class="s">"1"</span> <span class="n">cellspacing</span><span class="o">=</span><span class="s">"1"</span> <span class="kd">class</span><span class="err">="</span><span class="nc">abc</span><span class="s">"&gt;
    &lt;tr&gt;
        &lt;td align="</span><span class="n">center</span><span class="s">"&gt;
            &lt;jsp:include page="</span><span class="n">head</span><span class="o">.</span><span class="na">jsp</span><span class="s">" flush="</span><span class="kc">true</span><span class="s">"&gt;&lt;/jsp:include&gt;
        &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td align="</span><span class="n">center</span><span class="s">"&gt;
            &lt;form action="</span><span class="nc">ShoppingClServlet</span><span class="o">?</span><span class="n">type</span><span class="o">=</span><span class="n">updateGoods</span><span class="s">" method="</span><span class="n">post</span><span class="s">"&gt;
                &lt;table width="</span><span class="mi">100</span><span class="o">%</span><span class="s">" border="</span><span class="mi">1</span><span class="s">" cellpadding="</span><span class="mi">1</span><span class="s">" cellspacing="</span><span class="mi">1</span><span class="s">" class="</span><span class="n">abc</span><span class="s">"&gt;
                    &lt;tr align="</span><span class="n">center</span><span class="s">"&gt;
                        &lt;td colspan="</span><span class="mi">6</span><span class="s">"&gt;&lt;img src="</span><span class="n">img</span><span class="o">/</span><span class="n">car</span><span class="o">/</span><span class="n">img_1</span><span class="o">.</span><span class="na">jpg</span><span class="s">" width="</span><span class="mi">634</span><span class="s">" height="</span><span class="mi">48</span><span class="s">"&gt;&lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr align="</span><span class="n">center</span><span class="s">"&gt;
                        &lt;td width="</span><span class="mi">20</span><span class="o">%</span><span class="s">"&gt;编号&lt;/td&gt;
                        &lt;td width="</span><span class="mi">25</span><span class="o">%</span><span class="s">"&gt;名称&lt;/td&gt;
                        &lt;td width="</span><span class="mi">25</span><span class="o">%</span><span class="s">"&gt;单价&lt;/td&gt;
                        &lt;td colspan="</span><span class="mi">3</span><span class="s">"&gt;数量&lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;%
                        for(int i=0;i&lt;al.size();i++)
                        {
                            //从al中取出货物bean
                            GoodsBean gb=(GoodsBean)al.get(i);
                    %&gt;
                    &lt;tr align="</span><span class="n">center</span><span class="s">"&gt;
                        &lt;td width="</span><span class="mi">20</span><span class="o">%</span><span class="s">"&gt;&lt;%=gb.getGoodsId() %&gt;&lt;/td&gt;
                        &lt;td width="</span><span class="mi">25</span><span class="o">%</span><span class="s">"&gt;&lt;%=gb.getGoodsName() %&gt;&lt;/td&gt;
                        &lt;td width="</span><span class="mi">25</span><span class="o">%</span><span class="s">"&gt;￥&lt;%=gb.getGoodsPrice() %&gt;&lt;/td&gt;
                        &lt;td width="</span><span class="mi">10</span><span class="o">%</span><span class="s">"&gt;
                            &lt;input type="</span><span class="n">hidden</span><span class="s">" name="</span><span class="n">goodsId</span><span class="s">" value="</span><span class="o">&lt;%=</span><span class="n">gb</span><span class="o">.</span><span class="na">getGoodsId</span><span class="o">()</span> <span class="o">%&gt;</span><span class="s">"/&gt;&lt;!-- 货物id --&gt;
                            &lt;%//System.out.println("</span><span class="n">showMycart</span><span class="o">.</span><span class="na">jsp</span><span class="err">中得到</span><span class="n">goodsId</span><span class="o">=</span><span class="s">"+gb.getGoodsId()); %&gt;
                            &lt;input name="</span><span class="n">newNums</span><span class="s">" type="</span><span class="n">text</span><span class="s">" size="</span><span class="mi">8</span><span class="s">" value="</span><span class="o">&lt;%=</span><span class="n">mbo</span><span class="o">.</span><span class="na">getGoodsNumById</span><span class="o">(</span><span class="n">gb</span><span class="o">.</span><span class="na">getGoodsId</span><span class="o">()+</span><span class="s">""</span><span class="o">)</span> <span class="o">%&gt;</span><span class="s">"/&gt; &lt;!-- 货物数量 --&gt;
                        &lt;/td&gt;
                        &lt;td width="</span><span class="mi">10</span><span class="o">%</span><span class="s">"&gt;&lt;a href="</span><span class="nc">ShoppingClServlet</span><span class="o">?</span><span class="n">type</span><span class="o">=</span><span class="n">delGoods</span><span class="o">&amp;</span><span class="n">goodsId</span><span class="o">=&lt;%=</span><span class="n">gb</span><span class="o">.</span><span class="na">getGoodsId</span><span class="o">()</span> <span class="o">%&gt;</span><span class="s">"&gt;删除&lt;/a&gt;&lt;/td&gt;
                        &lt;td width="</span><span class="mi">10</span><span class="o">%</span><span class="s">"&gt;&lt;a href="</span><span class="nc">ShowGoodsClServlet</span><span class="o">?</span><span class="n">type</span><span class="o">=</span><span class="n">showDetail</span><span class="o">&amp;</span><span class="n">id</span><span class="o">=&lt;%=</span><span class="n">gb</span><span class="o">.</span><span class="na">getGoodsId</span><span class="o">()</span> <span class="o">%&gt;</span><span class="s">"&gt;查看&lt;/a&gt;&lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;%
                        }
                    %&gt;
                    &lt;tr align="</span><span class="n">center</span><span class="s">"&gt;
                        &lt;td width="</span><span class="mi">20</span><span class="o">%</span><span class="s">"&gt;&amp;nbsp;&lt;/td&gt;
                        &lt;td width="</span><span class="mi">25</span><span class="o">%</span><span class="s">"&gt;&lt;input type="</span><span class="n">button</span><span class="s">" name="</span><span class="nc">Submit</span><span class="s">" onclick="</span><span class="n">delAll</span><span class="o">()</span><span class="s">" value="</span><span class="err">删除全部书籍</span><span class="s">"&gt;&lt;/td&gt;
                        &lt;td width="</span><span class="mi">25</span><span class="o">%</span><span class="s">"&gt;&lt;input type="</span><span class="n">submit</span><span class="s">" name="</span><span class="nc">Submit2</span><span class="s">" value="</span><span class="err">修</span> <span class="err">改</span> <span class="err">数</span> <span class="err">量</span><span class="s">"&gt;&lt;/td&gt;
                        &lt;td colspan="</span><span class="mi">3</span><span class="s">"&gt;&amp;nbsp;&lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;
                        &lt;td colspan="</span><span class="mi">6</span><span class="s">" bordercolor="</span><span class="err">#</span><span class="no">EFEAE6</span><span class="s">"&gt;&amp;nbsp;&lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr align="</span><span class="n">center</span><span class="s">"&gt;
                        &lt;td colspan="</span><span class="mi">6</span><span class="s">"&gt;&lt;table width="</span><span class="mi">100</span><span class="o">%</span><span class="s">" border="</span><span class="mi">0</span><span class="s">" cellpadding="</span><span class="mi">1</span><span class="s">" cellspacing="</span><span class="mi">1</span><span class="s">" class="</span><span class="n">abc</span><span class="s">"&gt;
                            &lt;tr&gt;
                                &lt;td width="</span><span class="mi">60</span><span class="o">%</span><span class="s">" align="</span><span class="n">left</span><span class="s">" nowrap&gt;您共选择了价值￥&lt;%=mbo.returnAllPrices() %&gt;元的商品，点击 &lt;a href="</span><span class="n">index</span><span class="o">.</span><span class="na">jsp</span><span class="s">"&gt;此处&lt;/a&gt; 继续购物。&lt;/td&gt;
                                &lt;td align="</span><span class="n">right</span><span class="s">"&gt;&lt;a href="</span><span class="nc">ShoppingCl2</span><span class="s">"&gt;&lt;img src="</span><span class="n">img</span><span class="o">/</span><span class="n">next</span><span class="o">.</span><span class="na">jpg</span><span class="s">" width="</span><span class="mi">84</span><span class="s">" height="</span><span class="mi">18</span><span class="s">" border="</span><span class="mi">0</span><span class="s">"&gt;&lt;/a&gt;&lt;/td&gt;
                            &lt;/tr&gt;
                        &lt;/table&gt;&lt;/td&gt;
                    &lt;/tr&gt;
                &lt;/table&gt;&lt;/form&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td align="</span><span class="n">center</span><span class="s">"&gt;&amp;nbsp;&lt;jsp:include page="</span><span class="n">tail</span><span class="o">.</span><span class="na">jsp</span><span class="s">" flush="</span><span class="kc">true</span><span class="err">"</span><span class="o">&gt;&lt;/</span><span class="nl">jsp:</span><span class="n">include</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">table</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</code></pre></div></div> <p><strong>view_WebRoot/shopping2.jsp</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;%</span><span class="err">@</span> <span class="n">page</span> <span class="n">language</span><span class="o">=</span><span class="s">"java"</span> <span class="kn">import</span><span class="err">="</span><span class="nn">java.util.*</span><span class="s">" pageEncoding="</span><span class="n">utf</span><span class="o">-</span><span class="mi">8</span><span class="s">"%&gt;
&lt;%
    String path = request.getContextPath();
    String basePath = request.getScheme()+"</span><span class="o">:</span><span class="c1">//"+request.getServerName()+":"+request.getServerPort()+path+"/";</span>
<span class="o">%&gt;</span>
<span class="o">&lt;!</span><span class="no">DOCTYPE</span> <span class="no">HTML</span> <span class="no">PUBLIC</span> <span class="s">"-//W3C//DTD HTML 4.01 Transitional//EN"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">head</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">base</span> <span class="n">href</span><span class="o">=</span><span class="s">"&lt;%=basePath%&gt;"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span><span class="nc">My</span> <span class="no">JSP</span> <span class="err">'</span><span class="n">shopping2</span><span class="o">.</span><span class="na">jsp</span><span class="err">'</span> <span class="n">starting</span> <span class="n">page</span><span class="o">&lt;/</span><span class="n">title</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"pragma"</span> <span class="n">content</span><span class="o">=</span><span class="s">"no-cache"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"cache-control"</span> <span class="n">content</span><span class="o">=</span><span class="s">"no-cache"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"expires"</span> <span class="n">content</span><span class="o">=</span><span class="s">"0"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"keywords"</span> <span class="n">content</span><span class="o">=</span><span class="s">"keyword1,keyword2,keyword3"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"description"</span> <span class="n">content</span><span class="o">=</span><span class="s">"This is my page"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">link</span> <span class="n">rel</span><span class="o">=</span><span class="s">"stylesheet"</span> <span class="n">type</span><span class="o">=</span><span class="s">"text/css"</span> <span class="n">href</span><span class="o">=</span><span class="s">"css/my.css"</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">head</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">body</span> <span class="n">topmargin</span><span class="o">=</span><span class="s">"0"</span> <span class="n">background</span><span class="o">=</span><span class="s">"img/bg.jpg"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">table</span> <span class="n">width</span><span class="o">=</span><span class="s">"80%"</span> <span class="n">border</span><span class="o">=</span><span class="s">"0"</span> <span class="n">align</span><span class="o">=</span><span class="s">"center"</span> <span class="n">cellpadding</span><span class="o">=</span><span class="s">"1"</span> <span class="n">cellspacing</span><span class="o">=</span><span class="s">"1"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">td</span> <span class="n">align</span><span class="o">=</span><span class="s">"center"</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nl">jsp:</span><span class="n">include</span> <span class="n">page</span><span class="o">=</span><span class="s">"head.jsp"</span> <span class="n">flush</span><span class="o">=</span><span class="s">"true"</span><span class="o">&gt;&lt;/</span><span class="nl">jsp:</span><span class="n">include</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">td</span> <span class="n">align</span><span class="o">=</span><span class="s">"center"</span><span class="o">&gt;&lt;</span><span class="n">table</span> <span class="n">width</span><span class="o">=</span><span class="s">"100%"</span> <span class="n">border</span><span class="o">=</span><span class="s">"1"</span> <span class="n">cellspacing</span><span class="o">=</span><span class="s">"1"</span> <span class="n">cellpadding</span><span class="o">=</span><span class="s">"1"</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">align</span><span class="o">=</span><span class="s">"center"</span><span class="o">&gt;&lt;</span><span class="n">img</span> <span class="n">src</span><span class="o">=</span><span class="s">"img/shopping2/yanzhen.jpg"</span> <span class="n">width</span><span class="o">=</span><span class="s">"591"</span> <span class="n">height</span><span class="o">=</span><span class="s">"48"</span><span class="o">&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">align</span><span class="o">=</span><span class="s">"center"</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">form</span> <span class="n">action</span><span class="o">=</span><span class="s">"LoginCl"</span> <span class="n">method</span><span class="o">=</span><span class="s">"post"</span><span class="o">&gt;</span>
                        <span class="o">&lt;</span><span class="n">table</span> <span class="n">width</span><span class="o">=</span><span class="s">"40%"</span> <span class="n">border</span><span class="o">=</span><span class="s">"2"</span> <span class="n">cellpadding</span><span class="o">=</span><span class="s">"1"</span> <span class="n">cellspacing</span><span class="o">=</span><span class="s">"1"</span> <span class="n">bordercolor</span><span class="o">=</span><span class="s">"#00CC00"</span> <span class="kd">class</span><span class="err">="</span><span class="nc">abc</span><span class="s">"&gt;
                            &lt;tr align="</span><span class="n">center</span><span class="s">"&gt;
                                &lt;td colspan="</span><span class="mi">2</span><span class="s">"&gt;&lt;img src="</span><span class="n">img</span><span class="o">/</span><span class="n">shopping2</span><span class="o">/</span><span class="n">dl</span><span class="o">.</span><span class="na">jpg</span><span class="s">" width="</span><span class="mi">149</span><span class="s">" height="</span><span class="mi">55</span><span class="s">"&gt;&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr align="</span><span class="n">center</span><span class="s">"&gt;
                                &lt;td width="</span><span class="mi">45</span><span class="o">%</span><span class="s">" align="</span><span class="n">right</span><span class="s">"&gt;用户名：&lt;/td&gt;
                                &lt;td align="</span><span class="n">left</span><span class="s">"&gt;&lt;input name="</span><span class="n">username</span><span class="s">" type="</span><span class="n">text</span><span class="s">" size="</span><span class="mi">12</span><span class="s">" maxlength="</span><span class="mi">16</span><span class="s">"&gt;&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr align="</span><span class="n">center</span><span class="s">"&gt;
                                &lt;td width="</span><span class="mi">45</span><span class="o">%</span><span class="s">" align="</span><span class="n">right</span><span class="s">"&gt; 密&amp;nbsp;&amp;nbsp;码：&lt;/td&gt;
                                &lt;td align="</span><span class="n">left</span><span class="s">"&gt;&lt;input name="</span><span class="n">passwd</span><span class="s">" type="</span><span class="n">text</span><span class="s">" size="</span><span class="mi">12</span><span class="s">" maxlength="</span><span class="mi">16</span><span class="s">"&gt;&lt;/td&gt;
                            &lt;/tr&gt;
                            &lt;tr align="</span><span class="n">center</span><span class="s">"&gt;
                                &lt;td width="</span><span class="mi">45</span><span class="o">%</span><span class="s">"&gt;&lt;input type="</span><span class="n">submit</span><span class="s">" name="</span><span class="nc">Submit</span><span class="s">" value="</span><span class="err">用户登录</span><span class="s">"&gt;&lt;/td&gt;
                                &lt;td &gt;&lt;input type="</span><span class="n">submit</span><span class="s">" name="</span><span class="nc">Submit2</span><span class="s">" value="</span><span class="err">用户注册</span><span class="s">"&gt;&lt;/td&gt;
                            &lt;/tr&gt;
                        &lt;/table&gt;&lt;/form&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td align="</span><span class="n">right</span><span class="s">"&gt;&lt;img src="</span><span class="n">img</span><span class="o">/</span><span class="n">next</span><span class="o">.</span><span class="na">jpg</span><span class="s">" width="</span><span class="mi">84</span><span class="s">" height="</span><span class="mi">18</span><span class="s">"&gt;&lt;/td&gt;
            &lt;/tr&gt;
        &lt;/table&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td align="</span><span class="n">center</span><span class="s">"&gt;
            &lt;jsp:include page="</span><span class="n">tail</span><span class="o">.</span><span class="na">jsp</span><span class="s">" flush="</span><span class="kc">true</span><span class="err">"</span><span class="o">&gt;&lt;/</span><span class="nl">jsp:</span><span class="n">include</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">table</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</code></pre></div></div> <p><strong>view_WebRoot/shopping3.jsp</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;%</span><span class="err">@</span> <span class="n">page</span> <span class="n">language</span><span class="o">=</span><span class="s">"java"</span> <span class="kn">import</span><span class="err">="</span><span class="nn">java.util.*</span><span class="o">,</span><span class="nc">Shop</span><span class="o">.</span><span class="na">model</span><span class="o">.*</span><span class="s">" pageEncoding="</span><span class="n">utf</span><span class="o">-</span><span class="mi">8</span><span class="s">"%&gt;
&lt;%
    String path = request.getContextPath();
    String basePath = request.getScheme()+"</span><span class="o">:</span><span class="c1">//"+request.getServerName()+":"+request.getServerPort()+path+"/";</span>
<span class="c1">//得到用户信息</span>
    <span class="nc">UserBean</span> <span class="n">ub</span><span class="o">=(</span><span class="nc">UserBean</span><span class="o">)</span><span class="n">session</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">"userInfo"</span><span class="o">);</span>
<span class="c1">//得到购物车的信息</span>
    <span class="nc">ArrayList</span> <span class="n">al</span><span class="o">=(</span><span class="nc">ArrayList</span><span class="o">)</span><span class="n">request</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">"mycartInfo"</span><span class="o">);</span>
<span class="c1">//GoodsBean gb=(GoodsBean)al.get(1);</span>
<span class="c1">//System.out.println("goodsId="+gb.getGoodsId());</span>
<span class="c1">//得到购物车</span>
    <span class="nc">MyCartBO</span> <span class="n">mcb</span><span class="o">=(</span><span class="nc">MyCartBO</span><span class="o">)</span><span class="n">session</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">"mycart"</span><span class="o">);</span>
<span class="o">%&gt;</span>
<span class="o">&lt;!</span><span class="no">DOCTYPE</span> <span class="no">HTML</span> <span class="no">PUBLIC</span> <span class="s">"-//W3C//DTD HTML 4.01 Transitional//EN"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">head</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">base</span> <span class="n">href</span><span class="o">=</span><span class="s">"&lt;%=basePath%&gt;"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span><span class="nc">My</span> <span class="no">JSP</span> <span class="err">'</span><span class="n">shopping3</span><span class="o">.</span><span class="na">jsp</span><span class="err">'</span> <span class="n">starting</span> <span class="n">page</span><span class="o">&lt;/</span><span class="n">title</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"pragma"</span> <span class="n">content</span><span class="o">=</span><span class="s">"no-cache"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"cache-control"</span> <span class="n">content</span><span class="o">=</span><span class="s">"no-cache"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"expires"</span> <span class="n">content</span><span class="o">=</span><span class="s">"0"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"keywords"</span> <span class="n">content</span><span class="o">=</span><span class="s">"keyword1,keyword2,keyword3"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"description"</span> <span class="n">content</span><span class="o">=</span><span class="s">"This is my page"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">link</span> <span class="n">rel</span><span class="o">=</span><span class="s">"stylesheet"</span> <span class="n">type</span><span class="o">=</span><span class="s">"text/css"</span> <span class="n">href</span><span class="o">=</span><span class="s">"css/my.css"</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">head</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">body</span> <span class="n">topmargin</span><span class="o">=</span><span class="s">"0"</span> <span class="n">background</span><span class="o">=</span><span class="s">"img/bg.jpg"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">table</span> <span class="n">width</span><span class="o">=</span><span class="s">"80%"</span> <span class="n">border</span><span class="o">=</span><span class="s">"0"</span> <span class="n">align</span><span class="o">=</span><span class="s">"center"</span> <span class="n">cellpadding</span><span class="o">=</span><span class="s">"1"</span> <span class="n">cellspacing</span><span class="o">=</span><span class="s">"1"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">td</span> <span class="n">align</span><span class="o">=</span><span class="s">"center"</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nl">jsp:</span><span class="n">include</span> <span class="n">page</span><span class="o">=</span><span class="s">"head.jsp"</span> <span class="n">flush</span><span class="o">=</span><span class="s">"true"</span><span class="o">&gt;&lt;/</span><span class="nl">jsp:</span><span class="n">include</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">td</span> <span class="n">align</span><span class="o">=</span><span class="s">"center"</span><span class="o">&gt;&lt;</span><span class="n">table</span> <span class="n">width</span><span class="o">=</span><span class="s">"100%"</span> <span class="n">border</span><span class="o">=</span><span class="s">"1"</span> <span class="n">cellspacing</span><span class="o">=</span><span class="s">"1"</span> <span class="n">cellpadding</span><span class="o">=</span><span class="s">"1"</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">align</span><span class="o">=</span><span class="s">"center"</span><span class="o">&gt;&lt;</span><span class="n">img</span> <span class="n">src</span><span class="o">=</span><span class="s">"img/shopping3/shopping3.jpg"</span> <span class="n">width</span><span class="o">=</span><span class="s">"607"</span> <span class="n">height</span><span class="o">=</span><span class="s">"45"</span><span class="o">&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">td</span> <span class="n">align</span><span class="o">=</span><span class="s">"center"</span><span class="o">&gt;&lt;</span><span class="n">table</span> <span class="n">width</span><span class="o">=</span><span class="s">"80%"</span> <span class="n">border</span><span class="o">=</span><span class="s">"1"</span> <span class="n">cellpadding</span><span class="o">=</span><span class="s">"1"</span> <span class="n">cellspacing</span><span class="o">=</span><span class="s">"1"</span> <span class="n">bordercolor</span><span class="o">=</span><span class="s">"#00CC00"</span> <span class="kd">class</span><span class="err">="</span><span class="nc">abc</span><span class="s">"&gt;
                    &lt;tr align="</span><span class="n">center</span><span class="s">"&gt;
                        &lt;td colspan="</span><span class="mi">2</span><span class="s">"&gt;购买人的信息&lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;
                        &lt;td width="</span><span class="mi">50</span><span class="o">%</span><span class="s">" align="</span><span class="n">right</span><span class="s">"&gt;用&amp;nbsp;户&amp;nbsp;名：&lt;/td&gt;
                        &lt;td align="</span><span class="n">left</span><span class="s">"&gt;&lt;input type="</span><span class="n">text</span><span class="s">" name="</span><span class="n">textfield</span><span class="s">" value="</span><span class="o">&lt;%=</span><span class="n">ub</span><span class="o">.</span><span class="na">getUsername</span><span class="o">()</span> <span class="o">%&gt;</span><span class="s">"&gt;&lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;
                        &lt;td width="</span><span class="mi">50</span><span class="o">%</span><span class="s">" align="</span><span class="n">right</span><span class="s">"&gt;*真实姓名：&lt;/td&gt;
                        &lt;td align="</span><span class="n">left</span><span class="s">"&gt;&lt;input type="</span><span class="n">text</span><span class="s">" name="</span><span class="n">textfield2</span><span class="s">" value="</span><span class="o">&lt;%=</span><span class="n">ub</span><span class="o">.</span><span class="na">getTruename</span><span class="o">()</span> <span class="o">%&gt;</span><span class="s">"&gt;&lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;
                        &lt;td width="</span><span class="mi">50</span><span class="o">%</span><span class="s">" align="</span><span class="n">right</span><span class="s">"&gt;*家庭住址：&lt;/td&gt;
                        &lt;td align="</span><span class="n">left</span><span class="s">"&gt;&lt;input type="</span><span class="n">text</span><span class="s">" name="</span><span class="n">textfield22</span><span class="s">" value="</span><span class="o">&lt;%=</span><span class="n">ub</span><span class="o">.</span><span class="na">getAddress</span><span class="o">()</span> <span class="o">%&gt;</span><span class="s">"&gt;&lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;
                        &lt;td width="</span><span class="mi">50</span><span class="o">%</span><span class="s">" align="</span><span class="n">right</span><span class="s">"&gt;*联系电话：&lt;/td&gt;
                        &lt;td align="</span><span class="n">left</span><span class="s">"&gt;&lt;input type="</span><span class="n">text</span><span class="s">" name="</span><span class="n">textfield222</span><span class="s">" value="</span><span class="o">&lt;%=</span><span class="n">ub</span><span class="o">.</span><span class="na">getPhone</span><span class="o">()</span> <span class="o">%&gt;</span><span class="s">"&gt;&lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;
                        &lt;td width="</span><span class="mi">50</span><span class="o">%</span><span class="s">" align="</span><span class="n">right</span><span class="s">"&gt;*电子邮件：&lt;/td&gt;
                        &lt;td align="</span><span class="n">left</span><span class="s">"&gt;&lt;input type="</span><span class="n">text</span><span class="s">" name="</span><span class="n">textfield2222</span><span class="s">" value="</span><span class="o">&lt;%=</span><span class="n">ub</span><span class="o">.</span><span class="na">getEmail</span><span class="o">()</span> <span class="o">%&gt;</span><span class="s">"&gt;&lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;
                        &lt;td width="</span><span class="mi">50</span><span class="o">%</span><span class="s">" align="</span><span class="n">right</span><span class="s">"&gt;*邮&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;编：&lt;/td&gt;
                        &lt;td align="</span><span class="n">left</span><span class="s">"&gt;&lt;input type="</span><span class="n">text</span><span class="s">" name="</span><span class="n">textfield22222</span><span class="s">" value="</span><span class="o">&lt;%=</span><span class="n">ub</span><span class="o">.</span><span class="na">getPostcode</span><span class="o">()</span> <span class="o">%&gt;</span><span class="s">"&gt;&lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr&gt;
                        &lt;td width="</span><span class="mi">50</span><span class="o">%</span><span class="s">" align="</span><span class="n">right</span><span class="s">"&gt;&lt;input type="</span><span class="n">submit</span><span class="s">" name="</span><span class="nc">Submit</span><span class="s">" value="</span><span class="o">&amp;</span><span class="n">nbsp</span><span class="o">;&amp;</span><span class="n">nbsp</span><span class="o">;</span><span class="err">完成订单</span><span class="o">&amp;</span><span class="n">nbsp</span><span class="o">;&amp;</span><span class="n">nbsp</span><span class="o">;</span><span class="s">"&gt;&lt;/td&gt;
                        &lt;td&gt;&lt;input type="</span><span class="n">submit</span><span class="s">" name="</span><span class="nc">Submit2</span><span class="s">" value="</span><span class="err">修改个人信息</span><span class="s">"&gt;&lt;/td&gt;
                    &lt;/tr&gt;
                &lt;/table&gt; &lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td align="</span><span class="n">center</span><span class="s">"&gt;&lt;table width="</span><span class="mi">80</span><span class="o">%</span><span class="s">" border="</span><span class="mi">1</span><span class="s">" cellpadding="</span><span class="mi">1</span><span class="s">" cellspacing="</span><span class="mi">1</span><span class="s">" bordercolor="</span><span class="err">#</span><span class="mo">00</span><span class="no">CC00</span><span class="s">" class="</span><span class="n">abc</span><span class="s">"&gt;
                    &lt;tr&gt;
                        &lt;td colspan="</span><span class="mi">4</span><span class="s">" align="</span><span class="n">center</span><span class="s">"&gt;我的购物车&lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr align="</span><span class="n">center</span><span class="s">"&gt;
                        &lt;td&gt;编号&lt;/td&gt;
                        &lt;td&gt;商品名称&lt;/td&gt;
                        &lt;td&gt;单价&lt;/td&gt;
                        &lt;td&gt;数量&lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;%
                        for(int i=0;i&lt;al.size();i++)
                        {
                            GoodsBean gb=(GoodsBean)al.get(i);
                    %&gt;
                    &lt;tr align="</span><span class="n">center</span><span class="s">"&gt;
                        &lt;td&gt;&lt;%=gb.getGoodsId() %&gt;&lt;/td&gt;
                        &lt;td&gt;&lt;%=gb.getGoodsName() %&gt;&lt;/td&gt;
                        &lt;td&gt;&lt;%=gb.getGoodsPrice() %&gt;&lt;/td&gt;
                        &lt;td&gt;&lt;%=mcb.getGoodsNumById(gb.getGoodsId()+"") %&gt;&lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;%
                        }
                    %&gt;
                    &lt;tr align="</span><span class="n">left</span><span class="s">"&gt;
                        &lt;td colspan="</span><span class="mi">4</span><span class="s">"&gt;您选择了价值￥&lt;%=mcb.returnAllPrices() %&gt;元的商品。&lt;/td&gt;
                    &lt;/tr&gt;
                    &lt;tr align="</span><span class="n">center</span><span class="s">"&gt;
                        &lt;td colspan="</span><span class="mi">4</span><span class="s">"&gt;&lt;input type="</span><span class="n">submit</span><span class="s">" name="</span><span class="nc">Submit3</span><span class="s">" value="</span><span class="err">修改我的购物车</span><span class="s">"&gt;&lt;/td&gt;
                    &lt;/tr&gt;
                &lt;/table&gt; &lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td align="</span><span class="n">right</span><span class="s">"&gt;
                    &lt;a href="</span><span class="nc">ShoppingClServlet</span><span class="o">?</span><span class="n">type</span><span class="o">=</span><span class="n">show</span><span class="s">"&gt;
                        &lt;img src="</span><span class="n">img</span><span class="o">/</span><span class="n">pre</span><span class="o">.</span><span class="na">jpg</span><span class="s">" width="</span><span class="mi">85</span><span class="s">" height="</span><span class="mi">19</span><span class="s">"&gt;&amp;nbsp;
                    &lt;/a&gt;
                    &lt;a href="</span><span class="nc">OrderClServlet</span><span class="s">"&gt;
                        &lt;img src="</span><span class="n">img</span><span class="o">/</span><span class="n">next</span><span class="o">.</span><span class="na">jpg</span><span class="s">" width="</span><span class="mi">84</span><span class="s">" height="</span><span class="mi">18</span><span class="s">"&gt;
                    &lt;/a&gt;
                &lt;/td&gt;
            &lt;/tr&gt;
        &lt;/table&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td align="</span><span class="n">center</span><span class="s">"&gt;
            &lt;jsp:include page="</span><span class="n">tail</span><span class="o">.</span><span class="na">jsp</span><span class="s">" flush="</span><span class="kc">true</span><span class="err">"</span><span class="o">&gt;&lt;/</span><span class="nl">jsp:</span><span class="n">include</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">table</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</code></pre></div></div> <p><strong>view_WebRoot/shopping4.jsp</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;%</span><span class="err">@</span> <span class="n">page</span> <span class="n">language</span><span class="o">=</span><span class="s">"java"</span> <span class="kn">import</span><span class="err">="</span><span class="nn">java.util.*</span><span class="o">,</span><span class="nc">Shop</span><span class="o">.</span><span class="na">model</span><span class="o">.*</span><span class="s">" pageEncoding="</span><span class="n">utf</span><span class="o">-</span><span class="mi">8</span><span class="s">"%&gt;
&lt;%
    String path = request.getContextPath();
    String basePath = request.getScheme()+"</span><span class="o">:</span><span class="c1">//"+request.getServerName()+":"+request.getServerPort()+path+"/";</span>
<span class="c1">//订单的详细信息取出</span>
    <span class="nc">OrderInfoBean</span> <span class="n">oib</span><span class="o">=(</span><span class="nc">OrderInfoBean</span><span class="o">)</span><span class="n">request</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">"detailbean"</span><span class="o">);</span>
<span class="o">%&gt;</span>
<span class="o">&lt;!</span><span class="no">DOCTYPE</span> <span class="no">HTML</span> <span class="no">PUBLIC</span> <span class="s">"-//W3C//DTD HTML 4.01 Transitional//EN"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">head</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">base</span> <span class="n">href</span><span class="o">=</span><span class="s">"&lt;%=basePath%&gt;"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span><span class="nc">My</span> <span class="no">JSP</span> <span class="err">'</span><span class="n">shopping4</span><span class="o">.</span><span class="na">jsp</span><span class="err">'</span> <span class="n">starting</span> <span class="n">page</span><span class="o">&lt;/</span><span class="n">title</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"pragma"</span> <span class="n">content</span><span class="o">=</span><span class="s">"no-cache"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"cache-control"</span> <span class="n">content</span><span class="o">=</span><span class="s">"no-cache"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"expires"</span> <span class="n">content</span><span class="o">=</span><span class="s">"0"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"keywords"</span> <span class="n">content</span><span class="o">=</span><span class="s">"keyword1,keyword2,keyword3"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s">"description"</span> <span class="n">content</span><span class="o">=</span><span class="s">"This is my page"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">link</span> <span class="n">rel</span><span class="o">=</span><span class="s">"stylesheet"</span> <span class="n">type</span><span class="o">=</span><span class="s">"text/css"</span> <span class="n">href</span><span class="o">=</span><span class="s">"css/my.css"</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">head</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">body</span> <span class="n">topmargin</span><span class="o">=</span><span class="s">"0"</span> <span class="n">background</span><span class="o">=</span><span class="s">"img/bg.jpg"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">table</span> <span class="n">width</span><span class="o">=</span><span class="s">"80%"</span> <span class="n">border</span><span class="o">=</span><span class="s">"0"</span> <span class="n">align</span><span class="o">=</span><span class="s">"center"</span> <span class="n">cellpadding</span><span class="o">=</span><span class="s">"1"</span> <span class="n">cellspacing</span><span class="o">=</span><span class="s">"1"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">td</span> <span class="n">align</span><span class="o">=</span><span class="s">"center"</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nl">jsp:</span><span class="n">include</span> <span class="n">page</span><span class="o">=</span><span class="s">"head.jsp"</span> <span class="n">flush</span><span class="o">=</span><span class="s">"true"</span><span class="o">&gt;&lt;/</span><span class="nl">jsp:</span><span class="n">include</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">td</span> <span class="n">align</span><span class="o">=</span><span class="s">"center"</span><span class="o">&gt;&lt;</span><span class="n">table</span> <span class="n">width</span><span class="o">=</span><span class="s">"100%"</span> <span class="n">border</span><span class="o">=</span><span class="s">"1"</span> <span class="n">cellpadding</span><span class="o">=</span><span class="s">"1"</span> <span class="n">cellspacing</span><span class="o">=</span><span class="s">"1"</span> <span class="n">bordercolor</span><span class="o">=</span><span class="s">"#00CC00"</span> <span class="kd">class</span><span class="err">="</span><span class="nc">abc</span><span class="s">"&gt;
            &lt;tr align="</span><span class="n">center</span><span class="s">"&gt;
                &lt;td colspan="</span><span class="mi">9</span><span class="s">" nowrap&gt;&lt;img src="</span><span class="n">img</span><span class="o">/</span><span class="n">shopping4</span><span class="o">/</span><span class="n">shopping4</span><span class="o">.</span><span class="na">jpg</span><span class="s">" width="</span><span class="mi">599</span><span class="s">" height="</span><span class="mi">44</span><span class="s">"&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td colspan="</span><span class="mi">9</span><span class="s">" align="</span><span class="n">center</span><span class="s">" nowrap&gt;订单详细信息&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr align="</span><span class="n">center</span><span class="s">"&gt;
                &lt;td nowrap&gt;订单号&lt;/td&gt;
                &lt;td nowrap&gt;收货人&lt;/td&gt;
                &lt;td nowrap&gt;收货地址&lt;/td&gt;
                &lt;td nowrap&gt;邮编&lt;/td&gt;
                &lt;td nowrap&gt;电话&lt;/td&gt;
                &lt;td nowrap&gt;总价&lt;/td&gt;
                &lt;td nowrap&gt;用户名&lt;/td&gt;
                &lt;td nowrap&gt;电子邮件&lt;/td&gt;
                &lt;td nowrap&gt;备注&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr align="</span><span class="n">center</span><span class="s">"&gt;
                &lt;td nowrap&gt;&lt;%=oib.getOrdersId() %&gt;&lt;/td&gt;
                &lt;td nowrap&gt;&lt;%=oib.getTruename() %&gt;&lt;/td&gt;
                &lt;td nowrap&gt;&lt;%=oib.getAddress() %&gt;&lt;/td&gt;
                &lt;td nowrap&gt;&lt;%=oib.getPostcode()%&gt;&lt;/td&gt;
                &lt;td nowrap&gt;&lt;%=oib.getPhone() %&gt;&lt;/td&gt;
                &lt;td nowrap&gt;&lt;%=oib.getTotalPrice() %&gt;&lt;/td&gt;
                &lt;td nowrap&gt;&lt;%=oib.getUsername() %&gt;&lt;/td&gt;
                &lt;td nowrap&gt;&lt;%=oib.getEmail() %&gt;&lt;/td&gt;
                &lt;td nowrap&gt;&lt;a href="</span><span class="err">#</span><span class="s">"&gt;查看详情&lt;/a&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr align="</span><span class="n">left</span><span class="s">"&gt;
                &lt;td colspan="</span><span class="mi">9</span><span class="s">" nowrap&gt;您的订单已完成，服务器将在稍后向您的电子邮箱发送确认信息，并确认订单信息。&lt;/td&gt;
            &lt;/tr&gt;
        &lt;/table&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td align="</span><span class="n">center</span><span class="s">"&gt;
            &lt;jsp:include page="</span><span class="n">tail</span><span class="o">.</span><span class="na">jsp</span><span class="s">" flush="</span><span class="kc">true</span><span class="err">"</span><span class="o">&gt;&lt;/</span><span class="nl">jsp:</span><span class="n">include</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">td</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">table</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</code></pre></div></div> <p><strong>Controller_src/Shop.servlet/ShowGoodsClServlet.java</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nc">Shop</span><span class="o">.</span><span class="na">servlet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.PrintWriter</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.ServletException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServlet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServletRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServletResponse</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">Shop.model.GoodsBean</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">Shop.model.GoodsBeanBO</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ShowGoodsClServlet</span> <span class="kd">extends</span> <span class="nc">HttpServlet</span> <span class="o">{</span>
    <span class="cm">/**
     * The doGet method of the servlet. &lt;br&gt;
     *
     * This method is called when a form has its tag value method equals to get.
     *
     * @param request the request send by the client to the server
     * @param response the response send by the server to the client
     * @throws ServletException if an error occurred
     * @throws IOException if an error occurred
     */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">doGet</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span>
            <span class="kd">throws</span> <span class="nc">ServletException</span><span class="o">,</span> <span class="nc">IOException</span> <span class="o">{</span>
        <span class="c1">//System.out.println("进入了ShowGoodsClServlet");</span>
        <span class="n">response</span><span class="o">.</span><span class="na">setContentType</span><span class="o">(</span><span class="s">"text/html"</span><span class="o">);</span>
        <span class="n">response</span><span class="o">.</span><span class="na">setCharacterEncoding</span><span class="o">(</span><span class="s">"utf-8"</span><span class="o">);</span> <span class="c1">//要记得写上这个，不然不能显示中文</span>
        <span class="nc">PrintWriter</span> <span class="n">out</span><span class="o">=</span><span class="n">response</span><span class="o">.</span><span class="na">getWriter</span><span class="o">();</span>
        <span class="c1">//得到要显示的货物的id</span>
        <span class="nc">String</span> <span class="n">goodsId</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"id"</span><span class="o">);</span>
        <span class="c1">//调用GoodsBeanBO [可以得到货物的具体信息]</span>
        <span class="nc">GoodsBeanBO</span> <span class="n">gbb</span><span class="o">=</span><span class="k">new</span> <span class="nc">GoodsBeanBO</span><span class="o">();</span>
        <span class="nc">GoodsBean</span> <span class="n">gb</span><span class="o">=</span><span class="n">gbb</span><span class="o">.</span><span class="na">getGoodsBean</span><span class="o">(</span><span class="n">goodsId</span><span class="o">);</span>
        <span class="c1">//得到type,判断用户是想分页，还是想显示贷物的详细信息</span>
        <span class="nc">String</span> <span class="n">type</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"type"</span><span class="o">);</span>
        <span class="k">if</span><span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"showDetail"</span><span class="o">))</span>
        <span class="o">{</span>
            <span class="c1">//把gb放入到request</span>
            <span class="n">request</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"goodsInfo"</span><span class="o">,</span> <span class="n">gb</span><span class="o">);</span>
            <span class="c1">//跳转</span>
            <span class="n">request</span><span class="o">.</span><span class="na">getRequestDispatcher</span><span class="o">(</span><span class="s">"showDetail.jsp"</span><span class="o">).</span><span class="na">forward</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
        <span class="o">}</span><span class="k">else</span> <span class="k">if</span><span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"fenye"</span><span class="o">))</span>
        <span class="o">{</span>
            <span class="c1">//得到pageNow</span>
            <span class="nc">String</span> <span class="n">pageNow</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"pageNow"</span><span class="o">);</span>
            <span class="c1">//把pageNow放入到request</span>
            <span class="n">request</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"pagenow"</span><span class="o">,</span> <span class="n">pageNow</span><span class="o">);</span>
            <span class="c1">//跳回购物大厅</span>
            <span class="n">request</span><span class="o">.</span><span class="na">getRequestDispatcher</span><span class="o">(</span><span class="s">"index.jsp"</span><span class="o">).</span><span class="na">forward</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="cm">/**
     * The doPost method of the servlet. &lt;br&gt;
     *
     * This method is called when a form has its tag value method equals to post.
     *
     * @param request the request send by the client to the server
     * @param response the response send by the server to the client
     * @throws ServletException if an error occurred
     * @throws IOException if an error occurred
     */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">doPost</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span>
            <span class="kd">throws</span> <span class="nc">ServletException</span><span class="o">,</span> <span class="nc">IOException</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">doGet</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p><strong>Controller_src/Shop.servlet/ShoppingClServlet.java</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nc">Shop</span><span class="o">.</span><span class="na">servlet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.PrintWriter</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.ServletException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServlet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServletRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServletResponse</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">Shop.model.*</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ShoppingClServlet</span> <span class="kd">extends</span> <span class="nc">HttpServlet</span> <span class="o">{</span>
    <span class="cm">/**
     * The doGet method of the servlet. &lt;br&gt;
     *
     * This method is called when a form has its tag value method equals to get.
     *
     * @param request the request send by the client to the server
     * @param response the response send by the server to the client
     * @throws ServletException if an error occurred
     * @throws IOException if an error occurred
     */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">doGet</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span>
            <span class="kd">throws</span> <span class="nc">ServletException</span><span class="o">,</span> <span class="nc">IOException</span> <span class="o">{</span>
        <span class="c1">//System.out.println("进入了ShoppingClServlet");    </span>
        <span class="n">response</span><span class="o">.</span><span class="na">setContentType</span><span class="o">(</span><span class="s">"text/html"</span><span class="o">);</span>
        <span class="n">response</span><span class="o">.</span><span class="na">setCharacterEncoding</span><span class="o">(</span><span class="s">"utf-8"</span><span class="o">);</span>
        <span class="nc">PrintWriter</span> <span class="n">out</span><span class="o">=</span><span class="n">response</span><span class="o">.</span><span class="na">getWriter</span><span class="o">();</span>
        <span class="c1">//得到type值，判断用户是要进行怎样的操作</span>
        <span class="nc">String</span> <span class="n">type</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"type"</span><span class="o">);</span>
        <span class="c1">//调用MyCartBD，完成购物</span>
        <span class="c1">//MyCartBO mbo=new MyCartBO(); //这样会造成有多个购物车</span>
        <span class="c1">//所以必须想办法，保证只有一个购物车</span>
        <span class="c1">//解决多个购物车问题</span>
        <span class="c1">//1.先试图从session中取出一个购物车</span>
        <span class="nc">MyCartBO</span> <span class="n">mbo</span><span class="o">=(</span><span class="nc">MyCartBO</span><span class="o">)</span><span class="n">request</span><span class="o">.</span><span class="na">getSession</span><span class="o">().</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">"mycart"</span><span class="o">);</span>
        <span class="k">if</span><span class="o">(</span><span class="n">mbo</span><span class="o">==</span><span class="kc">null</span><span class="o">)</span> <span class="c1">//说明购物车还没有创建，用户是第一次点购买</span>
        <span class="o">{</span>
            <span class="c1">//创建一个购物车，并放入session</span>
            <span class="n">mbo</span><span class="o">=</span><span class="k">new</span> <span class="nc">MyCartBO</span><span class="o">();</span>
            <span class="n">request</span><span class="o">.</span><span class="na">getSession</span><span class="o">().</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"mycart"</span><span class="o">,</span> <span class="n">mbo</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">if</span><span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"addGoods"</span><span class="o">))</span> <span class="c1">//添加货物</span>
        <span class="o">{</span>
            <span class="c1">//获得货物的id</span>
            <span class="nc">String</span> <span class="n">goodsId</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"goodsId"</span><span class="o">);</span>
            <span class="c1">//System.out.println("goodsId="+goodsId);</span>
            <span class="c1">//默认购买是1本书，以后可以修改</span>
            <span class="n">mbo</span><span class="o">.</span><span class="na">addGoods</span><span class="o">(</span><span class="n">goodsId</span><span class="o">,</span> <span class="s">"1"</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">else</span> <span class="nf">if</span><span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"delGoods"</span><span class="o">))</span> <span class="c1">//删除货物</span>
        <span class="o">{</span>
            <span class="c1">//得到要删除的货物的id</span>
            <span class="nc">String</span> <span class="n">goodsId</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"goodsId"</span><span class="o">);</span>
            <span class="c1">//从购物车中删除（session）</span>
            <span class="n">mbo</span><span class="o">.</span><span class="na">delGoods</span><span class="o">(</span><span class="n">goodsId</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">else</span> <span class="nf">if</span><span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"show"</span><span class="o">))</span><span class="c1">//显示购物车</span>
        <span class="o">{</span>
            <span class="c1">//do nothing</span>
        <span class="o">}</span>
        <span class="k">else</span> <span class="nf">if</span><span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"delAll"</span><span class="o">))</span> <span class="c1">//清空货物</span>
        <span class="o">{</span>
            <span class="n">mbo</span><span class="o">.</span><span class="na">clear</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">else</span> <span class="nf">if</span><span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"updateGoods"</span><span class="o">))</span><span class="c1">//修改货物数量</span>
        <span class="o">{</span>
            <span class="c1">//在servlet中得到货物的id,和新的数量，在界面上利用隐藏表单提交数据</span>
            <span class="nc">String</span> <span class="n">goodsId</span><span class="o">[]=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameterValues</span><span class="o">(</span><span class="s">"goodsId"</span><span class="o">);</span>
            <span class="nc">String</span> <span class="n">newNums</span><span class="o">[]=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameterValues</span><span class="o">(</span><span class="s">"newNums"</span><span class="o">);</span>
            <span class="c1">//测试是否得到新修改的值</span>
            <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">goodsId</span><span class="o">.</span><span class="na">length</span><span class="o">;</span><span class="n">i</span><span class="o">++)</span>
            <span class="o">{</span>
                <span class="c1">//System.out.println("id="+goodsId[i]+" 数量="+newNums[i]);</span>
                <span class="n">mbo</span><span class="o">.</span><span class="na">upGoods</span><span class="o">(</span><span class="n">goodsId</span><span class="o">[</span><span class="n">i</span><span class="o">],</span> <span class="n">newNums</span><span class="o">[</span><span class="n">i</span><span class="o">]);</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="c1">//把购物车的货物取出，准备在下一个页面显示</span>
        <span class="nc">ArrayList</span> <span class="n">al</span><span class="o">=</span><span class="n">mbo</span><span class="o">.</span><span class="na">showMyCart</span><span class="o">();</span>
        <span class="c1">//放入到request</span>
        <span class="n">request</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"mycartInfo"</span><span class="o">,</span> <span class="n">al</span><span class="o">);</span>
        <span class="c1">//跳转到showMyCart.jsp</span>
        <span class="n">request</span><span class="o">.</span><span class="na">getRequestDispatcher</span><span class="o">(</span><span class="s">"showMycart.jsp"</span><span class="o">).</span><span class="na">forward</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="cm">/**
     * The doPost method of the servlet. &lt;br&gt;
     *
     * This method is called when a form has its tag value method equals to post.
     *
     * @param request the request send by the client to the server
     * @param response the response send by the server to the client
     * @throws ServletException if an error occurred
     * @throws IOException if an error occurred
     */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">doPost</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span>
            <span class="kd">throws</span> <span class="nc">ServletException</span><span class="o">,</span> <span class="nc">IOException</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">doGet</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p><strong>Controller_src/Shop.servlet/LoginCl.java</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nc">Shop</span><span class="o">.</span><span class="na">servlet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.PrintWriter</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.ServletException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServlet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServletRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServletResponse</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">Shop.model.*</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LoginCl</span> <span class="kd">extends</span> <span class="nc">HttpServlet</span> <span class="o">{</span>
    <span class="cm">/**
     * The doGet method of the servlet. &lt;br&gt;
     *
     * This method is called when a form has its tag value method equals to get.
     *
     * @param request the request send by the client to the server
     * @param response the response send by the server to the client
     * @throws ServletException if an error occurred
     * @throws IOException if an error occurred
     */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">doGet</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span>
            <span class="kd">throws</span> <span class="nc">ServletException</span><span class="o">,</span> <span class="nc">IOException</span> <span class="o">{</span>
        <span class="n">response</span><span class="o">.</span><span class="na">setContentType</span><span class="o">(</span><span class="s">"text/html"</span><span class="o">);</span>
        <span class="n">response</span><span class="o">.</span><span class="na">setCharacterEncoding</span><span class="o">(</span><span class="s">"utf-8"</span><span class="o">);</span>
        <span class="nc">PrintWriter</span> <span class="n">out</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getWriter</span><span class="o">();</span>
        <span class="c1">//得到用户名和密码，验证用户是否合法</span>
        <span class="nc">String</span> <span class="n">u</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"username"</span><span class="o">);</span>
        <span class="nc">String</span> <span class="n">p</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"passwd"</span><span class="o">);</span>
        <span class="c1">//验证用户</span>
        <span class="nc">UserBeanBO</span> <span class="n">ubb</span><span class="o">=</span><span class="k">new</span> <span class="nc">UserBeanBO</span><span class="o">();</span>
        <span class="k">if</span><span class="o">(</span><span class="n">ubb</span><span class="o">.</span><span class="na">checkUser</span><span class="o">(</span><span class="n">u</span><span class="o">,</span> <span class="n">p</span><span class="o">))</span>
        <span class="o">{</span>
            <span class="c1">//用户合法</span>
            <span class="c1">//1.把成功登录的用户信息放入session[后面要用到]</span>
            <span class="nc">UserBean</span> <span class="n">ub</span><span class="o">=</span><span class="n">ubb</span><span class="o">.</span><span class="na">getUserBean</span><span class="o">(</span><span class="n">u</span><span class="o">);</span>
            <span class="n">request</span><span class="o">.</span><span class="na">getSession</span><span class="o">().</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"userInfo"</span><span class="o">,</span> <span class="n">ub</span><span class="o">);</span>
            <span class="c1">//2.把购物车的信息取出，准备在下一个页面显示</span>
            <span class="nc">MyCartBO</span> <span class="n">mcb</span><span class="o">=(</span><span class="nc">MyCartBO</span><span class="o">)</span><span class="n">request</span><span class="o">.</span><span class="na">getSession</span><span class="o">().</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">"mycart"</span><span class="o">);</span>
            <span class="nc">ArrayList</span> <span class="n">al</span><span class="o">=</span><span class="n">mcb</span><span class="o">.</span><span class="na">showMyCart</span><span class="o">();</span>
            <span class="c1">//把al放入request</span>
            <span class="n">request</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"mycartInfo"</span><span class="o">,</span> <span class="n">al</span><span class="o">);</span>
            <span class="n">request</span><span class="o">.</span><span class="na">getRequestDispatcher</span><span class="o">(</span><span class="s">"shopping3.jsp"</span><span class="o">).</span><span class="na">forward</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
        <span class="o">}</span><span class="k">else</span>
        <span class="o">{</span>
            <span class="c1">//用户不合法</span>
            <span class="n">request</span><span class="o">.</span><span class="na">getRequestDispatcher</span><span class="o">(</span><span class="s">"shopping2.jsp"</span><span class="o">).</span><span class="na">forward</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="cm">/**
     * The doPost method of the servlet. &lt;br&gt;
     *
     * This method is called when a form has its tag value method equals to post.
     *
     * @param request the request send by the client to the server
     * @param response the response send by the server to the client
     * @throws ServletException if an error occurred
     * @throws IOException if an error occurred
     */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">doPost</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span>
            <span class="kd">throws</span> <span class="nc">ServletException</span><span class="o">,</span> <span class="nc">IOException</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">doGet</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p><strong>Controller_src/Shop.servlet/ShoppingCl2.java</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * 这个控制器用于检测用户是否登录过，如果没有登录就进入登录界面
 * 如果登录过，就直接进入显示用户信息和购物车情况的页面
 */</span>
<span class="kn">package</span> <span class="nc">Shop</span><span class="o">.</span><span class="na">servlet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.PrintWriter</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.ServletException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServlet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServletRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServletResponse</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">Shop.model.*</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ShoppingCl2</span> <span class="kd">extends</span> <span class="nc">HttpServlet</span> <span class="o">{</span>
    <span class="cm">/**
     * The doGet method of the servlet. &lt;br&gt;
     *
     * This method is called when a form has its tag value method equals to get.
     *
     * @param request the request send by the client to the server
     * @param response the response send by the server to the client
     * @throws ServletException if an error occurred
     * @throws IOException if an error occurred
     */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">doGet</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span>
            <span class="kd">throws</span> <span class="nc">ServletException</span><span class="o">,</span> <span class="nc">IOException</span> <span class="o">{</span>
        <span class="n">response</span><span class="o">.</span><span class="na">setContentType</span><span class="o">(</span><span class="s">"text/html"</span><span class="o">);</span>
        <span class="n">response</span><span class="o">.</span><span class="na">setCharacterEncoding</span><span class="o">(</span><span class="s">"utf-8"</span><span class="o">);</span>
        <span class="nc">PrintWriter</span> <span class="n">out</span><span class="o">=</span><span class="n">response</span><span class="o">.</span><span class="na">getWriter</span><span class="o">();</span>
        <span class="c1">//1.看看session中是否有用户登录的信息</span>
        <span class="nc">UserBean</span> <span class="n">ub</span><span class="o">=(</span><span class="nc">UserBean</span><span class="o">)</span><span class="n">request</span><span class="o">.</span><span class="na">getSession</span><span class="o">().</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">"userInfo"</span><span class="o">);</span>
        <span class="k">if</span><span class="o">(</span><span class="n">ub</span><span class="o">==</span><span class="kc">null</span><span class="o">)</span>
        <span class="o">{</span>
            <span class="c1">//说明用户没有登录过</span>
            <span class="c1">//就跳转到shopping2.jsp</span>
            <span class="n">request</span><span class="o">.</span><span class="na">getRequestDispatcher</span><span class="o">(</span><span class="s">"shopping2.jsp"</span><span class="o">).</span><span class="na">forward</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
        <span class="o">}</span><span class="k">else</span>
        <span class="o">{</span>
            <span class="c1">//说明登录过</span>
            <span class="c1">//2.把购物车的信息取出，准备在下一个页面显示</span>
            <span class="nc">MyCartBO</span> <span class="n">mcb</span><span class="o">=(</span><span class="nc">MyCartBO</span><span class="o">)</span><span class="n">request</span><span class="o">.</span><span class="na">getSession</span><span class="o">().</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">"mycart"</span><span class="o">);</span>
            <span class="nc">ArrayList</span> <span class="n">al</span><span class="o">=</span><span class="n">mcb</span><span class="o">.</span><span class="na">showMyCart</span><span class="o">();</span>
            <span class="c1">//把al放入request</span>
            <span class="n">request</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"mycartInfo"</span><span class="o">,</span> <span class="n">al</span><span class="o">);</span>
            <span class="c1">//就跳转到shopping3.jsp</span>
            <span class="n">request</span><span class="o">.</span><span class="na">getRequestDispatcher</span><span class="o">(</span><span class="s">"shopping3.jsp"</span><span class="o">).</span><span class="na">forward</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="cm">/**
     * The doPost method of the servlet. &lt;br&gt;
     *
     * This method is called when a form has its tag value method equals to post.
     *
     * @param request the request send by the client to the server
     * @param response the response send by the server to the client
     * @throws ServletException if an error occurred
     * @throws IOException if an error occurred
     */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">doPost</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span>
            <span class="kd">throws</span> <span class="nc">ServletException</span><span class="o">,</span> <span class="nc">IOException</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">doGet</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p><strong>Controller_src/Shop.servlet/OrderClServlet.java</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * 处理订单
 */</span>
<span class="kn">package</span> <span class="nc">Shop</span><span class="o">.</span><span class="na">servlet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.PrintWriter</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.ServletException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServlet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServletRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServletResponse</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">Shop.model.*</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">OrderClServlet</span> <span class="kd">extends</span> <span class="nc">HttpServlet</span> <span class="o">{</span>
    <span class="cm">/**
     * The doGet method of the servlet. &lt;br&gt;
     *
     * This method is called when a form has its tag value method equals to get.
     *
     * @param request the request send by the client to the server
     * @param response the response send by the server to the client
     * @throws ServletException if an error occurred
     * @throws IOException if an error occurred
     */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">doGet</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span>
            <span class="kd">throws</span> <span class="nc">ServletException</span><span class="o">,</span> <span class="nc">IOException</span> <span class="o">{</span>
        <span class="n">response</span><span class="o">.</span><span class="na">setContentType</span><span class="o">(</span><span class="s">"text/html"</span><span class="o">);</span>
        <span class="n">response</span><span class="o">.</span><span class="na">setCharacterEncoding</span><span class="o">(</span><span class="s">"utf-8"</span><span class="o">);</span>
        <span class="nc">PrintWriter</span> <span class="n">out</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getWriter</span><span class="o">();</span>
        <span class="c1">//处理完成订单（把订单写入数据库）</span>
        <span class="nc">OrderBeanBO</span> <span class="n">obb</span><span class="o">=</span><span class="k">new</span> <span class="nc">OrderBeanBO</span><span class="o">();</span>
        <span class="c1">//得到购物车</span>
        <span class="nc">MyCartBO</span> <span class="n">mcb</span><span class="o">=(</span><span class="nc">MyCartBO</span><span class="o">)</span><span class="n">request</span><span class="o">.</span><span class="na">getSession</span><span class="o">().</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">"mycart"</span><span class="o">);</span>
        <span class="c1">//用户id</span>
        <span class="kt">long</span> <span class="n">userId</span><span class="o">=((</span><span class="nc">UserBean</span><span class="o">)</span><span class="n">request</span><span class="o">.</span><span class="na">getSession</span><span class="o">().</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">"userInfo"</span><span class="o">)).</span><span class="na">getUserid</span><span class="o">();</span>
        <span class="nc">OrderInfoBean</span> <span class="n">oib</span><span class="o">=</span><span class="n">obb</span><span class="o">.</span><span class="na">addOrder</span><span class="o">(</span><span class="n">mcb</span><span class="o">,</span> <span class="n">userId</span><span class="o">+</span><span class="s">""</span><span class="o">);</span>
        <span class="k">if</span><span class="o">(</span><span class="n">oib</span><span class="o">!=</span><span class="kc">null</span><span class="o">)</span>
        <span class="o">{</span>
            <span class="c1">//添加Ok</span>
            <span class="c1">//准备显示订单的详细信息的数据，给下个页面shopping4.jsp</span>
            <span class="n">request</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"detailbean"</span><span class="o">,</span> <span class="n">oib</span><span class="o">);</span>
            <span class="n">request</span><span class="o">.</span><span class="na">getRequestDispatcher</span><span class="o">(</span><span class="s">"shopping4.jsp"</span><span class="o">).</span><span class="na">forward</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">else</span>
        <span class="o">{</span>
            <span class="c1">//添加订单失败</span>
            <span class="n">request</span><span class="o">.</span><span class="na">getRequestDispatcher</span><span class="o">(</span><span class="s">"shopping3.jsp"</span><span class="o">).</span><span class="na">forward</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="cm">/**
     * The doPost method of the servlet. &lt;br&gt;
     *
     * This method is called when a form has its tag value method equals to post.
     *
     * @param request the request send by the client to the server
     * @param response the response send by the server to the client
     * @throws ServletException if an error occurred
     * @throws IOException if an error occurred
     */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">doPost</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span>
            <span class="kd">throws</span> <span class="nc">ServletException</span><span class="o">,</span> <span class="nc">IOException</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">doGet</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p><strong>model_src/Shop.model/ConnDB.java</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * 这是一个model类
 * 完成得到一个数据库连接
 */</span>
<span class="kn">package</span> <span class="nc">Shop</span><span class="o">.</span><span class="na">model</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.*</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ConnDB</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">Connection</span> <span class="n">ct</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
    <span class="kd">public</span> <span class="nc">Connection</span> <span class="nf">getConn</span><span class="o">()</span>
    <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">//Class.forName("org.gjt.mm.mysql.Driver").newInstance();</span>
            <span class="nc">Class</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">"com.microsoft.jdbc.sqlserver.SQLServerDriver"</span><span class="o">).</span><span class="na">newInstance</span><span class="o">();</span>
            <span class="c1">//ct=DriverManager.getConnection("jdbc:mysql://localhost:3306/shoppingdb","root","root");</span>
            <span class="n">ct</span><span class="o">=</span><span class="nc">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="s">"jdbc:microsoft:sqlserver://localhost:1433;databaseName=shoppingdb"</span><span class="o">,</span><span class="s">"sa"</span><span class="o">,</span><span class="s">"luowei"</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">ct</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p><strong>model_src/Shop.model/ GoodsBean.java</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * 这是一个model类 &lt;----&gt;goods表
 */</span>
<span class="kn">package</span> <span class="nc">Shop</span><span class="o">.</span><span class="na">model</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GoodsBean</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">long</span> <span class="nf">getGoodsId</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">goodsId</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setGoodsId</span><span class="o">(</span><span class="kt">long</span> <span class="n">goodsId</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">goodsId</span> <span class="o">=</span> <span class="n">goodsId</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getGoodsName</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">goodsName</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setGoodsName</span><span class="o">(</span><span class="nc">String</span> <span class="n">goodsName</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">goodsName</span> <span class="o">=</span> <span class="n">goodsName</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getGoodsIntro</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">goodsIntro</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setGoodsIntro</span><span class="o">(</span><span class="nc">String</span> <span class="n">goodsIntro</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">goodsIntro</span> <span class="o">=</span> <span class="n">goodsIntro</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">float</span> <span class="nf">getGoodsPrice</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">goodsPrice</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setGoodsPrice</span><span class="o">(</span><span class="kt">float</span> <span class="n">goodsPrice</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">goodsPrice</span> <span class="o">=</span> <span class="n">goodsPrice</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getGoodsNum</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">goodsNum</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setGoodsNum</span><span class="o">(</span><span class="kt">int</span> <span class="n">goodsNum</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">goodsNum</span> <span class="o">=</span> <span class="n">goodsNum</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getPublisher</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">publisher</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setPublisher</span><span class="o">(</span><span class="nc">String</span> <span class="n">publisher</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">publisher</span> <span class="o">=</span> <span class="n">publisher</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getPhoto</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">photo</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setPhoto</span><span class="o">(</span><span class="nc">String</span> <span class="n">photo</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">photo</span> <span class="o">=</span> <span class="n">photo</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getGoodsType</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">goodsType</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setGoodsType</span><span class="o">(</span><span class="nc">String</span> <span class="n">goodsType</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">goodsType</span> <span class="o">=</span> <span class="n">goodsType</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">goodsId</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">goodsName</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">goodsIntro</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">float</span> <span class="n">goodsPrice</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">goodsNum</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">publisher</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">photo</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">goodsType</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div> <p><strong>model_src/Shop.model/ GoodsBeanBO.java</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * 这是一个model类，处理与goods表相关的业务逻辑
 */</span>
<span class="kn">package</span> <span class="nc">Shop</span><span class="o">.</span><span class="na">model</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GoodsBeanBO</span> <span class="o">{</span>
    <span class="c1">//定义一些变量</span>
    <span class="kd">private</span> <span class="nc">ResultSet</span> <span class="n">rs</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">Connection</span> <span class="n">ct</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">PreparedStatement</span> <span class="n">ps</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
    <span class="c1">//根据一个贷物id，得到贷物具体信息的函数</span>
    <span class="kd">public</span> <span class="nc">GoodsBean</span> <span class="nf">getGoodsBean</span><span class="o">(</span><span class="nc">String</span> <span class="n">id</span> <span class="o">)</span>
    <span class="o">{</span>
        <span class="nc">GoodsBean</span> <span class="n">gb</span><span class="o">=</span><span class="k">new</span> <span class="nc">GoodsBean</span><span class="o">();</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">ct</span><span class="o">=</span><span class="k">new</span> <span class="nc">ConnDB</span><span class="o">().</span><span class="na">getConn</span><span class="o">();</span>
            <span class="n">ps</span><span class="o">=</span><span class="n">ct</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="s">"select * from goods where goodsId=?"</span><span class="o">);</span>
            <span class="n">ps</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">id</span><span class="o">);</span>
            <span class="n">rs</span><span class="o">=</span><span class="n">ps</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">();</span>
            <span class="k">if</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span>
            <span class="o">{</span>
                <span class="c1">//放入到db</span>
                <span class="n">gb</span><span class="o">.</span><span class="na">setGoodsId</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="mi">1</span><span class="o">));</span>
                <span class="n">gb</span><span class="o">.</span><span class="na">setGoodsName</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">2</span><span class="o">));</span>
                <span class="n">gb</span><span class="o">.</span><span class="na">setGoodsIntro</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">3</span><span class="o">));</span>
                <span class="n">gb</span><span class="o">.</span><span class="na">setGoodsPrice</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getFloat</span><span class="o">(</span><span class="mi">4</span><span class="o">));</span>
                <span class="n">gb</span><span class="o">.</span><span class="na">setGoodsNum</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="mi">5</span><span class="o">));</span>
                <span class="n">gb</span><span class="o">.</span><span class="na">setPublisher</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">6</span><span class="o">));</span>
                <span class="n">gb</span><span class="o">.</span><span class="na">setPhoto</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">7</span><span class="o">));</span>
                <span class="n">gb</span><span class="o">.</span><span class="na">setGoodsType</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">8</span><span class="o">));</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span><span class="k">finally</span>
        <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">gb</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="cm">/**返回共有多少页
     *
     */</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getPageCount</span><span class="o">(</span><span class="kt">int</span> <span class="n">pageSize</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="kt">int</span> <span class="n">pageCount</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">rowCount</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">ct</span><span class="o">=</span><span class="k">new</span> <span class="nc">ConnDB</span><span class="o">().</span><span class="na">getConn</span><span class="o">();</span>
            <span class="n">ps</span><span class="o">=</span><span class="n">ct</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="s">"select count(*) from goods"</span><span class="o">);</span>
            <span class="c1">//得到总有多少条记录</span>
            <span class="n">rs</span><span class="o">=</span><span class="n">ps</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">();</span>
            <span class="k">if</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span>
            <span class="o">{</span>
                <span class="n">rowCount</span><span class="o">=</span><span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="k">if</span><span class="o">(</span><span class="n">rowCount</span><span class="o">%</span><span class="n">pageSize</span><span class="o">==</span><span class="mi">0</span><span class="o">)</span>
            <span class="o">{</span>
                <span class="n">pageCount</span><span class="o">=</span><span class="n">rowCount</span><span class="o">/</span><span class="n">pageSize</span><span class="o">;</span>
            <span class="o">}</span><span class="k">else</span>
            <span class="o">{</span>
                <span class="n">pageCount</span><span class="o">=</span><span class="n">rowCount</span><span class="o">/</span><span class="n">pageSize</span><span class="o">+</span><span class="mi">1</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span><span class="k">finally</span><span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">pageCount</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="cm">/**分页显示货物信息
     * @author luowei
     * @param int pageSize:每页显示几条记录
     * @param int pageNow:显示第几页
     * @return ArrayList [显示货物集合]
     * ctrl+shirft+m(可以引入包)
     */</span>
    <span class="kd">public</span> <span class="nc">ArrayList</span> <span class="nf">getGoodByPage</span><span class="o">(</span><span class="kt">int</span> <span class="n">pageSize</span><span class="o">,</span><span class="kt">int</span> <span class="n">pageNow</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="nc">ArrayList</span> <span class="n">al</span><span class="o">=</span><span class="k">new</span> <span class="nc">ArrayList</span><span class="o">();</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">ct</span><span class="o">=</span><span class="k">new</span> <span class="nc">ConnDB</span><span class="o">().</span><span class="na">getConn</span><span class="o">();</span>
            <span class="n">ps</span><span class="o">=</span><span class="n">ct</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="s">"select top "</span><span class="o">+</span><span class="n">pageSize</span><span class="o">+</span><span class="s">" * from goods where goodsId not in "</span> <span class="o">+</span>
                    <span class="s">"(select top "</span><span class="o">+(</span><span class="n">pageSize</span><span class="o">*(</span><span class="n">pageNow</span><span class="o">-</span><span class="mi">1</span><span class="o">))+</span><span class="s">" goodsId from goods)"</span><span class="o">);</span> <span class="c1">//sql server</span>
            <span class="c1">//ps=ct.prepareStatement("select * from goods order by goodsId limit "+(pageSize*(pageNow-1))+","+pageSize); //mysql</span>
            <span class="n">rs</span><span class="o">=</span><span class="n">ps</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">();</span>
            <span class="k">while</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span>
            <span class="o">{</span>
                <span class="nc">GoodsBean</span> <span class="n">gb</span><span class="o">=</span><span class="k">new</span> <span class="nc">GoodsBean</span><span class="o">();</span>
                <span class="c1">//放入到db</span>
                <span class="n">gb</span><span class="o">.</span><span class="na">setGoodsId</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="mi">1</span><span class="o">));</span>
                <span class="n">gb</span><span class="o">.</span><span class="na">setGoodsName</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">2</span><span class="o">));</span>
                <span class="n">gb</span><span class="o">.</span><span class="na">setGoodsIntro</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">3</span><span class="o">));</span>
                <span class="n">gb</span><span class="o">.</span><span class="na">setGoodsPrice</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getFloat</span><span class="o">(</span><span class="mi">4</span><span class="o">));</span>
                <span class="n">gb</span><span class="o">.</span><span class="na">setGoodsNum</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="mi">5</span><span class="o">));</span>
                <span class="n">gb</span><span class="o">.</span><span class="na">setPublisher</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">6</span><span class="o">));</span>
                <span class="n">gb</span><span class="o">.</span><span class="na">setPhoto</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">7</span><span class="o">));</span>
                <span class="n">gb</span><span class="o">.</span><span class="na">setGoodsType</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">8</span><span class="o">));</span>
                <span class="c1">//加入到al</span>
                <span class="n">al</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">gb</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span><span class="k">finally</span><span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">al</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="cm">/**关闭资源
     *
     */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">close</span><span class="o">()</span>
    <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="k">if</span><span class="o">(</span><span class="n">rs</span><span class="o">!=</span><span class="kc">null</span><span class="o">)</span>
            <span class="o">{</span>
                <span class="n">rs</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
                <span class="n">rs</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="k">if</span><span class="o">(</span><span class="n">ps</span><span class="o">!=</span><span class="kc">null</span><span class="o">)</span>
            <span class="o">{</span>
                <span class="n">ps</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
                <span class="n">ps</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="k">if</span><span class="o">(</span><span class="n">ct</span><span class="o">!=</span><span class="kc">null</span><span class="o">)</span>
            <span class="o">{</span>
                <span class="n">ct</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
                <span class="n">ct</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p><strong>model_src/Shop.model/Test.java</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * hashmap使用的简单案例
 */</span>
<span class="kn">package</span> <span class="nc">Shop</span><span class="o">.</span><span class="na">model</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Test</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span> <span class="o">[]</span><span class="n">args</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="nc">HashMap</span> <span class="n">hm</span><span class="o">=</span><span class="k">new</span> <span class="nc">HashMap</span><span class="o">();</span>
        <span class="n">hm</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"1"</span><span class="o">,</span><span class="s">"3"</span><span class="o">);</span>
        <span class="n">hm</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"2"</span><span class="o">,</span><span class="s">"10"</span><span class="o">);</span>
        <span class="n">hm</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"3"</span><span class="o">,</span><span class="s">"100"</span><span class="o">);</span>
        <span class="c1">//hm.remove("2");</span>
        <span class="c1">//hm.clear();</span>
        <span class="c1">//使用换代器</span>
        <span class="nc">Iterator</span> <span class="n">it</span><span class="o">=</span><span class="n">hm</span><span class="o">.</span><span class="na">keySet</span><span class="o">().</span><span class="na">iterator</span><span class="o">();</span>
        <span class="k">while</span><span class="o">(</span><span class="n">it</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span>
        <span class="o">{</span>
            <span class="c1">//取出key</span>
            <span class="nc">String</span> <span class="n">key</span><span class="o">=(</span><span class="nc">String</span><span class="o">)</span><span class="n">it</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
            <span class="c1">//根据key取出value</span>
            <span class="nc">String</span> <span class="n">nums</span><span class="o">=(</span><span class="nc">String</span><span class="o">)</span><span class="n">hm</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">key</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"key="</span><span class="o">+</span><span class="n">key</span><span class="o">+</span><span class="s">" nums="</span><span class="o">+</span><span class="n">nums</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p><strong>model_src/Shop.model/MyCartBO.java</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * 这是一个BO（model）
 * 用于处理与购物相关的业务逻辑(可以把它看成是一个购物车)
 */</span>
<span class="kn">package</span> <span class="nc">Shop</span><span class="o">.</span><span class="na">model</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.Connection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.PreparedStatement</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.ResultSet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.SQLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyCartBO</span> <span class="o">{</span>
    <span class="c1">//定义一些变量</span>
    <span class="kd">private</span> <span class="nc">ResultSet</span> <span class="n">rs</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">Connection</span> <span class="n">ct</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">PreparedStatement</span> <span class="n">ps</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
    <span class="c1">//定义一个haspmap集合，用于存放书的id和书的数量</span>
    <span class="nc">HashMap</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">hm</span><span class="o">=</span><span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span><span class="nc">String</span><span class="o">&gt;();</span>
    <span class="c1">//购物车的总价</span>
    <span class="kd">private</span> <span class="kt">float</span> <span class="n">allPrice</span><span class="o">=</span><span class="mf">0.0f</span><span class="o">;</span>
    <span class="cm">/**
     * 返回货物总价
     */</span>
    <span class="kd">public</span> <span class="kt">float</span> <span class="nf">returnAllPrices</span><span class="o">()</span>
    <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">allPrice</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="cm">/**根据货物id,返回货物的数量
     *
     */</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getGoodsNumById</span><span class="o">(</span><span class="nc">String</span> <span class="n">goodsId</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="c1">//System.out.println("进入了getGoodsNubById,货物id="+goodsId);</span>
        <span class="k">return</span> <span class="o">(</span><span class="nc">String</span><span class="o">)</span><span class="n">hm</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">goodsId</span><span class="o">);</span> <span class="c1">//返回货物的数量</span>
    <span class="o">}</span>
    <span class="cm">/**1.添加货物
     *
     */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addGoods</span><span class="o">(</span><span class="nc">String</span> <span class="n">goodsId</span><span class="o">,</span><span class="nc">String</span> <span class="n">goodsNum</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="n">hm</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">goodsId</span><span class="o">,</span> <span class="n">goodsNum</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="cm">/**2.删除货物
     *
     */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">delGoods</span><span class="o">(</span><span class="nc">String</span> <span class="n">goodsId</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="n">hm</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">goodsId</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="cm">/**3.清空货物
     *
     */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">clear</span><span class="o">()</span>
    <span class="o">{</span>
        <span class="n">hm</span><span class="o">.</span><span class="na">clear</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="cm">/**4.修改货物数量
     *
     */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">upGoods</span><span class="o">(</span><span class="nc">String</span> <span class="n">goodsId</span><span class="o">,</span><span class="nc">String</span> <span class="n">goodsNum</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="n">hm</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">goodsId</span><span class="o">,</span> <span class="n">goodsNum</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="cm">/**5.显示购物车
     *
     */</span>
    <span class="kd">public</span> <span class="nc">ArrayList</span> <span class="nf">showMyCart</span><span class="o">()</span>
    <span class="o">{</span>
        <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">GoodsBean</span><span class="o">&gt;</span> <span class="n">al</span><span class="o">=</span><span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">GoodsBean</span><span class="o">&gt;();</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">//组织sql</span>
            <span class="nc">String</span> <span class="n">sub</span><span class="o">=</span><span class="s">""</span><span class="o">;</span>
            <span class="c1">//使用迭代器完成从hm中取出货物id</span>
            <span class="nc">Iterator</span> <span class="n">it</span><span class="o">=</span><span class="n">hm</span><span class="o">.</span><span class="na">keySet</span><span class="o">().</span><span class="na">iterator</span><span class="o">();</span>
            <span class="k">while</span><span class="o">(</span><span class="n">it</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span>
            <span class="o">{</span>
                <span class="c1">//取出goodsId</span>
                <span class="nc">String</span> <span class="n">goodsId</span><span class="o">=(</span><span class="nc">String</span><span class="o">)</span><span class="n">it</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
                <span class="c1">//判断goodsId是不是最后id</span>
                <span class="k">if</span><span class="o">(</span><span class="n">it</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span>
                <span class="o">{</span>
                    <span class="n">sub</span><span class="o">+=</span><span class="n">goodsId</span><span class="o">+</span><span class="s">","</span><span class="o">;</span>
                <span class="o">}</span><span class="k">else</span>
                <span class="o">{</span>
                    <span class="n">sub</span><span class="o">+=</span><span class="n">goodsId</span><span class="o">;</span>
                <span class="o">}</span>
                <span class="c1">//System.out.println(sub);</span>
            <span class="o">}</span>
            <span class="k">if</span><span class="o">(!</span><span class="n">sub</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">""</span><span class="o">))</span>
            <span class="o">{</span>
                <span class="c1">//System.out.println("进来了");</span>
                <span class="nc">String</span> <span class="n">sql</span><span class="o">=</span><span class="s">"select * from goods where goodsId in("</span><span class="o">+</span><span class="n">sub</span><span class="o">+</span><span class="s">")"</span><span class="o">;</span>
                <span class="n">ct</span><span class="o">=</span><span class="k">new</span> <span class="nc">ConnDB</span><span class="o">().</span><span class="na">getConn</span><span class="o">();</span>
                <span class="n">ps</span><span class="o">=</span><span class="n">ct</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="n">sql</span><span class="o">);</span>
                <span class="n">rs</span><span class="o">=</span><span class="n">ps</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">();</span>
                <span class="k">this</span><span class="o">.</span><span class="na">allPrice</span><span class="o">=</span><span class="mf">0.0f</span><span class="o">;</span><span class="c1">//把总价清空</span>
                <span class="k">while</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span>
                <span class="o">{</span>
                    <span class="nc">GoodsBean</span> <span class="n">gb</span><span class="o">=</span><span class="k">new</span> <span class="nc">GoodsBean</span><span class="o">();</span>
                    <span class="c1">//放入到gb</span>
                    <span class="kt">int</span> <span class="n">goodsId</span><span class="o">=</span><span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
                    <span class="n">gb</span><span class="o">.</span><span class="na">setGoodsId</span><span class="o">(</span><span class="n">goodsId</span><span class="o">);</span>    <span class="c1">//得到商品Id</span>
                    <span class="n">gb</span><span class="o">.</span><span class="na">setGoodsName</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">2</span><span class="o">));</span>
                    <span class="n">gb</span><span class="o">.</span><span class="na">setGoodsIntro</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">3</span><span class="o">));</span>
                    <span class="kt">float</span> <span class="n">unitPrice</span><span class="o">=</span><span class="n">rs</span><span class="o">.</span><span class="na">getFloat</span><span class="o">(</span><span class="mi">4</span><span class="o">);</span>    <span class="c1">//得到货物单价</span>
                    <span class="n">gb</span><span class="o">.</span><span class="na">setGoodsPrice</span><span class="o">(</span><span class="n">unitPrice</span><span class="o">);</span>
                    <span class="n">gb</span><span class="o">.</span><span class="na">setGoodsNum</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="mi">5</span><span class="o">));</span>
                    <span class="n">gb</span><span class="o">.</span><span class="na">setPublisher</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">6</span><span class="o">));</span>
                    <span class="n">gb</span><span class="o">.</span><span class="na">setPhoto</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">7</span><span class="o">));</span>
                    <span class="n">gb</span><span class="o">.</span><span class="na">setGoodsType</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">8</span><span class="o">));</span>
                    <span class="c1">//加入到al</span>
                    <span class="n">al</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">gb</span><span class="o">);</span>
                    <span class="c1">//得出总价</span>
                    <span class="k">this</span><span class="o">.</span><span class="na">allPrice</span><span class="o">=</span><span class="k">this</span><span class="o">.</span><span class="na">allPrice</span><span class="o">+</span><span class="n">unitPrice</span><span class="o">*</span><span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">getGoodsNumById</span><span class="o">(</span><span class="n">goodsId</span><span class="o">+</span><span class="s">""</span><span class="o">));</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span><span class="k">finally</span><span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">al</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="cm">/**关闭资源
     *
     */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">close</span><span class="o">()</span>
    <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="k">if</span><span class="o">(</span><span class="n">rs</span><span class="o">!=</span><span class="kc">null</span><span class="o">)</span>
            <span class="o">{</span>
                <span class="n">rs</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
                <span class="n">rs</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="k">if</span><span class="o">(</span><span class="n">ps</span><span class="o">!=</span><span class="kc">null</span><span class="o">)</span>
            <span class="o">{</span>
                <span class="n">ps</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
                <span class="n">ps</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="k">if</span><span class="o">(</span><span class="n">ct</span><span class="o">!=</span><span class="kc">null</span><span class="o">)</span>
            <span class="o">{</span>
                <span class="n">ct</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
                <span class="n">ct</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p><strong>model_src/Shop.model/UserBean.java</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * 对用户表的映射
 */</span>
<span class="kn">package</span> <span class="nc">Shop</span><span class="o">.</span><span class="na">model</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserBean</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">long</span> <span class="nf">getUserid</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">userid</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setUserid</span><span class="o">(</span><span class="kt">long</span> <span class="n">userid</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">userid</span> <span class="o">=</span> <span class="n">userid</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getUsername</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">username</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setUsername</span><span class="o">(</span><span class="nc">String</span> <span class="n">username</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">username</span> <span class="o">=</span> <span class="n">username</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getTruename</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">truename</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setTruename</span><span class="o">(</span><span class="nc">String</span> <span class="n">truename</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">truename</span> <span class="o">=</span> <span class="n">truename</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getPasswd</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">passwd</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setPasswd</span><span class="o">(</span><span class="nc">String</span> <span class="n">passwd</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">passwd</span> <span class="o">=</span> <span class="n">passwd</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getEmail</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">email</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setEmail</span><span class="o">(</span><span class="nc">String</span> <span class="n">email</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">email</span> <span class="o">=</span> <span class="n">email</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getPhone</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">phone</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setPhone</span><span class="o">(</span><span class="nc">String</span> <span class="n">phone</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">phone</span> <span class="o">=</span> <span class="n">phone</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getAddress</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">address</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setAddress</span><span class="o">(</span><span class="nc">String</span> <span class="n">address</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">address</span> <span class="o">=</span> <span class="n">address</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getPostcode</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">postcode</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setPostcode</span><span class="o">(</span><span class="nc">String</span> <span class="n">postcode</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">postcode</span> <span class="o">=</span> <span class="n">postcode</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getGrade</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">grade</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setGrade</span><span class="o">(</span><span class="kt">int</span> <span class="n">grade</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">grade</span> <span class="o">=</span> <span class="n">grade</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">userid</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">username</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">truename</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">passwd</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">email</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">phone</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">address</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">postcode</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">grade</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div> <p><strong>model_src/Shop.model/Test.java</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 *此model 处理与user表相关的业务逻辑
 */</span>
<span class="kn">package</span> <span class="nc">Shop</span><span class="o">.</span><span class="na">model</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.Connection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.PreparedStatement</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.ResultSet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.SQLException</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">UserBeanBO</span> <span class="o">{</span>
    <span class="c1">//定义一些变量</span>
    <span class="kd">private</span> <span class="nc">ResultSet</span> <span class="n">rs</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">Connection</span> <span class="n">ct</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">PreparedStatement</span> <span class="n">ps</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
    <span class="cm">/*
     * 根据用户名返回UserBean
     */</span>
    <span class="kd">public</span> <span class="nc">UserBean</span> <span class="nf">getUserBean</span><span class="o">(</span><span class="nc">String</span> <span class="n">u</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="nc">UserBean</span> <span class="n">ub</span><span class="o">=</span><span class="k">new</span> <span class="nc">UserBean</span><span class="o">();</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">ct</span><span class="o">=</span><span class="k">new</span> <span class="nc">ConnDB</span><span class="o">().</span><span class="na">getConn</span><span class="o">();</span>
            <span class="c1">//ps=ct.prepareStatement("select * from users where userName=? limit 1");</span>
            <span class="n">ps</span><span class="o">=</span><span class="n">ct</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="s">"select top 1 * from users where userName=?"</span><span class="o">);</span>
            <span class="n">ps</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">u</span><span class="o">);</span>
            <span class="n">rs</span><span class="o">=</span><span class="n">ps</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">();</span>
            <span class="k">if</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span>
            <span class="o">{</span>
                <span class="n">ub</span><span class="o">.</span><span class="na">setUserid</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getLong</span><span class="o">(</span><span class="mi">1</span><span class="o">));</span>
                <span class="n">ub</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">2</span><span class="o">));</span>
                <span class="n">ub</span><span class="o">.</span><span class="na">setTruename</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">3</span><span class="o">));</span>
                <span class="n">ub</span><span class="o">.</span><span class="na">setPasswd</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">4</span><span class="o">));</span>
                <span class="n">ub</span><span class="o">.</span><span class="na">setEmail</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">5</span><span class="o">));</span>
                <span class="n">ub</span><span class="o">.</span><span class="na">setPhone</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">6</span><span class="o">));</span>
                <span class="n">ub</span><span class="o">.</span><span class="na">setAddress</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">7</span><span class="o">));</span>
                <span class="n">ub</span><span class="o">.</span><span class="na">setPostcode</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">8</span><span class="o">));</span>
                <span class="n">ub</span><span class="o">.</span><span class="na">setGrade</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="mi">9</span><span class="o">));</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span><span class="k">finally</span><span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">ub</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="cm">/**
     * 验证用户是否合法
     */</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">checkUser</span><span class="o">(</span><span class="nc">String</span> <span class="n">u</span><span class="o">,</span><span class="nc">String</span> <span class="n">p</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="kt">boolean</span> <span class="n">b</span><span class="o">=</span><span class="kc">false</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">ct</span><span class="o">=</span><span class="k">new</span> <span class="nc">ConnDB</span><span class="o">().</span><span class="na">getConn</span><span class="o">();</span>
            <span class="c1">//ps=ct.prepareStatement("select passWd from users where userName=? limit 1");</span>
            <span class="n">ps</span><span class="o">=</span><span class="n">ct</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="s">"select top 1 passWd from users where userName=?"</span><span class="o">);</span>
            <span class="c1">//limit 1 表示查到一条记录就返回，提高查询速度</span>
            <span class="n">ps</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="n">u</span><span class="o">);</span> <span class="c1">//给问号赋值</span>
            <span class="n">rs</span><span class="o">=</span><span class="n">ps</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">();</span>
            <span class="k">if</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span>
            <span class="o">{</span>
                <span class="c1">//取出数据库的密码</span>
                <span class="nc">String</span> <span class="n">dbPasswd</span><span class="o">=</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
                <span class="k">if</span><span class="o">(</span><span class="n">dbPasswd</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">p</span><span class="o">))</span>
                <span class="o">{</span>
                    <span class="n">b</span><span class="o">=</span><span class="kc">true</span><span class="o">;</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span><span class="k">finally</span><span class="o">{</span>
            <span class="c1">//关闭资源</span>
            <span class="k">this</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">b</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="cm">/**关闭资源
     *
     */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">close</span><span class="o">()</span>
    <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="k">if</span><span class="o">(</span><span class="n">rs</span><span class="o">!=</span><span class="kc">null</span><span class="o">)</span>
            <span class="o">{</span>
                <span class="n">rs</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
                <span class="n">rs</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="k">if</span><span class="o">(</span><span class="n">ps</span><span class="o">!=</span><span class="kc">null</span><span class="o">)</span>
            <span class="o">{</span>
                <span class="n">ps</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
                <span class="n">ps</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="k">if</span><span class="o">(</span><span class="n">ct</span><span class="o">!=</span><span class="kc">null</span><span class="o">)</span>
            <span class="o">{</span>
                <span class="n">ct</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
                <span class="n">ct</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p><strong>model_src/Shop.model/OrderBean.java</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * 对orders表的映射
 */</span>
<span class="kn">package</span> <span class="nc">Shop</span><span class="o">.</span><span class="na">model</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">OrderBean</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">long</span> <span class="nf">getOrdersId</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">ordersId</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setOrdersId</span><span class="o">(</span><span class="kt">long</span> <span class="n">ordersId</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">ordersId</span> <span class="o">=</span> <span class="n">ordersId</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">long</span> <span class="nf">getUserId</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">userId</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setUserId</span><span class="o">(</span><span class="kt">long</span> <span class="n">userId</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">userId</span> <span class="o">=</span> <span class="n">userId</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">Date</span> <span class="nf">getOrderDate</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">orderDate</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setOrderDate</span><span class="o">(</span><span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">Date</span> <span class="n">orderDate</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">orderDate</span> <span class="o">=</span> <span class="n">orderDate</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getPayMode</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">payMode</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setPayMode</span><span class="o">(</span><span class="nc">String</span> <span class="n">payMode</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">payMode</span> <span class="o">=</span> <span class="n">payMode</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">byte</span> <span class="nf">getIsPayed</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">isPayed</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setIsPayed</span><span class="o">(</span><span class="kt">byte</span> <span class="n">isPayed</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">isPayed</span> <span class="o">=</span> <span class="n">isPayed</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">float</span> <span class="nf">getTotalPrice</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">totalPrice</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setTotalPrice</span><span class="o">(</span><span class="kt">float</span> <span class="n">totalPrice</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">totalPrice</span> <span class="o">=</span> <span class="n">totalPrice</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">ordersId</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">userId</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">Date</span> <span class="n">orderDate</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">payMode</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">byte</span> <span class="n">isPayed</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">float</span> <span class="n">totalPrice</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div> <p><strong>model_src/Shop.model/OrderBeanBO.java</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * 对Orders表及orderDetail表的业务逻辑
 */</span>
<span class="kn">package</span> <span class="nc">Shop</span><span class="o">.</span><span class="na">model</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.Connection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.PreparedStatement</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.ResultSet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.SQLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.Statement</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">OrderBeanBO</span> <span class="o">{</span>
    <span class="c1">//定义一些变量</span>
    <span class="kd">private</span> <span class="nc">ResultSet</span> <span class="n">rs</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">Connection</span> <span class="n">ct</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">PreparedStatement</span> <span class="n">ps</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
    <span class="cm">/**
     * 生成订单
     * @param mbo 用户的购物车
     * @param userId 用户 id号
     * @return 返回一个订单详细信息Bean [OrderInfoBean]
     */</span>
    <span class="kd">public</span> <span class="nc">OrderInfoBean</span> <span class="nf">addOrder</span><span class="o">(</span><span class="nc">MyCartBO</span> <span class="n">mbo</span><span class="o">,</span><span class="nc">String</span> <span class="n">userId</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="c1">//System.out.println("进入了addOrder函数");</span>
        <span class="nc">OrderInfoBean</span> <span class="n">oib</span><span class="o">=</span><span class="k">new</span> <span class="nc">OrderInfoBean</span><span class="o">();</span>
        <span class="kt">boolean</span> <span class="n">b</span><span class="o">=</span><span class="kc">true</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">ct</span><span class="o">=</span><span class="k">new</span> <span class="nc">ConnDB</span><span class="o">().</span><span class="na">getConn</span><span class="o">();</span>
            <span class="c1">//ps=ct.prepareStatement("insert into orders(userId,orderDate,payMode,isPayed,totalPrice)" +</span>
            <span class="c1">//    " values(?,(select curdate()),'huodaofukuan',?,?)");</span>
            <span class="n">ps</span><span class="o">=</span><span class="n">ct</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="s">"insert into orders(userId,isPayed,totalPrice)"</span> <span class="o">+</span>
                    <span class="s">" values(?,?,?)"</span><span class="o">);</span>
            <span class="n">ps</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">userId</span><span class="o">);</span>
            <span class="n">ps</span><span class="o">.</span><span class="na">setByte</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)</span><span class="mi">0</span><span class="o">);</span>
            <span class="n">ps</span><span class="o">.</span><span class="na">setFloat</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="n">mbo</span><span class="o">.</span><span class="na">returnAllPrices</span><span class="o">());</span>
            <span class="c1">//执行</span>
            <span class="kt">int</span> <span class="n">a</span><span class="o">=</span><span class="n">ps</span><span class="o">.</span><span class="na">executeUpdate</span><span class="o">();</span>
            <span class="k">if</span><span class="o">(</span><span class="n">a</span><span class="o">==</span><span class="mi">1</span><span class="o">)</span>
            <span class="o">{</span>
                <span class="c1">//System.out.println("添加orders表成功！");</span>
                <span class="c1">//必须取出刚刚添加到orders表的那个订单</span>
                <span class="c1">//取出最后那条orders的id就是了</span>
                <span class="n">ps</span><span class="o">=</span><span class="n">ct</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="s">"select max(ordersId) from orders"</span><span class="o">);</span>
                <span class="n">rs</span><span class="o">=</span><span class="n">ps</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">();</span>
                <span class="kt">long</span> <span class="n">orderId</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span>
                <span class="k">if</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span>
                <span class="o">{</span>
                    <span class="n">orderId</span><span class="o">=</span><span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
                    <span class="c1">//System.out.println("orderId="+orderId);</span>
                <span class="o">}</span>
                <span class="c1">//orders表添加成功</span>
                <span class="c1">//添加orderDetail表</span>
                <span class="c1">//从购物车中取出所有选购的商品</span>
                <span class="nc">ArrayList</span> <span class="n">al</span><span class="o">=</span><span class="n">mbo</span><span class="o">.</span><span class="na">showMyCart</span><span class="o">();</span>
                <span class="c1">//循环的添加到orders表 //循环添加效率低</span>
                <span class="c1">//我们可以批量操作数据库的方法，提高操作数据库的效率</span>
                <span class="nc">Statement</span> <span class="n">sm</span><span class="o">=</span><span class="n">ct</span><span class="o">.</span><span class="na">createStatement</span><span class="o">();</span>
                <span class="c1">//System.out.println("al.size()="+al.size());</span>
                <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="o">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">al</span><span class="o">.</span><span class="na">size</span><span class="o">();</span><span class="n">i</span><span class="o">++)</span>
                <span class="o">{</span>
                    <span class="nc">GoodsBean</span> <span class="n">gb</span><span class="o">=(</span><span class="nc">GoodsBean</span><span class="o">)</span><span class="n">al</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
                    <span class="c1">//System.out.println("gb.getGoodsId()="+gb.getGoodsId());</span>
                    <span class="n">sm</span><span class="o">.</span><span class="na">addBatch</span><span class="o">(</span><span class="s">"insert into orderDetail values('"</span><span class="o">+</span><span class="n">orderId</span><span class="o">+</span><span class="s">"','"</span><span class="o">+</span><span class="n">gb</span><span class="o">.</span><span class="na">getGoodsId</span><span class="o">()+</span>
                            <span class="s">"','"</span><span class="o">+</span><span class="n">mbo</span><span class="o">.</span><span class="na">getGoodsNumById</span><span class="o">(</span><span class="n">gb</span><span class="o">.</span><span class="na">getGoodsId</span><span class="o">()+</span><span class="s">""</span><span class="o">)+</span><span class="s">"')"</span><span class="o">);</span>
                <span class="o">}</span>
                <span class="c1">//批量执行添加任务</span>
                <span class="n">sm</span><span class="o">.</span><span class="na">executeBatch</span><span class="o">();</span>
                <span class="nc">String</span> <span class="n">sql</span><span class="o">=</span><span class="s">"select ordersId,trueName,address,postcode,phone,totalPrice,userName,email from users,orders"</span> <span class="o">+</span>
                        <span class="s">" where ordersId=? and users.userId=(select orders.userId from orders where ordersId=?)"</span><span class="o">;</span>
                <span class="n">ps</span><span class="o">=</span><span class="n">ct</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="n">sql</span><span class="o">);</span>
                <span class="n">ps</span><span class="o">.</span><span class="na">setLong</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">orderId</span><span class="o">);</span>
                <span class="n">ps</span><span class="o">.</span><span class="na">setLong</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="n">orderId</span><span class="o">);</span>
                <span class="n">rs</span><span class="o">=</span><span class="n">ps</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">();</span> <span class="c1">//执行</span>
                <span class="k">if</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span>
                <span class="o">{</span>
                    <span class="n">oib</span><span class="o">.</span><span class="na">setOrdersId</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getLong</span><span class="o">(</span><span class="mi">1</span><span class="o">));</span>
                    <span class="n">oib</span><span class="o">.</span><span class="na">setTruename</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">2</span><span class="o">));</span>
                    <span class="n">oib</span><span class="o">.</span><span class="na">setAddress</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">3</span><span class="o">));</span>
                    <span class="n">oib</span><span class="o">.</span><span class="na">setPostcode</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">4</span><span class="o">));</span>
                    <span class="n">oib</span><span class="o">.</span><span class="na">setPhone</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">5</span><span class="o">));</span>
                    <span class="n">oib</span><span class="o">.</span><span class="na">setTotalPrice</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getFloat</span><span class="o">(</span><span class="mi">6</span><span class="o">));</span>
                    <span class="n">oib</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">7</span><span class="o">));</span>
                    <span class="n">oib</span><span class="o">.</span><span class="na">setEmail</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">8</span><span class="o">));</span>
                <span class="o">}</span>
            <span class="o">}</span><span class="k">else</span>
            <span class="o">{</span>
                <span class="c1">//添加订单失败</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"添加订单失败"</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">b</span><span class="o">=</span><span class="kc">false</span><span class="o">;</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span><span class="k">finally</span><span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">if</span><span class="o">(</span><span class="n">b</span><span class="o">)</span>
        <span class="o">{</span>
            <span class="k">return</span> <span class="n">oib</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">else</span><span class="o">{</span>
            <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="cm">/**关闭资源
     *
     */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">close</span><span class="o">()</span>
    <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="k">if</span><span class="o">(</span><span class="n">rs</span><span class="o">!=</span><span class="kc">null</span><span class="o">)</span>
            <span class="o">{</span>
                <span class="n">rs</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
                <span class="n">rs</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="k">if</span><span class="o">(</span><span class="n">ps</span><span class="o">!=</span><span class="kc">null</span><span class="o">)</span>
            <span class="o">{</span>
                <span class="n">ps</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
                <span class="n">ps</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="k">if</span><span class="o">(</span><span class="n">ct</span><span class="o">!=</span><span class="kc">null</span><span class="o">)</span>
            <span class="o">{</span>
                <span class="n">ct</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
                <span class="n">ct</span><span class="o">=</span><span class="kc">null</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SQLException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p><strong>model_src/Shop.model/ OrderDetailBean.java</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * 映射orderDetail表
 */</span>
<span class="kn">package</span> <span class="nc">Shop</span><span class="o">.</span><span class="na">model</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">OrderDetailBean</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">long</span> <span class="nf">getOrdersId</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">ordersId</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setOrdersId</span><span class="o">(</span><span class="kt">long</span> <span class="n">ordersId</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">ordersId</span> <span class="o">=</span> <span class="n">ordersId</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">long</span> <span class="nf">getGoodsId</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">goodsId</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setGoodsId</span><span class="o">(</span><span class="kt">long</span> <span class="n">goodsId</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">goodsId</span> <span class="o">=</span> <span class="n">goodsId</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getNums</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">nums</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setNums</span><span class="o">(</span><span class="kt">int</span> <span class="n">nums</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">nums</span> <span class="o">=</span> <span class="n">nums</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">ordersId</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">goodsId</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">nums</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div> <p><strong>model_src/Shop.model/ OrderInfoBean.java</strong></p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * 这是一个最全的javaBean
 * 显示订单详细信息时，要用它
 */</span>
<span class="kn">package</span> <span class="nc">Shop</span><span class="o">.</span><span class="na">model</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">OrderInfoBean</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">long</span> <span class="nf">getUserid</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">userid</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setUserid</span><span class="o">(</span><span class="kt">long</span> <span class="n">userid</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">userid</span> <span class="o">=</span> <span class="n">userid</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getUsername</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">username</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setUsername</span><span class="o">(</span><span class="nc">String</span> <span class="n">username</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">username</span> <span class="o">=</span> <span class="n">username</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getTruename</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">truename</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setTruename</span><span class="o">(</span><span class="nc">String</span> <span class="n">truename</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">truename</span> <span class="o">=</span> <span class="n">truename</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getPasswd</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">passwd</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setPasswd</span><span class="o">(</span><span class="nc">String</span> <span class="n">passwd</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">passwd</span> <span class="o">=</span> <span class="n">passwd</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getEmail</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">email</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setEmail</span><span class="o">(</span><span class="nc">String</span> <span class="n">email</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">email</span> <span class="o">=</span> <span class="n">email</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getPhone</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">phone</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setPhone</span><span class="o">(</span><span class="nc">String</span> <span class="n">phone</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">phone</span> <span class="o">=</span> <span class="n">phone</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getAddress</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">address</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setAddress</span><span class="o">(</span><span class="nc">String</span> <span class="n">address</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">address</span> <span class="o">=</span> <span class="n">address</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getPostcode</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">postcode</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setPostcode</span><span class="o">(</span><span class="nc">String</span> <span class="n">postcode</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">postcode</span> <span class="o">=</span> <span class="n">postcode</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getGrade</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">grade</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setGrade</span><span class="o">(</span><span class="kt">int</span> <span class="n">grade</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">grade</span> <span class="o">=</span> <span class="n">grade</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">long</span> <span class="nf">getOrdersId</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">ordersId</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setOrdersId</span><span class="o">(</span><span class="kt">long</span> <span class="n">ordersId</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">ordersId</span> <span class="o">=</span> <span class="n">ordersId</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">long</span> <span class="nf">getUserId</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">userId</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setUserId</span><span class="o">(</span><span class="kt">long</span> <span class="n">userId</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">userId</span> <span class="o">=</span> <span class="n">userId</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">Date</span> <span class="nf">getOrderDate</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">orderDate</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setOrderDate</span><span class="o">(</span><span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">Date</span> <span class="n">orderDate</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">orderDate</span> <span class="o">=</span> <span class="n">orderDate</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getPayMode</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">payMode</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setPayMode</span><span class="o">(</span><span class="nc">String</span> <span class="n">payMode</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">payMode</span> <span class="o">=</span> <span class="n">payMode</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">byte</span> <span class="nf">getIsPayed</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">isPayed</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setIsPayed</span><span class="o">(</span><span class="kt">byte</span> <span class="n">isPayed</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">isPayed</span> <span class="o">=</span> <span class="n">isPayed</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">float</span> <span class="nf">getTotalPrice</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">totalPrice</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setTotalPrice</span><span class="o">(</span><span class="kt">float</span> <span class="n">totalPrice</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">totalPrice</span> <span class="o">=</span> <span class="n">totalPrice</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">userid</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">username</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">truename</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">passwd</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">email</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">phone</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">address</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">postcode</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">grade</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">ordersId</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">userId</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">Date</span> <span class="n">orderDate</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">payMode</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">byte</span> <span class="n">isPayed</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">float</span> <span class="n">totalPrice</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div> <p><span class="site-footer-credits">版权所有，转载请注明出处 <a href="https://luowei.github.io/list">luowei.github.io</a>.</span></p> <link rel="stylesheet" href="/list/assets/css/font-awesome.min.css?ver=20151122" /> <!--[if IE 7 ]><link rel="stylesheet" href="/list/assets/css/font-awesome-ie7.min.css?ver=20151122"><![endif]--> <div style="float: right"> <span id="share"> <a class="wechat" target="_blank" title="分享到微信" href="https://chart.apis.google.com/chart?cht=qr&amp;chs=300x300&amp;chl=/list/docs/java/2011-06-19-Java%E5%9F%BA%E7%A1%8014%E4%B9%8B%E8%B4%AD%E7%89%A9%E7%BD%91%E7%AB%99%E5%BC%80%E5%8F%91.html"><i class="icon-large icon-wechat"></i></a> <a class="weibo" target="_blank" title="分享到微博" href="http://service.weibo.com/share/share.php?title=Java-Java基础14之购物网站开发 - 知不知&amp;url=/list/docs/java/2011-06-19-Java%E5%9F%BA%E7%A1%8014%E4%B9%8B%E8%B4%AD%E7%89%A9%E7%BD%91%E7%AB%99%E5%BC%80%E5%8F%91.html&amp;type=3&amp;searchPic=1"><i class="icon-large icon-weibo"></i></a> <a class="qzone" target="_blank" title="分享到 QQ 空间" href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=/list/docs/java/2011-06-19-Java%E5%9F%BA%E7%A1%8014%E4%B9%8B%E8%B4%AD%E7%89%A9%E7%BD%91%E7%AB%99%E5%BC%80%E5%8F%91.html&amp;title=Java-Java基础14之购物网站开发 - 知不知&amp;summary=使用基础的Java Web技术开发购物网站&amp;site=/list"><i class="icon-large icon-qzone"></i></a> <a class="twitter" target="_blank" title="Share to Twitter" href="https://twitter.com/intent/tweet?url=/list/docs/java/2011-06-19-Java%E5%9F%BA%E7%A1%8014%E4%B9%8B%E8%B4%AD%E7%89%A9%E7%BD%91%E7%AB%99%E5%BC%80%E5%8F%91.html&amp;text=Java-Java基础14之购物网站开发 - 知不知&amp;via=luowei010101"><i class="icon-large icon-twitter"></i></a> <a class="facebook" target="_blank" title="Share to Facebook" href="https://www.facebook.com/sharer.php?u=/list/docs/java/2011-06-19-Java%E5%9F%BA%E7%A1%8014%E4%B9%8B%E8%B4%AD%E7%89%A9%E7%BD%91%E7%AB%99%E5%BC%80%E5%8F%91.html&amp;t=Java-Java基础14之购物网站开发 - 知不知"><i class="icon-large icon-facebook-sign"></i></a> <a class="googleplus" target="_blank" title="Share to Google+" href="https://plus.google.com/share?url=/list/docs/java/2011-06-19-Java%E5%9F%BA%E7%A1%8014%E4%B9%8B%E8%B4%AD%E7%89%A9%E7%BD%91%E7%AB%99%E5%BC%80%E5%8F%91.html"><i class="icon-large icon-google-plus-sign"></i></a> </span> </div> <hr /> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css" /> <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script> <div id="gitalk-container"></div> <script type="text/javascript"> var gitalk = new Gitalk({ clientID: '9d5ee666269c252cf949', clientSecret: '728cd598f1fca9d8c1df1dfa300057883a3a8676', repo: 'list', owner: 'luowei', admin: ['luowei'], id: decodeURI('Java-Java基础14之购物网站开发'), distractionFreeMode: false }); gitalk.render('gitalk-container'); </script> <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? "https://" : "http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1277627361'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s96.cnzz.com/z_stat.php%3Fid%3D1277627361%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));</script> <footer class="site-footer"> <span class="site-footer-owner"><a href="">知不知</a> is maintained by <a href="http://luowei.github.io/list">luowei</a>.</span> <span class="site-footer-credits">Developed by <a href="https://luowei.github.io">luowei</a>.</span> </footer> </section> </body> </html>
