<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <title>知不知</title> <meta name="viewport" content="width=device-width, initial-scale=1"> <meta name="theme-color" content="#157878"> <meta name="apple-itunes-app" content="app-id=1227288468, app-argument=https://luowei.github.io/list/docs/java/2012-01-20-Java%20Quartz%E4%BD%BF%E7%94%A8%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html"> <link rel="stylesheet" href="/list/assets/css/normalize.css"> <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'> <link rel="stylesheet" href="/list/assets/css/cayman.css"> </head> <body> <section class="page-header"> <h1 class="project-name">知不知</h1> <h2 class="project-tagline"><a style="color:#ffffff;" href="http://luowei.github.io/list">知不知</a> 是一个代码爱好者的技术知识分享部落格。</h2> <a href="http://wodedata.com" target="_blank" class="btn">wodedata</a> <a href="/list" class="btn">home</a> <a href="http://app.wodedata.com" target="_blank" class="btn">APP作品</a> </section> <section class="main-content"> <!-- 标题 --> <h2>Java-Java Quartz使用学习笔记</h2> <!-- Google Ads --> <script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <p><ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-8760692904992206" data-ad-slot="2948937366"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script></p> <p><strong>主要内容：</strong> 包括两部分：第一部分：Java Quartz的基本介绍及基础知识、Cron表达式的介绍；第二部分：以一个Quartz封装工具类为例，重要介绍了Quartz API的使用；</p> <h2 id="第一部分">第一部分</h2> <h3 id="the-quartz-jar-files">The Quartz JAR Files</h3> <blockquote> <p>The Quartz package includes a number of jar files, located in root directory of the distribution. The main Quartz library is named quartz-all-xxx.jar (where xxx is a version number). In order to use any of Quartz’s features, this jar must be located on your application’s classpath.</p> </blockquote> <h3 id="the-properties-file">The Properties File</h3> <blockquote> <p>Quartz uses a properties file called (kudos on the originality) quartz.properties. This isn’t necessary at first, but to use anything but the most basic configuration it must be located on your classpath.</p> </blockquote> <h3 id="using-quartz">using Quartz</h3> <blockquote> <p>Here’s a quick snippet of code, that instantiates and starts a scheduler, and schedules a job for execution:</p> </blockquote> <p><strong>1.create a Job class</strong> <br /> <img src="https://raw.githubusercontent.com/luowei/list/gh-pages/images/java/mynote/01.png" alt="java quartz" /></p> <p><strong>2.Instantiate a scheduler</strong><br /> <img src="https://raw.githubusercontent.com/luowei/list/gh-pages/images/java/mynote/02.png" alt="java quartz" /></p> <p><strong>3.Instantiate a job and a trigger</strong><br /> <img src="https://raw.githubusercontent.com/luowei/list/gh-pages/images/java/mynote/03.png" alt="java quartz" /></p> <p><strong>4. Translate any state argument with JobDataMap</strong></p> <blockquote> <p>The JobDataMap can be used to hold any amount of (serializable) data objects which you wish to have made available to the job instance when it executes. JobDataMap is an implementation of the Java Map interface, and has some added convenience methods for storing and retrieving data of primitive types.<br /> <img src="https://raw.githubusercontent.com/luowei/list/gh-pages/images/java/mynote/04.png" alt="java quartz" /></p> </blockquote> <p><strong>5.Tell scheldule to tie some job with some trigger</strong><br /> <img src="https://raw.githubusercontent.com/luowei/list/gh-pages/images/java/mynote/05.png" alt="java quartz" /></p> <p><strong>6.start up a scheldule</strong> <br /> <img src="https://raw.githubusercontent.com/luowei/list/gh-pages/images/java/mynote/06.png" alt="java quartz" /></p> <p><strong>7.shutdown a scheldule</strong> <img src="https://raw.githubusercontent.com/luowei/list/gh-pages/images/java/mynote/07.png" alt="java quartz" /></p> <p>注：只有quartz 1.8以下的版本才支持对spring的集成</p> <h3 id="在项目中使用quartz完成定时任务">在项目中使用quartz完成定时任务</h3> <p><strong>1.加入依赖</strong> 在<properties></properties>中添加quartz的版本：</p> <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;quartz.version&gt;</span>2.1.5<span class="nt">&lt;/quartz.version&gt;</span>
</code></pre></div></div> <p>在<dependencies></dependencies>中添加quarz的依赖：<br /> <img src="https://raw.githubusercontent.com/luowei/list/gh-pages/images/java/mynote/08.jpg" alt="java quartz" /></p> <p><strong>2.定义版本发布的定时任务类</strong><br /> <img src="https://raw.githubusercontent.com/luowei/list/gh-pages/images/java/mynote/09.jpg" alt="java quartz" /></p> <p><strong>3.注入调度器</strong><br /> <img src="https://raw.githubusercontent.com/luowei/list/gh-pages/images/java/mynote/10.jpg" alt="java quartz" /></p> <p><strong>4.在VersionService中使用quartz schedule实现定时发布任务</strong> 1．定义SchedulerFactory<br /> <img src="https://raw.githubusercontent.com/luowei/list/gh-pages/images/java/mynote/11.jpg" alt="java quartz" /></p> <p>2.定义一个全局的JobList<br /> <img src="https://raw.githubusercontent.com/luowei/list/gh-pages/images/java/mynote/12.jpg" alt="java quartz" /></p> <p>3.在生成版本的方法中添加任务<br /> <img src="https://raw.githubusercontent.com/luowei/list/gh-pages/images/java/mynote/13.jpg" alt="java quartz" /></p> <p>4.添加一个job<br /> <img src="https://raw.githubusercontent.com/luowei/list/gh-pages/images/java/mynote/14.jpg" alt="java quartz" /></p> <p>5.删除一个job <br /> <img src="https://raw.githubusercontent.com/luowei/list/gh-pages/images/java/mynote/15.jpg" alt="java quartz" /></p> <p>6.关闭调度器 <br /> <img src="https://raw.githubusercontent.com/luowei/list/gh-pages/images/java/mynote/16.jpg" alt="java quartz" /></p> <p>7.删除版本时，同时删除对应的job<br /> <img src="https://raw.githubusercontent.com/luowei/list/gh-pages/images/java/mynote/17.jpg" alt="java quartz" /></p> <h3 id="cron-expressions">Cron Expressions</h3> <blockquote> <p>Cron-Expressions are used to configure instances of CronTrigger. Cron-Expressions are strings that are actually made up of seven sub-expressions, that describe individual details of the schedule. These sub-expression are separated with white-space, and represent: 1.Seconds 2.Minutes 3.Hours 4.Day-of-Month 5.Month 6.Day-of-Week 7.Year (optional field)</p> <p>An example of a complete cron-expression is the string “0 0 12 ? * WED” - which means “every Wednesday at 12:00:00 pm”.</p> <p>Individual sub-expressions can contain ranges and/or lists. For example, the day of week field in the previous (which reads “WED”) example could be replaced with “MON-FRI”, “MON,WED,FRI”, or even “MON-WED,SAT”.</p> <p>Wild-cards (the ‘’ character) can be used to say “every” possible value of this field. Therefore the ‘’ character in the “Month” field of the previous example simply means “every month”. A ‘*’ in the Day-Of-Week field would therefore obviously mean “every day of the week”.</p> <p>All of the fields have a set of valid values that can be specified. These values should be fairly obvious - such as the numbers 0 to 59 for seconds and minutes, and the values 0 to 23 for hours. Day-of-Month can be any value 1-31, but you need to be careful about how many days are in a given month! Months can be specified as values between 0 and 11, or by using the strings JAN, FEB, MAR, APR, MAY, JUN, JUL, AUG, SEP, OCT, NOV and DEC. Days-of-Week can be specified as values between 1 and 7 (1 = Sunday) or by using the strings SUN, MON, TUE, WED, THU, FRI and SAT.</p> <p>The ‘/’ character can be used to specify increments to values. For example, if you put ‘0/15’ in the Minutes field, it means ‘every 15th minute of the hour, starting at minute zero’. If you used ‘3/20’ in the Minutes field, it would mean ‘every 20th minute of the hour, starting at minute three’ - or in other words it is the same as specifying ‘3,23,43’ in the Minutes field. Note the subtlety that “/35” does *not mean “every 35 minutes” - it mean “every 35th minute of the hour, starting at minute zero” - or in other words the same as specifying ‘0,35’.</p> <p>The ‘?’ character is allowed for the day-of-month and day-of-week fields. It is used to specify “no specific value”. This is useful when you need to specify something in one of the two fields, but not the other. See the examples below (and CronTrigger JavaDoc) for clarification.</p> <p>The ‘L’ character is allowed for the day-of-month and day-of-week fields. This character is short-hand for “last”, but it has different meaning in each of the two fields. For example, the value “L” in the day-of-month field means “the last day of the month” - day 31 for January, day 28 for February on non-leap years. If used in the day-of-week field by itself, it simply means “7” or “SAT”. But if used in the day-of-week field after another value, it means “the last xxx day of the month” - for example “6L” or “FRIL” both mean “the last friday of the month”. You can also specify an offset from the last day of the month, such as “L-3” which would mean the third-to-last day of the calendar month. When using the ‘L’ option, it is important not to specify lists, or ranges of values, as you’ll get confusing/unexpected results.</p> <p>The ‘W’ is used to specify the weekday (Monday-Friday) nearest the given day. As an example, if you were to specify “15W” as the value for the day-of-month field, the meaning is: “the nearest weekday to the 15th of the month”.</p> <p>The ‘#’ is used to specify “the nth” XXX weekday of the month. For example, the value of “6#3” or “FRI#3” in the day-of-week field means “the third Friday of the month”.</p> <p>Here are a few more examples of expressions and their meanings - you can find even more in the JavaDoc for org.quartz.CronExpression.</p> </blockquote> <p><strong>Example Cron Expressions</strong></p> <blockquote> <p>CronTrigger Example 1 - an expression to create a trigger that simply fires every 5 minutes <code class="highlighter-rouge">"0 0/5 * * * ?"</code></p> <p>CronTrigger Example 2 - an expression to create a trigger that fires every 5 minutes, at 10 seconds after the minute (i.e. 10:00:10 am, 10:05:10 am, etc.). <code class="highlighter-rouge">"10 0/5 * * * ?"</code></p> <p>CronTrigger Example 3 - an expression to create a trigger that fires at 10:30, 11:30, 12:30, and 13:30, on every Wednesday and Friday. <code class="highlighter-rouge">"0 30 10-13 ? * WED,FRI"</code></p> <p>CronTrigger Example 4 - an expression to create a trigger that fires every half hour between the hours of 8 am and 10 am on the 5th and 20th of every month. Note that the trigger will NOT fire at 10:00 am, just at 8:00, 8:30, <code class="highlighter-rouge">9:00 and 9:30</code><br /> <code class="highlighter-rouge">"0 0/30 8-9 5,20 * ?"</code></p> <p>Note that some scheduling requirements are too complicated to express with a single trigger - such as “every 5 minutes between 9:00 am and 10:00 am, and every 20 minutes between 1:00 pm and 10:00 pm”. The solution in this scenario is to simply create two triggers, and register both of them to run the same job.</p> </blockquote> <p><strong>参考：</strong> <br /> quartz-2.0.2学习小记:<a href="http://blog.csdn.net/cuihaiyang/article/details/6742869">http://blog.csdn.net/cuihaiyang/article/details/6742869</a><br /> Task Execution and Scheduling:<a href="http://static.springsource.org/spring/docs/3.0.5.RELEASE/reference/scheduling.html">http://static.springsource.org/spring/docs/3.0.5.RELEASE/reference/scheduling.html</a></p> <h2 id="第二部分">第二部分</h2> <h3 id="1定义任务执行者">1.定义任务执行者</h3> <p><img src="https://raw.githubusercontent.com/luowei/list/gh-pages/images/java/mynote/18.png" alt="java quartz" /></p> <h3 id="2构造任务调度任务">2.构造任务、调度任务</h3> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * job service implements
 * User: luowei
 * Date: 12-7-8
 * Time: 下午12:58
 */</span>
<span class="nd">@Service</span><span class="o">(</span><span class="s">"jobService"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JobServiceImpl</span> <span class="kd">implements</span> <span class="nc">JobService</span> <span class="o">{</span>
    <span class="nd">@Autowired</span>
    <span class="nc">NewestMusicService</span> <span class="n">newestMusicService</span><span class="o">;</span>
    <span class="nd">@Autowired</span>
    <span class="nc">HotestMusicService</span> <span class="n">hotestMusicService</span><span class="o">;</span>
    <span class="c1">//最新任务的名称</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="nc">String</span> <span class="n">getNewestJobDetailName</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="c1">//最新触发器的名称</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="nc">String</span> <span class="n">getNewestTriggerName</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="c1">//最新任务组</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="nc">String</span> <span class="n">getNewestGroup</span> <span class="o">=</span> <span class="s">"getNewestGroup"</span><span class="o">;</span>

    <span class="cm">/**
     * 获取最新的任务
     *
     * @return 加载任务的时间
     */</span>
    <span class="kd">public</span> <span class="nc">Date</span> <span class="nf">getNewestJob</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">//调度时间</span>
        <span class="nc">Date</span> <span class="n">schelderDate</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="c1">//任务</span>
        <span class="nc">JobDetail</span> <span class="n">job</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="nc">String</span> <span class="n">jobName</span> <span class="o">=</span> <span class="nc">DateUtil</span><span class="o">.</span><span class="na">getYYYYMMDDHHMMSS</span><span class="o">(</span><span class="nc">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">getTime</span><span class="o">())</span> <span class="o">+</span> <span class="s">"_getNewestJob"</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">getNewestJobDetailName</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">job</span> <span class="o">=</span> <span class="nc">JobUtil</span><span class="o">.</span><span class="na">initDurableJob</span><span class="o">(</span><span class="n">getNewestGroup</span><span class="o">,</span> <span class="n">jobName</span><span class="o">,</span> <span class="nc">NewestJob</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;();</span>
        <span class="n">map</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="nc">NewestJob</span><span class="o">.</span><span class="na">SERVICE</span><span class="o">,</span> <span class="n">newestMusicService</span><span class="o">);</span>
        <span class="nc">JobUtil</span><span class="o">.</span><span class="na">setData2Job</span><span class="o">(</span><span class="n">job</span><span class="o">,</span> <span class="n">map</span><span class="o">);</span>
        <span class="c1">//触发器</span>
        <span class="nc">Trigger</span> <span class="n">trigger</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="nc">String</span> <span class="n">triName</span> <span class="o">=</span> <span class="nc">DateUtil</span><span class="o">.</span><span class="na">getYYYYMMDDHHMMSS</span><span class="o">(</span><span class="nc">Calendar</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">getTime</span><span class="o">())</span> <span class="o">+</span> <span class="s">"_getNewestTrigger"</span><span class="o">;</span>
        <span class="nc">Date</span> <span class="n">startTime</span> <span class="o">=</span> <span class="nc">DateUtils</span><span class="o">.</span><span class="na">parseDate</span><span class="o">(</span><span class="nc">ConfigUtil</span><span class="o">.</span><span class="na">getConfigMap</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="nc">FinalConfig</span><span class="o">.</span><span class="na">GET_NEWEST_STARTTIME</span><span class="o">).</span><span class="na">getValue</span><span class="o">());</span>
        <span class="nc">Integer</span> <span class="n">intervalInHours</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="nc">ConfigUtil</span><span class="o">.</span><span class="na">getConfigMap</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="nc">FinalConfig</span><span class="o">.</span><span class="na">NEWEST_INTERVALINHOURS</span><span class="o">).</span><span class="na">getValue</span><span class="o">());</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">startTime</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">intervalInHours</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">trigger</span> <span class="o">=</span> <span class="nc">JobUtil</span><span class="o">.</span><span class="na">initMinuteRepeatTrigger</span><span class="o">(</span><span class="n">getNewestGroup</span><span class="o">,</span> <span class="n">triName</span><span class="o">,</span> <span class="n">startTime</span><span class="o">,</span> <span class="n">intervalInHours</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="c1">//调度任务</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">getNewestTriggerName</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">schelderDate</span> <span class="o">=</span> <span class="nc">JobUtil</span><span class="o">.</span><span class="na">runJob</span><span class="o">(</span><span class="n">job</span><span class="o">,</span> <span class="n">trigger</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="nc">TriggerKey</span> <span class="n">triggerKey</span> <span class="o">=</span> <span class="nc">JobUtil</span><span class="o">.</span><span class="na">triggerKeyMap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">getNewestTriggerName</span><span class="o">);</span>
            <span class="n">schelderDate</span> <span class="o">=</span> <span class="nc">JobUtil</span><span class="o">.</span><span class="na">reSchedulerJob</span><span class="o">(</span><span class="n">triggerKey</span><span class="o">,</span> <span class="n">trigger</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="c1">//给名称赋值</span>
        <span class="n">getNewestJobDetailName</span> <span class="o">=</span> <span class="n">jobName</span><span class="o">;</span>
        <span class="n">getNewestTriggerName</span> <span class="o">=</span> <span class="n">triName</span><span class="o">;</span>
        <span class="k">return</span> <span class="n">schelderDate</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="c1">//......</span>
<span class="o">}</span>
</code></pre></div></div> <h3 id="3封装类">3.封装类</h3> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">ttpod</span><span class="o">.</span><span class="na">musicSNS</span><span class="o">.</span><span class="na">util</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.commons.lang.StringUtils</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.quartz.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.quartz.impl.StdSchedulerFactory</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.quartz.impl.matchers.GroupMatcher</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.slf4j.Logger</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.slf4j.LoggerFactory</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>
<span class="cm">/**
 * User: luowei
 * Date: 12-7-9
 * Time: 上午10:00
 */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JobUtil</span> <span class="o">{</span>
    <span class="kd">protected</span> <span class="kd">static</span> <span class="nc">Logger</span> <span class="n">logger</span> <span class="o">=</span> <span class="o">(</span><span class="nc">Logger</span><span class="o">)</span> <span class="nc">LoggerFactory</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="nc">JobUtil</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="cm">/**
     * define a scheduler ,will be a sington instance
     */</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="nc">Scheduler</span> <span class="n">scheduler</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="cm">/**
     * get the name with default name 'QuartzScheduler' scheduler
     * @return
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Scheduler</span> <span class="nf">getScheduler</span><span class="o">(){</span>
        <span class="k">if</span><span class="o">(</span><span class="n">scheduler</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span>
            <span class="nc">SchedulerFactory</span> <span class="n">schedulerFactory</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StdSchedulerFactory</span><span class="o">();</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">scheduler</span> <span class="o">=</span> <span class="n">schedulerFactory</span><span class="o">.</span><span class="na">getScheduler</span><span class="o">();</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SchedulerException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">(),</span><span class="n">e</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">scheduler</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="cm">/**
     * get the scheduler with named shcedulerName
     * @param schedulerName
     * @return
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Scheduler</span> <span class="nf">getScheduler</span><span class="o">(</span><span class="nc">String</span> <span class="n">schedulerName</span><span class="o">){</span>
        <span class="k">if</span><span class="o">(</span><span class="n">scheduler</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span>
            <span class="nc">SchedulerFactory</span> <span class="n">schedulerFactory</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StdSchedulerFactory</span><span class="o">();</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">scheduler</span> <span class="o">=</span> <span class="n">schedulerFactory</span><span class="o">.</span><span class="na">getScheduler</span><span class="o">(</span><span class="n">schedulerName</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SchedulerException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">(),</span><span class="n">e</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">scheduler</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="cm">/**
     * scheduler a job with specefied trigger
     * @param job
     * @param trigger
     * @return
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Date</span> <span class="nf">schedulerAJobWithTrigger</span><span class="o">(</span><span class="nc">JobDetail</span> <span class="n">job</span><span class="o">,</span><span class="nc">Trigger</span> <span class="n">trigger</span><span class="o">){</span>
        <span class="nc">Date</span> <span class="n">date</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="k">if</span><span class="o">(</span><span class="n">scheduler</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span>
            <span class="n">scheduler</span> <span class="o">=</span> <span class="n">getScheduler</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="k">if</span><span class="o">(!</span><span class="n">scheduler</span><span class="o">.</span><span class="na">checkExists</span><span class="o">(</span><span class="n">job</span><span class="o">.</span><span class="na">getKey</span><span class="o">())</span>
                    <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">scheduler</span><span class="o">.</span><span class="na">checkExists</span><span class="o">(</span><span class="n">trigger</span><span class="o">.</span><span class="na">getKey</span><span class="o">())){</span>
                <span class="n">date</span> <span class="o">=</span> <span class="n">scheduler</span><span class="o">.</span><span class="na">scheduleJob</span><span class="o">(</span><span class="n">job</span><span class="o">,</span><span class="n">trigger</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SchedulerException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">(),</span><span class="n">e</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">date</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="cm">/**
     * Remove (delete) the &lt;code&gt;{@link org.quartz.Trigger}&lt;/code&gt; with the
     * given key, and store the new given one - which must be associated
     * with the same job (the new trigger must have the job name &amp; group specified)
     * - however, the new trigger need not have the same name as the old trigger.
     *
     * @param triggerKey identity of the trigger to replace
     * @param newTrigger
     * The new &lt;code&gt;Trigger&lt;/code&gt; to be stored.
     *
     * @return &lt;code&gt;null&lt;/code&gt; if a &lt;code&gt;Trigger&lt;/code&gt; with the given
     * name &amp; group was not found and removed from the store (and the
     * new trigger is therefore not stored), otherwise
     * the first fire time of the newly scheduled trigger is returned.
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Date</span> <span class="nf">reSchedulerJob</span><span class="o">(</span><span class="nc">TriggerKey</span> <span class="n">triggerKey</span><span class="o">,</span><span class="nc">Trigger</span> <span class="n">newTrigger</span><span class="o">){</span>
        <span class="nc">Date</span> <span class="n">date</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="k">if</span><span class="o">(</span><span class="n">triggerKey</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">newTrigger</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">scheduler</span><span class="o">.</span><span class="na">isStarted</span><span class="o">())</span>
                <span class="n">date</span> <span class="o">=</span> <span class="n">scheduler</span><span class="o">.</span><span class="na">rescheduleJob</span><span class="o">(</span><span class="n">triggerKey</span><span class="o">,</span><span class="n">newTrigger</span><span class="o">);</span>
            <span class="n">triggerKeyMap</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">triggerKey</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SchedulerException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">(),</span><span class="n">e</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">date</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="cm">/**
     * scheduler a job with specefied trigger in a specefied shceduler
     * @param schedulerName
     * @param job
     * @param trigger
     * @return
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Date</span> <span class="nf">schedulerAJobWithTrigger</span><span class="o">(</span><span class="nc">String</span> <span class="n">schedulerName</span><span class="o">,</span><span class="nc">JobDetail</span> <span class="n">job</span><span class="o">,</span><span class="nc">Trigger</span> <span class="n">trigger</span><span class="o">){</span>
        <span class="nc">Date</span> <span class="n">date</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="k">if</span><span class="o">(</span><span class="n">scheduler</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span>
            <span class="n">scheduler</span> <span class="o">=</span> <span class="n">getScheduler</span><span class="o">(</span><span class="n">schedulerName</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="k">if</span><span class="o">(!</span><span class="n">scheduler</span><span class="o">.</span><span class="na">checkExists</span><span class="o">(</span><span class="n">job</span><span class="o">.</span><span class="na">getKey</span><span class="o">())</span>
                    <span class="o">&amp;&amp;</span> <span class="n">scheduler</span><span class="o">.</span><span class="na">checkExists</span><span class="o">(</span><span class="n">trigger</span><span class="o">.</span><span class="na">getKey</span><span class="o">())){</span>
                <span class="n">date</span> <span class="o">=</span> <span class="n">scheduler</span><span class="o">.</span><span class="na">scheduleJob</span><span class="o">(</span><span class="n">job</span><span class="o">,</span><span class="n">trigger</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SchedulerException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">(),</span><span class="n">e</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">date</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="cm">/**
     * start scheduler
     * @return
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Boolean</span> <span class="nf">startScheduler</span><span class="o">(){</span>
        <span class="nc">Boolean</span> <span class="n">flag</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="k">if</span><span class="o">(</span><span class="n">scheduler</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span>
                <span class="n">scheduler</span> <span class="o">=</span> <span class="n">getScheduler</span><span class="o">();</span>
            <span class="o">}</span>
            <span class="k">if</span><span class="o">(!</span><span class="n">scheduler</span><span class="o">.</span><span class="na">isStarted</span><span class="o">()){</span>
                <span class="n">scheduler</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
            <span class="o">}</span>
            <span class="n">flag</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
            <span class="k">return</span> <span class="n">flag</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SchedulerException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">(),</span><span class="n">e</span><span class="o">);</span>
            <span class="k">return</span> <span class="n">flag</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="cm">/**
     * shutdown scheduler
     * @return
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Boolean</span> <span class="nf">shutdownScheduler</span><span class="o">(){</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="k">if</span><span class="o">(</span><span class="n">scheduler</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">scheduler</span><span class="o">.</span><span class="na">isShutdown</span><span class="o">()){</span>
                <span class="n">scheduler</span><span class="o">.</span><span class="na">shutdown</span><span class="o">();</span>
            <span class="o">}</span>
            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SchedulerException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">(),</span><span class="n">e</span><span class="o">);</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="cm">/**
     * trigger key list
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span><span class="nc">TriggerKey</span><span class="o">&gt;</span> <span class="n">triggerKeyMap</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span><span class="nc">TriggerKey</span><span class="o">&gt;();</span>
    <span class="cm">/**
     * get a trigger which will repeat forever with in every other specified hours
     * @param groupName group name
     * @param triggerName trigger name
     * @param startTime start time
     * @param intervalInHours interval in minutes
     * @return the updated SimpleScheduleBuilder
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Trigger</span> <span class="nf">initHourRepeatTrigger</span><span class="o">(</span><span class="nc">String</span> <span class="n">groupName</span><span class="o">,</span><span class="nc">String</span> <span class="n">triggerName</span><span class="o">,</span>
                                                <span class="nc">Date</span> <span class="n">startTime</span><span class="o">,</span><span class="nc">Integer</span> <span class="n">intervalInHours</span><span class="o">){</span>
        <span class="nc">SimpleTrigger</span> <span class="n">trigger</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="k">if</span><span class="o">(</span><span class="nc">StringUtils</span><span class="o">.</span><span class="na">isNotBlank</span><span class="o">(</span><span class="n">groupName</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="nc">StringUtils</span><span class="o">.</span><span class="na">isNotBlank</span><span class="o">(</span><span class="n">triggerName</span><span class="o">)</span>
                <span class="o">&amp;&amp;</span> <span class="n">startTime</span><span class="o">!=</span><span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">intervalInHours</span><span class="o">!=</span><span class="kc">null</span><span class="o">){</span>
            <span class="n">trigger</span> <span class="o">=</span> <span class="o">(</span><span class="nc">SimpleTrigger</span><span class="o">)</span><span class="nc">TriggerBuilder</span><span class="o">.</span><span class="na">newTrigger</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">withIdentity</span><span class="o">(</span><span class="n">triggerName</span><span class="o">,</span><span class="n">groupName</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">withSchedule</span><span class="o">(</span><span class="nc">SimpleScheduleBuilder</span><span class="o">.</span><span class="na">repeatHourlyForever</span><span class="o">(</span><span class="n">intervalInHours</span><span class="o">))</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
            <span class="n">triggerKeyMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">triggerName</span><span class="o">,</span> <span class="n">trigger</span><span class="o">.</span><span class="na">getKey</span><span class="o">());</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">trigger</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="cm">/**
     * get a trigger which will repeat forever with in every other specified minutes
     * @param groupName group name
     * @param triggerName trigger name
     * @param startTime start time
     * @param intervalInMinutes interval in minutes
     * @return the updated SimpleScheduleBuilder
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Trigger</span> <span class="nf">initMinuteRepeatTrigger</span><span class="o">(</span><span class="nc">String</span> <span class="n">groupName</span><span class="o">,</span><span class="nc">String</span> <span class="n">triggerName</span><span class="o">,</span>
                                                  <span class="nc">Date</span> <span class="n">startTime</span><span class="o">,</span><span class="nc">Integer</span> <span class="n">intervalInMinutes</span><span class="o">){</span>
        <span class="nc">SimpleTrigger</span> <span class="n">trigger</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="k">if</span><span class="o">(</span><span class="nc">StringUtils</span><span class="o">.</span><span class="na">isNotBlank</span><span class="o">(</span><span class="n">groupName</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="nc">StringUtils</span><span class="o">.</span><span class="na">isNotBlank</span><span class="o">(</span><span class="n">triggerName</span><span class="o">)</span>
                <span class="o">&amp;&amp;</span> <span class="n">startTime</span><span class="o">!=</span><span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">intervalInMinutes</span><span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
            <span class="n">trigger</span> <span class="o">=</span> <span class="o">(</span><span class="nc">SimpleTrigger</span><span class="o">)</span><span class="nc">TriggerBuilder</span><span class="o">.</span><span class="na">newTrigger</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">withIdentity</span><span class="o">(</span><span class="n">triggerName</span><span class="o">,</span><span class="n">groupName</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">startAt</span><span class="o">(</span><span class="n">startTime</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">withSchedule</span><span class="o">(</span><span class="nc">SimpleScheduleBuilder</span><span class="o">.</span><span class="na">repeatMinutelyForever</span><span class="o">(</span><span class="n">intervalInMinutes</span><span class="o">))</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
            <span class="n">triggerKeyMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">triggerName</span><span class="o">,</span> <span class="n">trigger</span><span class="o">.</span><span class="na">getKey</span><span class="o">());</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">trigger</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="cm">/**
     * get a trigger which will repeat forever with every other specified seconds
     * @param groupName group name
     * @param triggerName trigger name
     * @param startTime start time
     * @param intervalInSeconds interval in seconds
     * @return a SimpleTrigger
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Trigger</span> <span class="nf">initSecondRepeatTrigger</span><span class="o">(</span><span class="nc">String</span> <span class="n">groupName</span><span class="o">,</span><span class="nc">String</span> <span class="n">triggerName</span><span class="o">,</span>
                                                  <span class="nc">Date</span> <span class="n">startTime</span><span class="o">,</span><span class="nc">Integer</span> <span class="n">intervalInSeconds</span><span class="o">){</span>
        <span class="nc">SimpleTrigger</span> <span class="n">trigger</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="k">if</span><span class="o">(</span><span class="nc">StringUtils</span><span class="o">.</span><span class="na">isNotBlank</span><span class="o">(</span><span class="n">groupName</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="nc">StringUtils</span><span class="o">.</span><span class="na">isNotBlank</span><span class="o">(</span><span class="n">triggerName</span><span class="o">)</span>
                <span class="o">&amp;&amp;</span> <span class="n">startTime</span><span class="o">!=</span><span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">intervalInSeconds</span><span class="o">!=</span><span class="kc">null</span><span class="o">){</span>
            <span class="n">trigger</span> <span class="o">=</span> <span class="o">(</span><span class="nc">SimpleTrigger</span><span class="o">)</span><span class="nc">TriggerBuilder</span><span class="o">.</span><span class="na">newTrigger</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">withIdentity</span><span class="o">(</span><span class="n">triggerName</span><span class="o">,</span><span class="n">groupName</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">startAt</span><span class="o">(</span><span class="n">startTime</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">withSchedule</span><span class="o">(</span><span class="nc">SimpleScheduleBuilder</span><span class="o">.</span><span class="na">repeatSecondlyForever</span><span class="o">(</span><span class="n">intervalInSeconds</span><span class="o">))</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="n">triggerKeyMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">triggerName</span><span class="o">,</span> <span class="n">trigger</span><span class="o">.</span><span class="na">getKey</span><span class="o">());</span>
        <span class="k">return</span> <span class="n">trigger</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="cm">/**
     * set to repeat the given number of times - 1 with an interval of the given number of seconds.
     * Note: Total count = 1 (at start time) + repeat count
     * @param groupName group name
     * @param triggerName trigger name
     * @param startTime start time
     * @param count count
     * @param seconds seconds
     * @return a SimpleTrigger
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Trigger</span> <span class="nf">initRepeatCountTrigger</span><span class="o">(</span><span class="nc">String</span> <span class="n">groupName</span><span class="o">,</span><span class="nc">String</span> <span class="n">triggerName</span><span class="o">,</span>
                                                 <span class="nc">Date</span> <span class="n">startTime</span><span class="o">,</span><span class="nc">Integer</span> <span class="n">count</span><span class="o">,</span><span class="nc">Integer</span> <span class="n">seconds</span><span class="o">){</span>
        <span class="nc">SimpleTrigger</span> <span class="n">trigger</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="k">if</span><span class="o">(</span><span class="nc">StringUtils</span><span class="o">.</span><span class="na">isNotBlank</span><span class="o">(</span><span class="n">groupName</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="nc">StringUtils</span><span class="o">.</span><span class="na">isNotBlank</span><span class="o">(</span><span class="n">triggerName</span><span class="o">)</span>
                <span class="o">&amp;&amp;</span> <span class="n">startTime</span><span class="o">!=</span><span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">count</span><span class="o">!=</span><span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">seconds</span><span class="o">!=</span><span class="kc">null</span><span class="o">){</span>
            <span class="n">trigger</span> <span class="o">=</span> <span class="o">(</span><span class="nc">SimpleTrigger</span><span class="o">)</span><span class="nc">TriggerBuilder</span><span class="o">.</span><span class="na">newTrigger</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">withIdentity</span><span class="o">(</span><span class="n">triggerName</span><span class="o">,</span><span class="n">groupName</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">startAt</span><span class="o">(</span><span class="n">startTime</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">withSchedule</span><span class="o">(</span><span class="nc">SimpleScheduleBuilder</span><span class="o">.</span><span class="na">repeatSecondlyForTotalCount</span><span class="o">(</span><span class="n">count</span><span class="o">,</span><span class="n">seconds</span><span class="o">))</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
            <span class="n">triggerKeyMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">triggerName</span><span class="o">,</span> <span class="n">trigger</span><span class="o">.</span><span class="na">getKey</span><span class="o">());</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">trigger</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="cm">/**
     * Create a CronTrigger with the given cron-expression string - which
     * is presumed to b e valid cron expression (and hence only a RuntimeException
     * will be thrown if it is not).
     * @param groupName
     * @param triggerName
     * @param startTime
     * @param cronExpression
     * @return a CronTrigger
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Trigger</span> <span class="nf">initCronTrigger</span><span class="o">(</span><span class="nc">String</span> <span class="n">groupName</span><span class="o">,</span><span class="nc">String</span> <span class="n">triggerName</span><span class="o">,</span>
                                          <span class="nc">Date</span> <span class="n">startTime</span><span class="o">,</span><span class="nc">String</span> <span class="n">cronExpression</span><span class="o">){</span>
        <span class="nc">CronTrigger</span> <span class="n">trigger</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="k">if</span><span class="o">(</span><span class="nc">StringUtils</span><span class="o">.</span><span class="na">isNotBlank</span><span class="o">(</span><span class="n">groupName</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="nc">StringUtils</span><span class="o">.</span><span class="na">isNotBlank</span><span class="o">(</span><span class="n">triggerName</span><span class="o">)</span>
                <span class="o">&amp;&amp;</span> <span class="nc">StringUtils</span><span class="o">.</span><span class="na">isNotBlank</span><span class="o">(</span><span class="n">cronExpression</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="n">startTime</span><span class="o">!=</span><span class="kc">null</span><span class="o">){</span>
            <span class="n">trigger</span> <span class="o">=</span> <span class="o">(</span><span class="nc">CronTrigger</span><span class="o">)</span><span class="nc">TriggerBuilder</span><span class="o">.</span><span class="na">newTrigger</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">withIdentity</span><span class="o">(</span><span class="n">triggerName</span><span class="o">,</span><span class="n">groupName</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">startAt</span><span class="o">(</span><span class="n">startTime</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">withSchedule</span><span class="o">(</span><span class="nc">CronScheduleBuilder</span><span class="o">.</span><span class="na">cronSchedule</span><span class="o">(</span><span class="n">cronExpression</span><span class="o">))</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
            <span class="n">triggerKeyMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">triggerName</span><span class="o">,</span> <span class="n">trigger</span><span class="o">.</span><span class="na">getKey</span><span class="o">());</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">trigger</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span><span class="nc">JobKey</span><span class="o">&gt;</span> <span class="n">jobKeyMap</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span><span class="nc">JobKey</span><span class="o">&gt;();</span>
    <span class="cm">/**
     * init a job with the specified jobName,groupName and clazz
     *
     * @param groupName
     * @param jobName
     * @param clazz
     * @return
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">JobDetail</span> <span class="nf">initJob</span><span class="o">(</span><span class="nc">String</span> <span class="n">groupName</span><span class="o">,</span> <span class="nc">String</span> <span class="n">jobName</span><span class="o">,</span> <span class="nc">Class</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="nc">Job</span><span class="o">&gt;</span> <span class="n">clazz</span><span class="o">){</span>
        <span class="nc">JobDetail</span> <span class="n">job</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="k">if</span><span class="o">(</span><span class="nc">StringUtils</span><span class="o">.</span><span class="na">isNotBlank</span><span class="o">(</span><span class="n">jobName</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="nc">StringUtils</span><span class="o">.</span><span class="na">isNotBlank</span><span class="o">(</span><span class="n">groupName</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="n">clazz</span><span class="o">!=</span><span class="kc">null</span><span class="o">){</span>
            <span class="n">job</span> <span class="o">=</span> <span class="nc">JobBuilder</span><span class="o">.</span><span class="na">newJob</span><span class="o">((</span><span class="nc">Class</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="nc">Job</span><span class="o">&gt;)</span> <span class="n">clazz</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">withIdentity</span><span class="o">(</span><span class="n">jobName</span><span class="o">,</span><span class="n">groupName</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
            <span class="n">jobKeyMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">jobName</span><span class="o">,</span> <span class="n">job</span><span class="o">.</span><span class="na">getKey</span><span class="o">());</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">job</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="cm">/**
     * init durable job
     * @param groupName
     * @param jobName
     * @param clazz
     * @return
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">JobDetail</span> <span class="nf">initDurableJob</span><span class="o">(</span><span class="nc">String</span> <span class="n">groupName</span><span class="o">,</span> <span class="nc">String</span> <span class="n">jobName</span><span class="o">,</span> <span class="nc">Class</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="nc">Job</span><span class="o">&gt;</span> <span class="n">clazz</span><span class="o">){</span>
        <span class="nc">JobDetail</span> <span class="n">job</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="k">if</span><span class="o">(</span><span class="nc">StringUtils</span><span class="o">.</span><span class="na">isNotBlank</span><span class="o">(</span><span class="n">jobName</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="nc">StringUtils</span><span class="o">.</span><span class="na">isNotBlank</span><span class="o">(</span><span class="n">groupName</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="n">clazz</span><span class="o">!=</span><span class="kc">null</span><span class="o">){</span>
            <span class="n">job</span> <span class="o">=</span> <span class="nc">JobBuilder</span><span class="o">.</span><span class="na">newJob</span><span class="o">((</span><span class="nc">Class</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="nc">Job</span><span class="o">&gt;)</span> <span class="n">clazz</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">withIdentity</span><span class="o">(</span><span class="n">jobName</span><span class="o">,</span><span class="n">groupName</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">storeDurably</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">build</span><span class="o">();</span>
            <span class="n">jobKeyMap</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">jobName</span><span class="o">,</span> <span class="n">job</span><span class="o">.</span><span class="na">getKey</span><span class="o">());</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">job</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="cm">/**
     * add data to JobDetail,which data were stored in map
     * @param jobDetail jobDetail
     * @param map map
     * @return
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Boolean</span> <span class="nf">setData2Job</span><span class="o">(</span><span class="nc">JobDetail</span> <span class="n">jobDetail</span><span class="o">,</span><span class="nc">Map</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="nc">String</span><span class="o">,?</span> <span class="kd">extends</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">map</span><span class="o">){</span>
        <span class="k">if</span><span class="o">(</span><span class="n">jobDetail</span><span class="o">!=</span><span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">map</span><span class="o">!=</span><span class="kc">null</span><span class="o">){</span>
            <span class="n">jobDetail</span><span class="o">.</span><span class="na">getJobDataMap</span><span class="o">().</span><span class="na">putAll</span><span class="o">(</span><span class="n">map</span><span class="o">);</span>
            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">}</span><span class="k">else</span><span class="o">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="cm">/**
     * add data to Trigger,which data were stored in map
     * @param trigger trigger
     * @param map map
     * @return
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Boolean</span> <span class="nf">setData2Trigger</span><span class="o">(</span><span class="nc">Trigger</span> <span class="n">trigger</span><span class="o">,</span><span class="nc">Map</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="nc">String</span><span class="o">,?</span> <span class="kd">extends</span> <span class="nc">Object</span><span class="o">&gt;</span> <span class="n">map</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span><span class="o">(</span><span class="n">trigger</span><span class="o">!=</span><span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">map</span><span class="o">!=</span><span class="kc">null</span><span class="o">){</span>
            <span class="n">trigger</span><span class="o">.</span><span class="na">getJobDataMap</span><span class="o">().</span><span class="na">putAll</span><span class="o">(</span><span class="n">map</span><span class="o">);</span>
            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">}</span><span class="k">else</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="cm">/**
     * delete a job with specified jobName,this oporater will delete the job from Scheduler,
     * and remove the Entry Element which key equals jobName from global varible jobkeyMap
     * @param jobName
     * @return
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Boolean</span> <span class="nf">delJob</span><span class="o">(</span><span class="nc">String</span> <span class="n">jobName</span><span class="o">){</span>
        <span class="nc">Boolean</span> <span class="n">flag</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
        <span class="k">if</span><span class="o">(</span><span class="nc">StringUtils</span><span class="o">.</span><span class="na">isNotBlank</span><span class="o">(</span><span class="n">jobName</span><span class="o">)){</span>
            <span class="nc">JobKey</span> <span class="n">jobKey</span> <span class="o">=</span> <span class="n">jobKeyMap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">jobName</span><span class="o">);</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">scheduler</span><span class="o">.</span><span class="na">deleteJob</span><span class="o">(</span><span class="n">jobKey</span><span class="o">);</span>
                <span class="n">jobKeyMap</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">jobName</span><span class="o">);</span>
                <span class="n">flag</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SchedulerException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">(),</span><span class="n">e</span><span class="o">);</span>
                <span class="n">flag</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">flag</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="cm">/**
     * delete all jobs,this oporater will delete the job from Scheduler,
     * and remove the Entry Element which key equals jobName from global varible jobkeyMap
     * @return
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Boolean</span> <span class="nf">delAllJob</span><span class="o">(){</span>
        <span class="nc">Boolean</span> <span class="n">flag</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="nc">List</span><span class="o">&lt;</span><span class="nc">JobKey</span><span class="o">&gt;</span> <span class="n">jobKeyList</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">JobKey</span><span class="o">&gt;();</span>
            <span class="n">jobKeyList</span><span class="o">.</span><span class="na">addAll</span><span class="o">(</span><span class="n">jobKeyMap</span><span class="o">.</span><span class="na">values</span><span class="o">());</span>
            <span class="n">scheduler</span><span class="o">.</span><span class="na">deleteJobs</span><span class="o">(</span><span class="n">jobKeyList</span><span class="o">);</span>
            <span class="n">jobKeyMap</span><span class="o">.</span><span class="na">clear</span><span class="o">();</span>
            <span class="n">flag</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SchedulerException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">(),</span><span class="n">e</span><span class="o">);</span>
            <span class="n">flag</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">flag</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="cm">/**
     * Resume (un-pause) the &lt;code&gt;{@link org.quartz.JobDetail}&lt;/code&gt; with
     * the given key.
     *
     * &lt;p&gt;
     * If any of the &lt;code&gt;Job&lt;/code&gt;'s&lt;code&gt;Trigger&lt;/code&gt; s missed one
     * or more fire-times, then the &lt;code&gt;Trigger&lt;/code&gt;'s misfire
     * instruction will be applied.
     * &lt;/p&gt;
     * @param jobName
     * @return
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Boolean</span> <span class="nf">pauseJob</span><span class="o">(</span><span class="nc">String</span> <span class="n">jobName</span><span class="o">){</span>
        <span class="nc">Boolean</span> <span class="n">flag</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
        <span class="k">if</span><span class="o">(</span><span class="nc">StringUtils</span><span class="o">.</span><span class="na">isNotBlank</span><span class="o">(</span><span class="n">jobName</span><span class="o">)){</span>
            <span class="nc">JobKey</span> <span class="n">jobKey</span> <span class="o">=</span> <span class="n">jobKeyMap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">jobName</span><span class="o">);</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">scheduler</span><span class="o">.</span><span class="na">pauseJob</span><span class="o">(</span><span class="n">jobKey</span><span class="o">);</span>
                <span class="n">flag</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SchedulerException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">(),</span><span class="n">e</span><span class="o">);</span>
                <span class="n">flag</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">flag</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="cm">/**
     * Resume (un-pause) the &lt;code&gt;{@link org.quartz.JobDetail}&lt;/code&gt; with
     * the given key.
     *
     * &lt;p&gt;
     * If any of the &lt;code&gt;Job&lt;/code&gt;'s&lt;code&gt;Trigger&lt;/code&gt; s missed one
     * or more fire-times, then the &lt;code&gt;Trigger&lt;/code&gt;'s misfire
     * instruction will be applied.
     * &lt;/p&gt;
     *
     * @param jobName jobName
     * @return
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Boolean</span> <span class="nf">resumeJob</span><span class="o">(</span><span class="nc">String</span> <span class="n">jobName</span><span class="o">){</span>
        <span class="nc">Boolean</span> <span class="n">flag</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
        <span class="k">if</span><span class="o">(</span><span class="nc">StringUtils</span><span class="o">.</span><span class="na">isNotBlank</span><span class="o">(</span><span class="n">jobName</span><span class="o">)){</span>
            <span class="nc">JobKey</span> <span class="n">jobKey</span> <span class="o">=</span> <span class="n">jobKeyMap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">jobName</span><span class="o">);</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">scheduler</span><span class="o">.</span><span class="na">resumeJob</span><span class="o">(</span><span class="n">jobKey</span><span class="o">);</span>
                <span class="n">flag</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SchedulerException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">(),</span><span class="n">e</span><span class="o">);</span>
                <span class="n">flag</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">flag</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="cm">/**
     * Remove the indicated &lt;code&gt;{@link Trigger}&lt;/code&gt; from the scheduler.
     *
     * &lt;p&gt;If the related job does not have any other triggers, and the job is
     * not durable, then the job will also be deleted.&lt;/p&gt;
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Boolean</span> <span class="nf">unscheduleJob</span><span class="o">(</span><span class="nc">String</span> <span class="n">triggerName</span><span class="o">){</span>
        <span class="nc">Boolean</span> <span class="n">flag</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
        <span class="k">if</span><span class="o">(</span><span class="nc">StringUtils</span><span class="o">.</span><span class="na">isNotBlank</span><span class="o">(</span><span class="n">triggerName</span><span class="o">)){</span>
            <span class="nc">TriggerKey</span> <span class="n">triggerKey</span> <span class="o">=</span> <span class="n">triggerKeyMap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">triggerName</span><span class="o">);</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">scheduler</span><span class="o">.</span><span class="na">unscheduleJob</span><span class="o">(</span><span class="n">triggerKey</span><span class="o">);</span>
                <span class="n">flag</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SchedulerException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">(),</span><span class="n">e</span><span class="o">);</span>
                <span class="n">flag</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">flag</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="cm">/**
     * Remove all of the indicated &lt;code&gt;{@link Trigger}&lt;/code&gt;s from the scheduler.
     *
     * &lt;p&gt;If the related job does not have any other triggers, and the job is
     * not durable, then the job will also be deleted.&lt;/p&gt;
     *
     * &lt;p&gt;Note that while this bulk operation is likely more efficient than
     * invoking &lt;code&gt;unscheduleJob(TriggerKey triggerKey)&lt;/code&gt; several
     * times, it may have the adverse affect of holding data locks for a
     * single long duration of time (rather than lots of small durations
     * of time).&lt;/p&gt;
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Boolean</span> <span class="nf">unscheduleJobs</span><span class="o">(){</span>
        <span class="nc">Boolean</span> <span class="n">flag</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="nc">List</span><span class="o">&lt;</span><span class="nc">TriggerKey</span><span class="o">&gt;</span> <span class="n">triggerKeyList</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">TriggerKey</span><span class="o">&gt;();</span>
            <span class="n">triggerKeyList</span><span class="o">.</span><span class="na">addAll</span><span class="o">(</span><span class="n">triggerKeyMap</span><span class="o">.</span><span class="na">values</span><span class="o">());</span>
            <span class="n">scheduler</span><span class="o">.</span><span class="na">unscheduleJobs</span><span class="o">(</span><span class="n">triggerKeyList</span><span class="o">);</span>
            <span class="n">flag</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SchedulerException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">(),</span><span class="n">e</span><span class="o">);</span>
            <span class="n">flag</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">flag</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="cm">/**
     * delete a trigger with specified triggerName,this operate will delete the job from Scheduler,
     * and remove the Entry Element which key equals jobName from global varible jobkeyMap
     * @param triggerName
     * @return
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Boolean</span> <span class="nf">pauseTrigger</span><span class="o">(</span><span class="nc">String</span> <span class="n">triggerName</span><span class="o">){</span>
        <span class="nc">Boolean</span> <span class="n">flag</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
        <span class="k">if</span><span class="o">(</span><span class="nc">StringUtils</span><span class="o">.</span><span class="na">isNotBlank</span><span class="o">(</span><span class="n">triggerName</span><span class="o">)){</span>
            <span class="nc">TriggerKey</span> <span class="n">triggerKey</span> <span class="o">=</span> <span class="n">triggerKeyMap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">triggerName</span><span class="o">);</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">scheduler</span><span class="o">.</span><span class="na">pauseTrigger</span><span class="o">(</span><span class="n">triggerKey</span><span class="o">);</span>
                <span class="n">flag</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SchedulerException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">(),</span><span class="n">e</span><span class="o">);</span>
                <span class="n">flag</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">flag</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="cm">/**
     * Resume (un-pause) the &lt;code&gt;{@link Trigger}&lt;/code&gt; with the given
     * key.
     *
     * &lt;p&gt;
     * If the &lt;code&gt;Trigger&lt;/code&gt; missed one or more fire-times, then the
     * &lt;code&gt;Trigger&lt;/code&gt;'s misfire instruction will be applied.
     * &lt;/p&gt;
     * @param triggerName
     * @return
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Boolean</span> <span class="nf">resumeTrigger</span><span class="o">(</span><span class="nc">String</span> <span class="n">triggerName</span><span class="o">){</span>
        <span class="nc">Boolean</span> <span class="n">flag</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
        <span class="k">if</span><span class="o">(</span><span class="nc">StringUtils</span><span class="o">.</span><span class="na">isNotBlank</span><span class="o">(</span><span class="n">triggerName</span><span class="o">)){</span>
            <span class="nc">TriggerKey</span> <span class="n">triggerKey</span> <span class="o">=</span> <span class="n">triggerKeyMap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">triggerName</span><span class="o">);</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="n">scheduler</span><span class="o">.</span><span class="na">resumeTrigger</span><span class="o">(</span><span class="n">triggerKey</span><span class="o">);</span>
                <span class="n">flag</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SchedulerException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">(),</span><span class="n">e</span><span class="o">);</span>
                <span class="n">flag</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">flag</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="cm">/**
     * Pause all triggers - similar to calling &lt;code&gt;pauseTriggerGroup(group)&lt;/code&gt;
     * on every group, however, after using this method &lt;code&gt;resumeAll()&lt;/code&gt;
     * must be called to clear the scheduler's state of 'remembering' that all
     * new triggers will be paused as they are added.
     * @return
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Boolean</span> <span class="nf">pauseAll</span><span class="o">(){</span>
        <span class="nc">Boolean</span> <span class="n">flag</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">scheduler</span><span class="o">.</span><span class="na">pauseAll</span><span class="o">();</span>
            <span class="n">flag</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SchedulerException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">(),</span><span class="n">e</span><span class="o">);</span>
            <span class="n">flag</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">flag</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="cm">/**
     * Resume (un-pause) all triggers - similar to calling
     * &lt;code&gt;resumeTriggerGroup(group)&lt;/code&gt; on every group.
     *
     * &lt;p&gt;
     * If any &lt;code&gt;Trigger&lt;/code&gt; missed one or more fire-times, then the
     * &lt;code&gt;Trigger&lt;/code&gt;'s misfire instruction will be applied.
     * &lt;/p&gt;
     * @return
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Boolean</span> <span class="nf">resumeAll</span><span class="o">(){</span>
        <span class="nc">Boolean</span> <span class="n">flag</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">scheduler</span><span class="o">.</span><span class="na">resumeAll</span><span class="o">();</span>
            <span class="n">flag</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">SchedulerException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">(),</span><span class="n">e</span><span class="o">);</span>
            <span class="n">flag</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">flag</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="cm">/**
     * run a job with specified trigger
     * @param job job
     * @param trigger trigger
     * @return
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Date</span> <span class="nf">runJob</span><span class="o">(</span><span class="nc">JobDetail</span> <span class="n">job</span><span class="o">,</span><span class="nc">Trigger</span> <span class="n">trigger</span><span class="o">){</span>
        <span class="nc">Date</span> <span class="n">date</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="k">if</span><span class="o">(</span><span class="n">job</span><span class="o">!=</span><span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">trigger</span><span class="o">!=</span><span class="kc">null</span><span class="o">){</span>
            <span class="n">startScheduler</span><span class="o">();</span>
            <span class="n">date</span> <span class="o">=</span> <span class="n">schedulerAJobWithTrigger</span><span class="o">(</span><span class="n">job</span><span class="o">,</span><span class="n">trigger</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">date</span><span class="o">;</span>
    <span class="o">}</span>
<span class="c1">// public static Trigger getTrigger(String getNewestTriggerName){}</span>
<span class="o">}</span>
</code></pre></div></div> <p><span class="site-footer-credits">版权所有，转载请注明出处 <a href="https://luowei.github.io/list">luowei.github.io</a>.</span></p> <link rel="stylesheet" href="/list/assets/css/font-awesome.min.css?ver=20151122" /> <!--[if IE 7 ]><link rel="stylesheet" href="/list/assets/css/font-awesome-ie7.min.css?ver=20151122"><![endif]--> <div style="float: right"> <span id="share"> <a class="wechat" target="_blank" title="分享到微信" href="https://chart.apis.google.com/chart?cht=qr&amp;chs=300x300&amp;chl=https%3A%2F%2Fluowei.github.io%2Flist%2Fdocs%2Fjava%2F2012-01-20-Java%2520Quartz%25E4%25BD%25BF%25E7%2594%25A8%25E5%25AD%25A6%25E4%25B9%25A0%25E7%25AC%2594%25E8%25AE%25B0.html"><i class="icon-large icon-wechat"></i></a> <a class="weibo" target="_blank" title="分享到微博" href="http://service.weibo.com/share/share.php?title=Java-Java Quartz使用学习笔记 - 知不知&amp;url=https%3A%2F%2Fluowei.github.io%2Flist%2Fdocs%2Fjava%2F2012-01-20-Java%2520Quartz%25E4%25BD%25BF%25E7%2594%25A8%25E5%25AD%25A6%25E4%25B9%25A0%25E7%25AC%2594%25E8%25AE%25B0.html&amp;type=3&amp;searchPic=1"><i class="icon-large icon-weibo"></i></a> <a class="qzone" target="_blank" title="分享到 QQ 空间" href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https%3A%2F%2Fluowei.github.io%2Flist%2Fdocs%2Fjava%2F2012-01-20-Java%2520Quartz%25E4%25BD%25BF%25E7%2594%25A8%25E5%25AD%25A6%25E4%25B9%25A0%25E7%25AC%2594%25E8%25AE%25B0.html&amp;title=Java-Java Quartz使用学习笔记 - 知不知&amp;summary=Java Quartz使用学习笔记&amp;site=/list"><i class="icon-large icon-qzone"></i></a> <a class="twitter" target="_blank" title="Share to Twitter" href="https://twitter.com/intent/tweet?url=https%3A%2F%2Fluowei.github.io%2Flist%2Fdocs%2Fjava%2F2012-01-20-Java%2520Quartz%25E4%25BD%25BF%25E7%2594%25A8%25E5%25AD%25A6%25E4%25B9%25A0%25E7%25AC%2594%25E8%25AE%25B0.html&amp;text=Java-Java Quartz使用学习笔记 - 知不知&amp;via=luowei010101"><i class="icon-large icon-twitter"></i></a> <a class="facebook" target="_blank" title="Share to Facebook" href="https://www.facebook.com/sharer.php?u=https%3A%2F%2Fluowei.github.io%2Flist%2Fdocs%2Fjava%2F2012-01-20-Java%2520Quartz%25E4%25BD%25BF%25E7%2594%25A8%25E5%25AD%25A6%25E4%25B9%25A0%25E7%25AC%2594%25E8%25AE%25B0.html&amp;t=Java-Java Quartz使用学习笔记 - 知不知"><i class="icon-large icon-facebook-sign"></i></a> <a class="googleplus" target="_blank" title="Share to Google+" href="https://plus.google.com/share?url=https%3A%2F%2Fluowei.github.io%2Flist%2Fdocs%2Fjava%2F2012-01-20-Java%2520Quartz%25E4%25BD%25BF%25E7%2594%25A8%25E5%25AD%25A6%25E4%25B9%25A0%25E7%25AC%2594%25E8%25AE%25B0.html"><i class="icon-large icon-google-plus-sign"></i></a> </span> </div> <hr /> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css" /> <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script> <div id="gitalk-container"></div> <script type="text/javascript"> var gitalk = new Gitalk({ clientID: '9d5ee666269c252cf949', clientSecret: '728cd598f1fca9d8c1df1dfa300057883a3a8676', repo: 'list', owner: 'luowei', admin: ['luowei'], id: decodeURI('Java-Java Quartz使用学习笔记'), distractionFreeMode: false }); gitalk.render('gitalk-container'); </script> <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? "https://" : "http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1277627361'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s96.cnzz.com/z_stat.php%3Fid%3D1277627361%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));</script> <footer class="site-footer"> <span class="site-footer-owner"><a href="https://luowei.github.io/list">知不知</a> is maintained by <a href="http://luowei.github.io/list">luowei</a>.</span> <span class="site-footer-credits">Developed by <a href="https://luowei.github.io">luowei</a>.</span> </footer> </section> </body> </html>
